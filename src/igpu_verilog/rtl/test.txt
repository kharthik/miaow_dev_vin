Only in ../../verilog/rtl/alu: build
Only in ../../verilog/rtl/common: build
diff -r ./common/global_definitions.v ../../verilog/rtl/common/global_definitions.v
16a17
> 
diff -r ./common/mux_param.v ../../verilog/rtl/common/mux_param.v
16a17
>          out = {WIDTH{1'bx}};
Only in ../../verilog/rtl/compute_unit: build
diff -r ./compute_unit/compute_unit.interface ../../verilog/rtl/compute_unit/compute_unit.interface
16,17d15
<       mem2cu_page_fault_en,
<       mem2cu_page_fault_tag,
190c188
< input dispatch2cu_wf_dispatch, mem2lsu_ack, buff2fetchwave_ack, mem2cu_page_fault_en;
---
> input dispatch2cu_wf_dispatch, mem2lsu_ack, buff2fetchwave_ack;
193c191
< input[6:0] mem2lsu_tag_resp, mem2cu_page_fault_tag;
---
> input[6:0] mem2lsu_tag_resp;
264,288c262,285
<          decode2issue_branch, decode2issue_exec_rd, decode2issue_exec_wr, decode2issue_idemp_barrier,
<          decode2issue_m0_rd, decode2issue_m0_wr, decode2issue_scc_rd, decode2issue_scc_wr,
<          decode2issue_valid, decode2issue_vcc_rd, decode2issue_vcc_wr, decode2issue_waitcnt,
<          decode2issue_wf_halt, decode2tracemon_colldone, decode2wave_ins_half_rqd,
<          dispatch2cu_wf_dispatch, exec2issue_salu_wr_exec_en, exec2issue_salu_wr_m0_en,
<          exec2issue_salu_wr_scc_en, exec2issue_salu_wr_vcc_en, exec2issue_valu_wr_vcc_en,
<          exec2salu_rd_scc_value, exec2simd_rd_scc_value, exec2simf_rd_scc_value,
<          fetch2buff_rd_en, fetch2exec_init_wf_en, fetch2tracemon_dispatch, fetch2wave_basereg_wr,
<          fetch2wave_reserve_valid, issue2fetchwave_wf_done_en, issue2fetchwavedecode_recover_en,
<          issue2lsu_lsu_select, issue2salu_alu_select, issue2simd0_alu_select,
<          issue2simd1_alu_select, issue2simd2_alu_select, issue2simd3_alu_select,
<          issue2simf0_alu_select, issue2simf1_alu_select, issue2simf2_alu_select,
<          issue2simf3_alu_select, issue2tracemon_barrier_retire_en, issue2tracemon_waitcnt_retire_en,
<          lsu2issue_ready, lsu2mem_gm_or_lds, lsu2sgpr_instr_done, lsu2sgpr_source1_rd_en,
<          lsu2sgpr_source2_rd_en, lsu2tracemon_gm_or_lds, lsu2vgpr_instr_done,
<          lsu2vgpr_source1_rd_en, lsu2vgpr_source2_rd_en, mem2cu_page_fault_en,
<          mem2lsu_ack, rfa2simd0_queue_entry_serviced, rfa2simd1_queue_entry_serviced,
<          rfa2simd2_queue_entry_serviced, rfa2simd3_queue_entry_serviced, rfa2simf0_queue_entry_serviced,
<          rfa2simf1_queue_entry_serviced, rfa2simf2_queue_entry_serviced, rfa2simf3_queue_entry_serviced,
<          salu2exec_rd_en, salu2exec_wr_exec_en, salu2exec_wr_m0_en, salu2exec_wr_scc_en,
<          salu2exec_wr_scc_value, salu2exec_wr_vcc_en, salu2fetchwaveissue_branch_en,
<          salu2fetchwaveissue_branch_taken, salu2issue_alu_ready, salu2sgpr_instr_done,
<          salu2sgpr_source1_rd_en, salu2sgpr_source2_rd_en, sgpr2issue_alu_wr_done,
<          sgpr2issue_lsu_instr_done, sgpr2issue_valu_dest_reg_valid, simd0_2exec_rd_en,
<          simd0_2exec_wr_vcc_en, simd0_2issue_alu_ready, simd0_2rfa_queue_entry_valid,
---
>          decode2issue_branch, decode2issue_exec_rd, decode2issue_exec_wr, decode2issue_m0_rd,
>          decode2issue_m0_wr, decode2issue_scc_rd, decode2issue_scc_wr, decode2issue_valid,
>          decode2issue_vcc_rd, decode2issue_vcc_wr, decode2issue_waitcnt, decode2issue_wf_halt,
>          decode2tracemon_colldone, decode2wave_ins_half_rqd, dispatch2cu_wf_dispatch,
>          exec2issue_salu_wr_exec_en, exec2issue_salu_wr_m0_en, exec2issue_salu_wr_scc_en,
>          exec2issue_salu_wr_vcc_en, exec2issue_valu_wr_vcc_en, exec2salu_rd_scc_value,
>          exec2simd_rd_scc_value, exec2simf_rd_scc_value, fetch2buff_rd_en, fetch2exec_init_wf_en,
>          fetch2tracemon_dispatch, fetch2wave_basereg_wr, fetch2wave_reserve_valid,
>          issue2fetchwave_wf_done_en, issue2lsu_lsu_select, issue2salu_alu_select,
>          issue2simd0_alu_select, issue2simd1_alu_select, issue2simd2_alu_select,
>          issue2simd3_alu_select, issue2simf0_alu_select, issue2simf1_alu_select,
>          issue2simf2_alu_select, issue2simf3_alu_select, issue2tracemon_barrier_retire_en,
>          issue2tracemon_waitcnt_retire_en, lsu2issue_ready, lsu2mem_gm_or_lds,
>          lsu2sgpr_instr_done, lsu2sgpr_source1_rd_en, lsu2sgpr_source2_rd_en,
>          lsu2tracemon_gm_or_lds, lsu2vgpr_instr_done, lsu2vgpr_source1_rd_en,
>          lsu2vgpr_source2_rd_en, mem2lsu_ack, rfa2simd0_queue_entry_serviced,
>          rfa2simd1_queue_entry_serviced, rfa2simd2_queue_entry_serviced, rfa2simd3_queue_entry_serviced,
>          rfa2simf0_queue_entry_serviced, rfa2simf1_queue_entry_serviced, rfa2simf2_queue_entry_serviced,
>          rfa2simf3_queue_entry_serviced, salu2exec_rd_en, salu2exec_wr_exec_en,
>          salu2exec_wr_m0_en, salu2exec_wr_scc_en, salu2exec_wr_scc_value, salu2exec_wr_vcc_en,
>          salu2fetchwaveissue_branch_en, salu2fetchwaveissue_branch_taken, salu2issue_alu_ready,
>          salu2sgpr_instr_done, salu2sgpr_source1_rd_en, salu2sgpr_source2_rd_en,
>          sgpr2issue_alu_wr_done, sgpr2issue_lsu_instr_done, sgpr2issue_valu_dest_reg_valid,
>          simd0_2exec_rd_en, simd0_2exec_wr_vcc_en, simd0_2issue_alu_ready, simd0_2rfa_queue_entry_valid,
323,336c320,333
<          issue2fetchwavedecode_recover_wfid, issue2lsu_wfid, issue2tracemon_waitcnt_retire_wfid,
<          lsu2exec_rd_wfid, lsu2sgpr_instr_done_wfid, lsu2vgpr_instr_done_wfid,
<          salu2exec_rd_wfid, salu2exec_wr_wfid, salu2fetchwaveissue_branch_wfid,
<          salu2sgpr_instr_done_wfid, sgpr2issue_alu_wr_done_wfid, sgpr2issue_lsu_instr_done_wfid,
<          simd0_2exec_rd_wfid, simd0_2exec_wr_vcc_wfid, simd0_2vgpr_instr_done_wfid,
<          simd1_2exec_rd_wfid, simd1_2exec_wr_vcc_wfid, simd1_2vgpr_instr_done_wfid,
<          simd2_2exec_rd_wfid, simd2_2exec_wr_vcc_wfid, simd2_2vgpr_instr_done_wfid,
<          simd3_2exec_rd_wfid, simd3_2exec_wr_vcc_wfid, simd3_2vgpr_instr_done_wfid,
<          simf0_2exec_rd_wfid, simf0_2exec_wr_vcc_wfid, simf0_2vgpr_instr_done_wfid,
<          simf1_2exec_rd_wfid, simf1_2exec_wr_vcc_wfid, simf1_2vgpr_instr_done_wfid,
<          simf2_2exec_rd_wfid, simf2_2exec_wr_vcc_wfid, simf2_2vgpr_instr_done_wfid,
<          simf3_2exec_rd_wfid, simf3_2exec_wr_vcc_wfid, simf3_2vgpr_instr_done_wfid,
<          vgpr2issue_alu_wr_done_wfid, vgpr2issue_lsu_wr_done_wfid, wave2decode_wfid;
< wire[6:0] lsu2mem_tag_req, mem2cu_page_fault_tag, mem2lsu_tag_resp;
---
>          issue2lsu_wfid, issue2tracemon_waitcnt_retire_wfid, lsu2exec_rd_wfid,
>          lsu2sgpr_instr_done_wfid, lsu2vgpr_instr_done_wfid, salu2exec_rd_wfid,
>          salu2exec_wr_wfid, salu2fetchwaveissue_branch_wfid, salu2sgpr_instr_done_wfid,
>          sgpr2issue_alu_wr_done_wfid, sgpr2issue_lsu_instr_done_wfid, simd0_2exec_rd_wfid,
>          simd0_2exec_wr_vcc_wfid, simd0_2vgpr_instr_done_wfid, simd1_2exec_rd_wfid,
>          simd1_2exec_wr_vcc_wfid, simd1_2vgpr_instr_done_wfid, simd2_2exec_rd_wfid,
>          simd2_2exec_wr_vcc_wfid, simd2_2vgpr_instr_done_wfid, simd3_2exec_rd_wfid,
>          simd3_2exec_wr_vcc_wfid, simd3_2vgpr_instr_done_wfid, simf0_2exec_rd_wfid,
>          simf0_2exec_wr_vcc_wfid, simf0_2vgpr_instr_done_wfid, simf1_2exec_rd_wfid,
>          simf1_2exec_wr_vcc_wfid, simf1_2vgpr_instr_done_wfid, simf2_2exec_rd_wfid,
>          simf2_2exec_wr_vcc_wfid, simf2_2vgpr_instr_done_wfid, simf3_2exec_rd_wfid,
>          simf3_2exec_wr_vcc_wfid, simf3_2vgpr_instr_done_wfid, vgpr2issue_alu_wr_done_wfid,
>          vgpr2issue_lsu_wr_done_wfid, wave2decode_wfid;
> wire[6:0] lsu2mem_tag_req, mem2lsu_tag_resp;
372,379c369,375
<          issue2fetch_recover_pc, issue2lsu_imm_value1, issue2lsu_instr_pc, issue2lsu_opcode,
<          issue2tracemon_barrier_retire_pc, issue2tracemon_waitcnt_retire_pc,
<          lsu2tracemon_retire_pc, salu2exec_wr_m0_value, salu2fetch_branch_pc_value,
<          salu2tracemon_retire_pc, sgpr2lsu_source2_data, sgpr2simd_rd_data, sgpr2simf_rd_data,
<          simd0_2tracemon_retire_pc, simd1_2tracemon_retire_pc, simd2_2tracemon_retire_pc,
<          simd3_2tracemon_retire_pc, simf0_2tracemon_retire_pc, simf1_2tracemon_retire_pc,
<          simf2_2tracemon_retire_pc, simf3_2tracemon_retire_pc, wave2decode_instr,
<          wave2decode_instr_pc;
---
>          issue2lsu_imm_value1, issue2lsu_instr_pc, issue2lsu_opcode, issue2tracemon_barrier_retire_pc,
>          issue2tracemon_waitcnt_retire_pc, lsu2tracemon_retire_pc, salu2exec_wr_m0_value,
>          salu2fetch_branch_pc_value, salu2tracemon_retire_pc, sgpr2lsu_source2_data,
>          sgpr2simd_rd_data, sgpr2simf_rd_data, simd0_2tracemon_retire_pc, simd1_2tracemon_retire_pc,
>          simd2_2tracemon_retire_pc, simd3_2tracemon_retire_pc, simf0_2tracemon_retire_pc,
>          simf1_2tracemon_retire_pc, simf2_2tracemon_retire_pc, simf3_2tracemon_retire_pc,
>          wave2decode_instr, wave2decode_instr_pc;
422,423d417
<     .issue_recover_en(issue2fetchwavedecode_recover_en),
<     .issue_recover_wfid(issue2fetchwavedecode_recover_wfid),
454,455c448
<     .tracemon_colldone(decode2tracemon_colldone),
<     .issue_idemp_barrier(decode2issue_idemp_barrier)
---
>     .tracemon_colldone(decode2tracemon_colldone)
565,567d557
<     .issue_recover_pc(issue2fetch_recover_pc),
<     .issue_recover_en(issue2fetchwavedecode_recover_en),
<     .issue_recover_wfid(issue2fetchwavedecode_recover_wfid),
662,664d651
<     .mem2cu_page_fault_en(mem2cu_page_fault_en),
<     .mem2cu_page_fault_tag(mem2cu_page_fault_tag),
<     .decode_idemp_barrier(decode2issue_idemp_barrier),
706,709c693
<     .tracemon_waitcnt_retire_pc(issue2tracemon_waitcnt_retire_pc),
<     .fetch_recover_pc(issue2fetch_recover_pc),
<     .fetchwavedecode_recover_en(issue2fetchwavedecode_recover_en),
<     .fetchwavedecode_recover_wfid(issue2fetchwavedecode_recover_wfid)
---
>     .tracemon_waitcnt_retire_pc(issue2tracemon_waitcnt_retire_pc)
1524,1525d1507
<     .issue_recover_en(issue2fetchwavedecode_recover_en),
<     .issue_recover_wfid(issue2fetchwavedecode_recover_wfid),
diff -r ./compute_unit/compute_unit.vp ../../verilog/rtl/compute_unit/compute_unit.vp
16,17d15
<       mem2cu_page_fault_en,
<       mem2cu_page_fault_tag,
190c188
< input dispatch2cu_wf_dispatch, mem2lsu_ack, buff2fetchwave_ack, mem2cu_page_fault_en;
---
> input dispatch2cu_wf_dispatch, mem2lsu_ack, buff2fetchwave_ack;
193c191
< input[6:0] mem2lsu_tag_resp, mem2cu_page_fault_tag;
---
> input[6:0] mem2lsu_tag_resp;
264,288c262,285
<          decode2issue_branch, decode2issue_exec_rd, decode2issue_exec_wr, decode2issue_idemp_barrier,
<          decode2issue_m0_rd, decode2issue_m0_wr, decode2issue_scc_rd, decode2issue_scc_wr,
<          decode2issue_valid, decode2issue_vcc_rd, decode2issue_vcc_wr, decode2issue_waitcnt,
<          decode2issue_wf_halt, decode2tracemon_colldone, decode2wave_ins_half_rqd,
<          dispatch2cu_wf_dispatch, exec2issue_salu_wr_exec_en, exec2issue_salu_wr_m0_en,
<          exec2issue_salu_wr_scc_en, exec2issue_salu_wr_vcc_en, exec2issue_valu_wr_vcc_en,
<          exec2salu_rd_scc_value, exec2simd_rd_scc_value, exec2simf_rd_scc_value,
<          fetch2buff_rd_en, fetch2exec_init_wf_en, fetch2tracemon_dispatch, fetch2wave_basereg_wr,
<          fetch2wave_reserve_valid, issue2fetchwave_wf_done_en, issue2fetchwavedecode_recover_en,
<          issue2lsu_lsu_select, issue2salu_alu_select, issue2simd0_alu_select,
<          issue2simd1_alu_select, issue2simd2_alu_select, issue2simd3_alu_select,
<          issue2simf0_alu_select, issue2simf1_alu_select, issue2simf2_alu_select,
<          issue2simf3_alu_select, issue2tracemon_barrier_retire_en, issue2tracemon_waitcnt_retire_en,
<          lsu2issue_ready, lsu2mem_gm_or_lds, lsu2sgpr_instr_done, lsu2sgpr_source1_rd_en,
<          lsu2sgpr_source2_rd_en, lsu2tracemon_gm_or_lds, lsu2vgpr_instr_done,
<          lsu2vgpr_source1_rd_en, lsu2vgpr_source2_rd_en, mem2cu_page_fault_en,
<          mem2lsu_ack, rfa2simd0_queue_entry_serviced, rfa2simd1_queue_entry_serviced,
<          rfa2simd2_queue_entry_serviced, rfa2simd3_queue_entry_serviced, rfa2simf0_queue_entry_serviced,
<          rfa2simf1_queue_entry_serviced, rfa2simf2_queue_entry_serviced, rfa2simf3_queue_entry_serviced,
<          salu2exec_rd_en, salu2exec_wr_exec_en, salu2exec_wr_m0_en, salu2exec_wr_scc_en,
<          salu2exec_wr_scc_value, salu2exec_wr_vcc_en, salu2fetchwaveissue_branch_en,
<          salu2fetchwaveissue_branch_taken, salu2issue_alu_ready, salu2sgpr_instr_done,
<          salu2sgpr_source1_rd_en, salu2sgpr_source2_rd_en, sgpr2issue_alu_wr_done,
<          sgpr2issue_lsu_instr_done, sgpr2issue_valu_dest_reg_valid, simd0_2exec_rd_en,
<          simd0_2exec_wr_vcc_en, simd0_2issue_alu_ready, simd0_2rfa_queue_entry_valid,
---
>          decode2issue_branch, decode2issue_exec_rd, decode2issue_exec_wr, decode2issue_m0_rd,
>          decode2issue_m0_wr, decode2issue_scc_rd, decode2issue_scc_wr, decode2issue_valid,
>          decode2issue_vcc_rd, decode2issue_vcc_wr, decode2issue_waitcnt, decode2issue_wf_halt,
>          decode2tracemon_colldone, decode2wave_ins_half_rqd, dispatch2cu_wf_dispatch,
>          exec2issue_salu_wr_exec_en, exec2issue_salu_wr_m0_en, exec2issue_salu_wr_scc_en,
>          exec2issue_salu_wr_vcc_en, exec2issue_valu_wr_vcc_en, exec2salu_rd_scc_value,
>          exec2simd_rd_scc_value, exec2simf_rd_scc_value, fetch2buff_rd_en, fetch2exec_init_wf_en,
>          fetch2tracemon_dispatch, fetch2wave_basereg_wr, fetch2wave_reserve_valid,
>          issue2fetchwave_wf_done_en, issue2lsu_lsu_select, issue2salu_alu_select,
>          issue2simd0_alu_select, issue2simd1_alu_select, issue2simd2_alu_select,
>          issue2simd3_alu_select, issue2simf0_alu_select, issue2simf1_alu_select,
>          issue2simf2_alu_select, issue2simf3_alu_select, issue2tracemon_barrier_retire_en,
>          issue2tracemon_waitcnt_retire_en, lsu2issue_ready, lsu2mem_gm_or_lds,
>          lsu2sgpr_instr_done, lsu2sgpr_source1_rd_en, lsu2sgpr_source2_rd_en,
>          lsu2tracemon_gm_or_lds, lsu2vgpr_instr_done, lsu2vgpr_source1_rd_en,
>          lsu2vgpr_source2_rd_en, mem2lsu_ack, rfa2simd0_queue_entry_serviced,
>          rfa2simd1_queue_entry_serviced, rfa2simd2_queue_entry_serviced, rfa2simd3_queue_entry_serviced,
>          rfa2simf0_queue_entry_serviced, rfa2simf1_queue_entry_serviced, rfa2simf2_queue_entry_serviced,
>          rfa2simf3_queue_entry_serviced, salu2exec_rd_en, salu2exec_wr_exec_en,
>          salu2exec_wr_m0_en, salu2exec_wr_scc_en, salu2exec_wr_scc_value, salu2exec_wr_vcc_en,
>          salu2fetchwaveissue_branch_en, salu2fetchwaveissue_branch_taken, salu2issue_alu_ready,
>          salu2sgpr_instr_done, salu2sgpr_source1_rd_en, salu2sgpr_source2_rd_en,
>          sgpr2issue_alu_wr_done, sgpr2issue_lsu_instr_done, sgpr2issue_valu_dest_reg_valid,
>          simd0_2exec_rd_en, simd0_2exec_wr_vcc_en, simd0_2issue_alu_ready, simd0_2rfa_queue_entry_valid,
323,336c320,333
<          issue2fetchwavedecode_recover_wfid, issue2lsu_wfid, issue2tracemon_waitcnt_retire_wfid,
<          lsu2exec_rd_wfid, lsu2sgpr_instr_done_wfid, lsu2vgpr_instr_done_wfid,
<          salu2exec_rd_wfid, salu2exec_wr_wfid, salu2fetchwaveissue_branch_wfid,
<          salu2sgpr_instr_done_wfid, sgpr2issue_alu_wr_done_wfid, sgpr2issue_lsu_instr_done_wfid,
<          simd0_2exec_rd_wfid, simd0_2exec_wr_vcc_wfid, simd0_2vgpr_instr_done_wfid,
<          simd1_2exec_rd_wfid, simd1_2exec_wr_vcc_wfid, simd1_2vgpr_instr_done_wfid,
<          simd2_2exec_rd_wfid, simd2_2exec_wr_vcc_wfid, simd2_2vgpr_instr_done_wfid,
<          simd3_2exec_rd_wfid, simd3_2exec_wr_vcc_wfid, simd3_2vgpr_instr_done_wfid,
<          simf0_2exec_rd_wfid, simf0_2exec_wr_vcc_wfid, simf0_2vgpr_instr_done_wfid,
<          simf1_2exec_rd_wfid, simf1_2exec_wr_vcc_wfid, simf1_2vgpr_instr_done_wfid,
<          simf2_2exec_rd_wfid, simf2_2exec_wr_vcc_wfid, simf2_2vgpr_instr_done_wfid,
<          simf3_2exec_rd_wfid, simf3_2exec_wr_vcc_wfid, simf3_2vgpr_instr_done_wfid,
<          vgpr2issue_alu_wr_done_wfid, vgpr2issue_lsu_wr_done_wfid, wave2decode_wfid;
< wire[6:0] lsu2mem_tag_req, mem2cu_page_fault_tag, mem2lsu_tag_resp;
---
>          issue2lsu_wfid, issue2tracemon_waitcnt_retire_wfid, lsu2exec_rd_wfid,
>          lsu2sgpr_instr_done_wfid, lsu2vgpr_instr_done_wfid, salu2exec_rd_wfid,
>          salu2exec_wr_wfid, salu2fetchwaveissue_branch_wfid, salu2sgpr_instr_done_wfid,
>          sgpr2issue_alu_wr_done_wfid, sgpr2issue_lsu_instr_done_wfid, simd0_2exec_rd_wfid,
>          simd0_2exec_wr_vcc_wfid, simd0_2vgpr_instr_done_wfid, simd1_2exec_rd_wfid,
>          simd1_2exec_wr_vcc_wfid, simd1_2vgpr_instr_done_wfid, simd2_2exec_rd_wfid,
>          simd2_2exec_wr_vcc_wfid, simd2_2vgpr_instr_done_wfid, simd3_2exec_rd_wfid,
>          simd3_2exec_wr_vcc_wfid, simd3_2vgpr_instr_done_wfid, simf0_2exec_rd_wfid,
>          simf0_2exec_wr_vcc_wfid, simf0_2vgpr_instr_done_wfid, simf1_2exec_rd_wfid,
>          simf1_2exec_wr_vcc_wfid, simf1_2vgpr_instr_done_wfid, simf2_2exec_rd_wfid,
>          simf2_2exec_wr_vcc_wfid, simf2_2vgpr_instr_done_wfid, simf3_2exec_rd_wfid,
>          simf3_2exec_wr_vcc_wfid, simf3_2vgpr_instr_done_wfid, vgpr2issue_alu_wr_done_wfid,
>          vgpr2issue_lsu_wr_done_wfid, wave2decode_wfid;
> wire[6:0] lsu2mem_tag_req, mem2lsu_tag_resp;
372,379c369,375
<          issue2fetch_recover_pc, issue2lsu_imm_value1, issue2lsu_instr_pc, issue2lsu_opcode,
<          issue2tracemon_barrier_retire_pc, issue2tracemon_waitcnt_retire_pc,
<          lsu2tracemon_retire_pc, salu2exec_wr_m0_value, salu2fetch_branch_pc_value,
<          salu2tracemon_retire_pc, sgpr2lsu_source2_data, sgpr2simd_rd_data, sgpr2simf_rd_data,
<          simd0_2tracemon_retire_pc, simd1_2tracemon_retire_pc, simd2_2tracemon_retire_pc,
<          simd3_2tracemon_retire_pc, simf0_2tracemon_retire_pc, simf1_2tracemon_retire_pc,
<          simf2_2tracemon_retire_pc, simf3_2tracemon_retire_pc, wave2decode_instr,
<          wave2decode_instr_pc;
---
>          issue2lsu_imm_value1, issue2lsu_instr_pc, issue2lsu_opcode, issue2tracemon_barrier_retire_pc,
>          issue2tracemon_waitcnt_retire_pc, lsu2tracemon_retire_pc, salu2exec_wr_m0_value,
>          salu2fetch_branch_pc_value, salu2tracemon_retire_pc, sgpr2lsu_source2_data,
>          sgpr2simd_rd_data, sgpr2simf_rd_data, simd0_2tracemon_retire_pc, simd1_2tracemon_retire_pc,
>          simd2_2tracemon_retire_pc, simd3_2tracemon_retire_pc, simf0_2tracemon_retire_pc,
>          simf1_2tracemon_retire_pc, simf2_2tracemon_retire_pc, simf3_2tracemon_retire_pc,
>          wave2decode_instr, wave2decode_instr_pc;
422,423d417
<     .issue_recover_en(issue2fetchwavedecode_recover_en),
<     .issue_recover_wfid(issue2fetchwavedecode_recover_wfid),
454,455c448
<     .tracemon_colldone(decode2tracemon_colldone),
<     .issue_idemp_barrier(decode2issue_idemp_barrier)
---
>     .tracemon_colldone(decode2tracemon_colldone)
565,567d557
<     .issue_recover_pc(issue2fetch_recover_pc),
<     .issue_recover_en(issue2fetchwavedecode_recover_en),
<     .issue_recover_wfid(issue2fetchwavedecode_recover_wfid),
662,664d651
<     .mem2cu_page_fault_en(mem2cu_page_fault_en),
<     .mem2cu_page_fault_tag(mem2cu_page_fault_tag),
<     .decode_idemp_barrier(decode2issue_idemp_barrier),
706,709c693
<     .tracemon_waitcnt_retire_pc(issue2tracemon_waitcnt_retire_pc),
<     .fetch_recover_pc(issue2fetch_recover_pc),
<     .fetchwavedecode_recover_en(issue2fetchwavedecode_recover_en),
<     .fetchwavedecode_recover_wfid(issue2fetchwavedecode_recover_wfid)
---
>     .tracemon_waitcnt_retire_pc(issue2tracemon_waitcnt_retire_pc)
1524,1525d1507
<     .issue_recover_en(issue2fetchwavedecode_recover_en),
<     .issue_recover_wfid(issue2fetchwavedecode_recover_wfid),
Only in ../../verilog/rtl/decode: build
diff -r ./decode/decode.interface ../../verilog/rtl/decode/decode.interface
9,10d8
<       issue_recover_en,
<       issue_recover_wfid,
41d38
<       issue_idemp_barrier,
50,51c47,48
< input wave_instr_valid, issue_recover_en;
< input[5:0] wave_wfid, issue_recover_wfid;
---
> input wave_instr_valid;
> input[5:0] wave_wfid;
59,60c56
<          issue_barrier, issue_branch, issue_waitcnt, wave_ins_half_rqd, tracemon_colldone,
<          issue_idemp_barrier;
---
>          issue_barrier, issue_branch, issue_waitcnt, wave_ins_half_rqd, tracemon_colldone;
diff -r ./decode/decode.v ../../verilog/rtl/decode/decode.v
1,408c1,412
< module decode(/*AUTOARG*/
< 	      // Outputs
< 	      issue_wf_halt, issue_valid, issue_vcc_wr, issue_vcc_rd,
< 	      issue_scc_wr, issue_scc_rd, issue_exec_rd, issue_exec_wr,
< 	      issue_m0_rd, issue_m0_wr, issue_barrier, issue_branch,
< 	      issue_waitcnt, wave_ins_half_rqd, tracemon_colldone,
< 	      issue_idemp_barrier, issue_fu, issue_wfid, wave_ins_half_wfid,
< 	      issue_source_reg2, issue_source_reg3, issue_dest_reg2,
< 	      issue_source_reg1, issue_source_reg4, issue_dest_reg1,
< 	      issue_imm_value0, issue_lds_base, issue_opcode, issue_imm_value1,
< 	      issue_instr_pc, tracemon_collinstr,
< 	      // Inputs
< 	      clk, rst, wave_instr_valid, issue_recover_en, wave_wfid,
< 	      issue_recover_wfid, wave_sgpr_base, wave_vgpr_base, wave_lds_base,
< 	      wave_instr_pc, wave_instr
< 	      );
< 
<    input clk;
< 
<    input rst;
< 
<    input wave_instr_valid, issue_recover_en;
<    input [5:0] wave_wfid, issue_recover_wfid;
<    input [8:0] wave_sgpr_base;
<    input [9:0] wave_vgpr_base;
<    input [15:0] wave_lds_base;
<    input [31:0] wave_instr_pc, wave_instr;
< 
<    output 	issue_wf_halt, issue_valid, issue_vcc_wr, issue_vcc_rd, issue_scc_wr,
< 		issue_scc_rd, issue_exec_rd, issue_exec_wr, issue_m0_rd, issue_m0_wr,
< 		issue_barrier, issue_branch, issue_waitcnt, wave_ins_half_rqd, tracemon_colldone,
< 		issue_idemp_barrier;
<    output [1:0] issue_fu;
<    output [5:0] issue_wfid, wave_ins_half_wfid;
<    output [12:0] issue_source_reg2, issue_source_reg3, issue_dest_reg2;
<    output [13:0] issue_source_reg1, issue_source_reg4, issue_dest_reg1;
<    output [15:0] issue_imm_value0, issue_lds_base;
<    output [31:0] issue_opcode, issue_imm_value1, issue_instr_pc;
<    output [63:0] tracemon_collinstr;
< 
<    ///////////////////////////////
< 		 //Your code goes here - beware: script does not recognize changes
<    // into files. It ovewrites everithing without mercy. Save your work before running the script
<    ///////////////////////////////
< 
<    wire [31:0] 	 flopped_instr_pc;
<    wire 	 flopped_instr_valid;
<    wire [31:0] 	 flopped_instr;
<    wire [5:0] 	 flopped_wfid;
<    wire [9:0] 	 flopped_vgpr_base;
<    wire [8:0] 	 flopped_sgpr_base;
<    wire [15:0] 	 flopped_lds_base;
<    wire 	 flopped_issue_recover_en;
<    wire [5:0]  flopped_issue_recover_wfid;
< 
<    //////////////////////////////
<    wire [63:0] 	 collated_instr;
<    wire 	 collate_required;
<    wire 	 collate_done;
< 
<    wire [9:0] 	 s1_field;
<    wire [9:0] 	 s2_field;
<    wire [9:0] 	 s3_field;
<    wire [9:0] 	 s4_field;
<    wire [9:0] 	 dest1_field;
<    wire [9:0] 	 dest2_field;
<    wire [9:0] 	 dest1_field_converted;
<    wire [9:0] 	 s4_field_converted;
<    wire [9:0] 	 s1_field_converted;
< 
<    wire [1:0] 	 raw_fu;
< 
<    wire 	 implicit_scc_write;
<    wire 	 implicit_scc_read;
<    wire 	 implicit_vcc_write;
<    wire 	 implicit_vcc_read;
<    wire 	 implicit_exec_write;
<    wire 	 implicit_exec_read;
<    wire 	 implicit_M0_write;
<    wire 	 implicit_M0_read;
< 
<    wire [2:0] 	 s1_width;
<    wire [2:0] 	 s2_width;
<    wire [2:0] 	 s3_width;
<    wire [2:0] 	 s4_width;
<    wire [2:0] 	 dest1_width;
<    wire [2:0] 	 dest2_width;
<    wire 	 fp_instr;
<    wire 	 copy_d1_to_s4;
<    wire 	 copy_d1_to_s1;
<    wire 	 d1_vdst_to_sdst;
< 
<    wire [11:0] 	 encoded_s1_reg;
<    wire [11:0] 	 encoded_s2_reg;
<    wire [11:0] 	 encoded_s3_reg;
<    wire [11:0] 	 encoded_s4_reg;
<    wire [11:0] 	 encoded_dest1_reg;
<    wire [11:0] 	 encoded_dest2_reg;
< 
<    assign issue_lds_base = flopped_lds_base;
<    assign issue_wfid = flopped_wfid;
< 
<    wire 	 s1_literal_req;
<    wire 	 s2_literal_req;
<    wire 	 s3_literal_req;
<    wire 	 s4_literal_req;
<    //Following two wires are dummies
<    wire 	 dest1_literal_req;
<    wire 	 dest2_literal_req;
< 
<    wire 	 s1_explicit_vcc;
<    wire 	 s2_explicit_vcc;
<    wire 	 s3_explicit_vcc;
<    wire 	 s4_explicit_vcc;
<    wire 	 dest1_explicit_vcc;
<    wire 	 dest2_explicit_vcc;
< 
<    wire 	 s1_explicit_exec;
<    wire 	 s2_explicit_exec;
<    wire 	 s3_explicit_exec;
<    wire 	 s4_explicit_exec;
<    wire 	 dest1_explicit_exec;
<    wire 	 dest2_explicit_exec;
< 
<    wire 	 s1_explicit_scc;
<    wire 	 s2_explicit_scc;
<    wire 	 s3_explicit_scc;
<    wire 	 s4_explicit_scc;
<    wire 	 dest1_explicit_scc;
<    wire 	 dest2_explicit_scc;
< 
<    wire 	 s1_explicit_M0;
<    wire 	 s2_explicit_M0;
<    wire 	 s3_explicit_M0;
<    wire 	 s4_explicit_M0;
<    wire 	 dest1_explicit_M0;
<    wire 	 dest2_explicit_M0;
< 
<    wire 	 long_instr_or_literal_required;
<    wire [31:0] 	 imm1_frominstr_fromliteral;
<    reg [31:0] 	 issue_imm_value1;
< 
<    wire [32:0] 	 s1_fp_constant;
<    wire [32:0] 	 s2_fp_constant;
<    wire [32:0] 	 s3_fp_constant;
<    wire [32:0] 	 s4_fp_constant;
<    wire [32:0] 	 dest1_fp_constant;
<    wire [32:0] 	 dest2_fp_constant;
< 
<    wire 	 width_qualified_s1_valid;
<    wire 	 width_qualified_s2_valid;
<    wire 	 width_qualified_s3_valid;
<    wire 	 width_qualified_s4_valid;
<    wire 	 width_qualified_dest1_valid;
<    wire 	 width_qualified_dest2_valid;
< 
< 
<    // implement flush on decode
<    PS_flops_wavepool_decode stage_flops 
<      (
<       .wave_instr_pc(wave_instr_pc),
<       .wave_instr_valid(wave_instr_valid),
<       .wave_instr(wave_instr),
<       .wave_wfid(wave_wfid),
<       .wave_vgpr_base(wave_vgpr_base),
<       .wave_sgpr_base(wave_sgpr_base),
<       .wave_lds_base(wave_lds_base),
<       .issue_recover_en(issue_recover_en),
<       .issue_recover_wfid(issue_recover_wfid),
<       .flopped_instr_pc(flopped_instr_pc),
<       .flopped_instr_valid(flopped_instr_valid),
<       .flopped_instr(flopped_instr),
<       .flopped_wfid(flopped_wfid),
<       .flopped_vgpr_base(flopped_vgpr_base),
<       .flopped_sgpr_base(flopped_sgpr_base),
<       .flopped_lds_base(flopped_lds_base),
<       .flopped_issue_recover_en(flopped_issue_recover_en),
<       .flopped_issue_recover_wfid(flopped_issue_recover_wfid),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    assign long_instr_or_literal_required 
<      = collate_required | ((~collate_done) & (s1_literal_req|s2_literal_req|s3_literal_req|s4_literal_req));
< 
<    instr_collate collater
<      (
<       .in_wfid(flopped_wfid),
<       .in_instr(flopped_instr),
<       .in_valid(flopped_instr_valid),
<       .in_pc(flopped_instr_pc),
<       .flush_valid(flopped_issue_recover_en), 
<       .flush_wfid(flopped_issue_recover_wfid),
<       .out_instr(collated_instr),
<       .out_valid(issue_valid),
<       .out_pc(issue_instr_pc),
<       .in_long(long_instr_or_literal_required),
<       .out_long(collate_done),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    decode_core core
<      (
<       .collated_instr(collated_instr),
<       .collate_done(collate_done),
<       .collate_required(collate_required),
<       .fu(raw_fu),
<       .opcode(issue_opcode),
<       .imm_value0(issue_imm_value0),
<       .imm_value1(imm1_frominstr_fromliteral),
<       .s1_field(s1_field),
<       .s2_field(s2_field),
<       .s3_field(s3_field),
<       .s4_field(s4_field),
<       .dest1_field(dest1_field),
<       .dest2_field(dest2_field)
<       );
< 
<    flag_generator flaggen
<      (
<       .opcode(issue_opcode),
<       .fu(raw_fu),
<       .wf_halt(issue_wf_halt),
<       .wf_barrier(issue_barrier),
<       .wf_branch(issue_branch),
<       .wf_waitcnt(issue_waitcnt),
<       .wf_idemp_barrier(issue_idemp_barrier),
<       .scc_write(implicit_scc_write),
<       .scc_read(implicit_scc_read),
<       .vcc_write(implicit_vcc_write),
<       .vcc_read(implicit_vcc_read),
<       .exec_write(implicit_exec_write),
<       .exec_read(implicit_exec_read),
<       .M0_write(implicit_M0_write),
<       .M0_read(implicit_M0_read),
<       .s1_width(s1_width),
<       .s2_width(s2_width),
<       .s3_width(s3_width),
<       .s4_width(s4_width),
<       .dest1_width(dest1_width),
<       .dest2_width(dest2_width),
<       .fp_instr(fp_instr),
<       .copy_d1_to_s4(copy_d1_to_s4),
<       .copy_d1_to_s1(copy_d1_to_s1),
<       .d1_vdst_to_sdst(d1_vdst_to_sdst)
<       );
<    reg_field_encoder s1_encoder 
<      (
<       .in(s1_field_converted),
<       .sgpr_base(flopped_sgpr_base),
<       .vgpr_base(flopped_vgpr_base),
<       .out(encoded_s1_reg),
<       .literal_required(s1_literal_req),
<       .explicit_vcc(s1_explicit_vcc),
<       .explicit_exec(s1_explicit_exec),
<       .explicit_scc(s1_explicit_scc),
<       .explicit_M0(s1_explicit_M0),
<       .fp_constant(s1_fp_constant)
<       );
<    reg_field_encoder s2_encoder 
<      (
<       .in(s2_field),
<       .sgpr_base(flopped_sgpr_base),
<       .vgpr_base(flopped_vgpr_base),
<       .out(encoded_s2_reg),
<       .literal_required(s2_literal_req),
<       .explicit_vcc(s2_explicit_vcc),
<       .explicit_exec(s2_explicit_exec),
<       .explicit_scc(s2_explicit_scc),
<       .explicit_M0(s2_explicit_M0),
<       .fp_constant(s2_fp_constant)
<       );
<    reg_field_encoder s3_encoder 
<      (
<       .in(s3_field),
<       .sgpr_base(flopped_sgpr_base),
<       .vgpr_base(flopped_vgpr_base),
<       .out(encoded_s3_reg),
<       .literal_required(s3_literal_req),
<       .explicit_vcc(s3_explicit_vcc),
<       .explicit_exec(s3_explicit_exec),
<       .explicit_scc(s3_explicit_scc),
<       .explicit_M0(s3_explicit_M0),
<       .fp_constant(s3_fp_constant)
<       );
<    reg_field_encoder s4_encoder 
<      (
<       .in(s4_field_converted),
<       .sgpr_base(flopped_sgpr_base),
<       .vgpr_base(flopped_vgpr_base),
<       .out(encoded_s4_reg),
<       .literal_required(s4_literal_req),
<       .explicit_vcc(s4_explicit_vcc),
<       .explicit_exec(s4_explicit_exec),
<       .explicit_scc(s4_explicit_scc),
<       .explicit_M0(s4_explicit_M0),
<       .fp_constant(s4_fp_constant)
<       );
<    reg_field_encoder dest1_encoder 
<      (
<       .in(dest1_field_converted),
<       .sgpr_base(flopped_sgpr_base),
<       .vgpr_base(flopped_vgpr_base),
<       .out(encoded_dest1_reg),
<       .literal_required(dest1_literal_req),
<       .explicit_vcc(dest1_explicit_vcc),
<       .explicit_exec(dest1_explicit_exec),
<       .explicit_scc(dest1_explicit_scc),
<       .explicit_M0(dest1_explicit_M0),
<       .fp_constant(dest1_fp_constant)
<       );
<    reg_field_encoder dest2_encoder 
<      (
<       .in(dest2_field),
<       .sgpr_base(flopped_sgpr_base),
<       .vgpr_base(flopped_vgpr_base),
<       .out(encoded_dest2_reg),
<       .literal_required(dest2_literal_req),
<       .explicit_vcc(dest2_explicit_vcc),
<       .explicit_exec(dest2_explicit_exec),
<       .explicit_scc(dest2_explicit_scc),
<       .explicit_M0(dest2_explicit_M0),
<       .fp_constant(dest2_fp_constant)
<       );
< 
<    assign issue_vcc_wr = implicit_vcc_write | dest1_explicit_vcc | dest2_explicit_vcc;
<    assign issue_vcc_rd = implicit_vcc_read | s1_explicit_vcc | s2_explicit_vcc | s3_explicit_vcc | s4_explicit_vcc;
<    assign issue_scc_wr = implicit_scc_write | dest1_explicit_scc | dest2_explicit_scc;
<    assign issue_scc_rd = implicit_scc_read | s1_explicit_scc | s2_explicit_scc | s3_explicit_scc | s4_explicit_scc;
<    assign issue_exec_wr = implicit_exec_write | dest1_explicit_exec | dest2_explicit_exec;
<    assign issue_exec_rd = implicit_exec_read | s1_explicit_exec | s2_explicit_exec | s3_explicit_exec | s4_explicit_exec;
<    assign issue_m0_wr = implicit_M0_write | dest1_explicit_M0 | dest2_explicit_M0;
<    assign issue_m0_rd = implicit_M0_read | s1_explicit_M0 | s2_explicit_M0 | s3_explicit_M0 | s4_explicit_M0;
< 
<    assign dest1_field_converted = d1_vdst_to_sdst ? {dest1_field[9],2'b0,dest1_field[6:0]} : dest1_field;
<    assign s4_field_converted = copy_d1_to_s4 ? dest1_field : s4_field;
<    assign s1_field_converted = copy_d1_to_s1 ? dest1_field : s1_field;
<    assign issue_fu = fp_instr ? 2'b0 : raw_fu;
< 
<    assign width_qualified_s1_valid = (s1_width == `DECODE_BIT0) ? 1'b0 : encoded_s1_reg[11];
<    assign width_qualified_s2_valid = (s2_width == `DECODE_BIT0) ? 1'b0 : encoded_s2_reg[11];
<    assign width_qualified_s3_valid = (s3_width == `DECODE_BIT0) ? 1'b0 : encoded_s3_reg[11];
<    assign width_qualified_s4_valid = (s4_width == `DECODE_BIT0) ? 1'b0 : encoded_s4_reg[11];
<    assign width_qualified_dest1_valid = (dest1_width == `DECODE_BIT0) ? 1'b0 : encoded_dest1_reg[11];
<    assign width_qualified_dest2_valid = (dest2_width == `DECODE_BIT0) ? 1'b0 : encoded_dest2_reg[11];
< 
<    assign issue_source_reg1 = {s1_width[1:0],width_qualified_s1_valid,encoded_s1_reg[10:0]};
<    assign issue_source_reg2 = {s2_width[0],width_qualified_s2_valid,encoded_s2_reg[10:0]};
<    assign issue_source_reg3 = {s3_width[0],width_qualified_s3_valid,encoded_s3_reg[10:0]};
<    assign issue_source_reg4 = {s4_width[1:0],width_qualified_s4_valid,encoded_s4_reg[10:0]};
<    assign issue_dest_reg1 = {dest1_width[1:0],width_qualified_dest1_valid,encoded_dest1_reg[10:0]};
<    assign issue_dest_reg2 = {dest2_width[0],width_qualified_dest2_valid,encoded_dest2_reg[10:0]};
< 
<    //wire [2:0] qualified_width_s1;
<    //wire [2:0] qualified_width_s2;
<    //wire [2:0] qualified_width_s3;
<    //wire [2:0] qualified_width_s4;
<    //wire [2:0] qualified_width_dest1;
<    //wire [2:0] qualified_width_dest2;
<    //assign qualified_width_s1 = width_qualified_s1_valid ? s1_width : 3'b000;
<    //assign qualified_width_s2 = width_qualified_s2_valid ? s2_width : 3'b000;
<    //assign qualified_width_s3 = width_qualified_s3_valid ? s3_width : 3'b000;
<    //assign qualified_width_s4 = width_qualified_s4_valid ? s4_width : 3'b000;
<    //assign qualified_width_dest1 = width_qualified_dest1_valid ? dest1_width : 3'b000;
<    //assign qualified_width_dest2 = width_qualified_dest2_valid ? dest2_width : 3'b000;
<    //assign issue_source_reg1 = {qualified_width_s1[1:0],width_qualified_s1_valid,encoded_s1_reg[10:0]};
<    //assign issue_source_reg2 = {qualified_width_s2[0],width_qualified_s2_valid,encoded_s2_reg[10:0]};
<    //assign issue_source_reg3 = {qualified_width_s3[0],width_qualified_s3_valid,encoded_s3_reg[10:0]};
<    //assign issue_source_reg4 = {qualified_width_s4[1:0],width_qualified_s4_valid,encoded_s4_reg[10:0]};
<    //assign issue_dest_reg1 = {qualified_width_dest1[1:0],width_qualified_dest1_valid,encoded_dest1_reg[10:0]};
<    //assign issue_dest_reg2 = {qualified_width_dest2[0],width_qualified_dest2_valid,encoded_dest2_reg[10:0]};
< 
<    assign wave_ins_half_wfid = flopped_wfid;
<    assign wave_ins_half_rqd = long_instr_or_literal_required & flopped_instr_valid;
< 
<    assign tracemon_collinstr =  collated_instr;
<    assign tracemon_colldone = collate_done;
< 
<    always @(s1_fp_constant or s2_fp_constant or s3_fp_constant or s4_fp_constant or imm1_frominstr_fromliteral)
<      begin
< 	casex({s1_fp_constant,s2_fp_constant,s3_fp_constant,s4_fp_constant})
< 	  4'b0000:
< 	    begin
<                issue_imm_value1 <= imm1_frominstr_fromliteral;
< 	    end
< 	  4'b0001:
< 	    begin
<                issue_imm_value1 <= s4_fp_constant[31:0];
< 	    end
< 	  4'b0010:
< 	    begin
<                issue_imm_value1 <= s3_fp_constant[31:0];
< 	    end
< 	  4'b0100:
< 	    begin
<                issue_imm_value1 <= s2_fp_constant[31:0];
< 	    end
< 	  4'b1000:
< 	    begin
<                issue_imm_value1 <= s1_fp_constant[31:0];
< 	    end
< 	  default:
< 	    begin
<                issue_imm_value1 <= {32{1'bx}};
< 	    end
< 	endcase
<      end
---
> module decode( 
>       wave_instr_pc,
>       wave_instr_valid,
>       wave_instr,
>       wave_wfid,
>       wave_vgpr_base,
>       wave_sgpr_base,
>       wave_lds_base,
>       issue_wf_halt,
>       issue_fu,
>       issue_wfid,
>       issue_opcode,
>       issue_source_reg1,
>       issue_source_reg2,
>       issue_source_reg3,
>       issue_source_reg4,
>       issue_dest_reg1,
>       issue_dest_reg2,
>       issue_imm_value0,
>       issue_imm_value1,
>       issue_valid,
>       issue_instr_pc,
>       issue_vcc_wr,
>       issue_vcc_rd,
>       issue_scc_wr,
>       issue_scc_rd,
>       issue_exec_rd,
>       issue_exec_wr,
>       issue_m0_rd,
>       issue_m0_wr,
>       issue_barrier,
>       issue_branch,
>       issue_lds_base,
>       issue_waitcnt,
>       wave_ins_half_rqd,
>       wave_ins_half_wfid,
>       tracemon_collinstr,
>       tracemon_colldone,
>       clk,
>       rst
>  );
> 
> input clk;
> 
> input rst;
> 
> input wave_instr_valid;
> input[5:0] wave_wfid;
> input[8:0] wave_sgpr_base;
> input[9:0] wave_vgpr_base;
> input[15:0] wave_lds_base;
> input[31:0] wave_instr_pc, wave_instr;
> 
> output issue_wf_halt, issue_valid, issue_vcc_wr, issue_vcc_rd, issue_scc_wr,
>          issue_scc_rd, issue_exec_rd, issue_exec_wr, issue_m0_rd, issue_m0_wr,
>          issue_barrier, issue_branch, issue_waitcnt, wave_ins_half_rqd, tracemon_colldone;
> output[1:0] issue_fu;
> output[5:0] issue_wfid, wave_ins_half_wfid;
> output[15:0] issue_lds_base;
> output[12:0] issue_source_reg2, issue_source_reg3, issue_dest_reg2;
> output[13:0] issue_source_reg1, issue_source_reg4, issue_dest_reg1;
> output[15:0] issue_imm_value0;
> output[31:0] issue_opcode, issue_imm_value1, issue_instr_pc;
> output[63:0] tracemon_collinstr;
> 
> ///////////////////////////////
> //Your code goes here - beware: script does not recognize changes
> // into files. It ovewrites everithing without mercy. Save your work before running the script
> ///////////////////////////////
> 
> 
> wire [31:0] flopped_instr_pc;
> wire flopped_instr_valid;
> wire [31:0] flopped_instr;
> wire [5:0] flopped_wfid;
> wire [9:0] flopped_vgpr_base;
> wire [8:0] flopped_sgpr_base;
> wire [15:0] flopped_lds_base;
> 
> //////////////////////////////
> wire [63:0] collated_instr;
> wire collate_required;
> wire collate_done;
> 
> wire [9:0] s1_field;
> wire [9:0] s2_field;
> wire [9:0] s3_field;
> wire [9:0] s4_field;
> wire [9:0] dest1_field;
> wire [9:0] dest2_field;
> wire [9:0] dest1_field_converted;
> wire [9:0] s4_field_converted;
> wire [9:0] s1_field_converted;
> 
> wire [1:0] raw_fu;
> 
> wire implicit_scc_write;
> wire implicit_scc_read;
> wire implicit_vcc_write;
> wire implicit_vcc_read;
> wire implicit_exec_write;
> wire implicit_exec_read;
> wire implicit_M0_write;
> wire implicit_M0_read;
> 
> wire [2:0] s1_width;
> wire [2:0] s2_width;
> wire [2:0] s3_width;
> wire [2:0] s4_width;
> wire [2:0] dest1_width;
> wire [2:0] dest2_width;
> wire fp_instr;
> wire copy_d1_to_s4;
> wire copy_d1_to_s1;
> wire d1_vdst_to_sdst;
> 
> wire [11:0] encoded_s1_reg;
> wire [11:0] encoded_s2_reg;
> wire [11:0] encoded_s3_reg;
> wire [11:0] encoded_s4_reg;
> wire [11:0] encoded_dest1_reg;
> wire [11:0] encoded_dest2_reg;
> 
> assign issue_lds_base = flopped_lds_base;
> assign issue_wfid = flopped_wfid;
> 
> wire s1_literal_req;
> wire s2_literal_req;
> wire s3_literal_req;
> wire s4_literal_req;
> //Following two wires are dummies
> wire dest1_literal_req;
> wire dest2_literal_req;
> 
> wire s1_explicit_vcc;
> wire s2_explicit_vcc;
> wire s3_explicit_vcc;
> wire s4_explicit_vcc;
> wire dest1_explicit_vcc;
> wire dest2_explicit_vcc;
> 
> wire s1_explicit_exec;
> wire s2_explicit_exec;
> wire s3_explicit_exec;
> wire s4_explicit_exec;
> wire dest1_explicit_exec;
> wire dest2_explicit_exec;
> 
> wire s1_explicit_scc;
> wire s2_explicit_scc;
> wire s3_explicit_scc;
> wire s4_explicit_scc;
> wire dest1_explicit_scc;
> wire dest2_explicit_scc;
> 
> wire s1_explicit_M0;
> wire s2_explicit_M0;
> wire s3_explicit_M0;
> wire s4_explicit_M0;
> wire dest1_explicit_M0;
> wire dest2_explicit_M0;
> 
> wire long_instr_or_literal_required;
> wire [31:0] imm1_frominstr_fromliteral;
> reg [31:0] issue_imm_value1;
> 
> wire [32:0] s1_fp_constant;
> wire [32:0] s2_fp_constant;
> wire [32:0] s3_fp_constant;
> wire [32:0] s4_fp_constant;
> wire [32:0] dest1_fp_constant;
> wire [32:0] dest2_fp_constant;
> 
> wire width_qualified_s1_valid;
> wire width_qualified_s2_valid;
> wire width_qualified_s3_valid;
> wire width_qualified_s4_valid;
> wire width_qualified_dest1_valid;
> wire width_qualified_dest2_valid;
> 
> PS_flops_wavepool_decode stage_flops (
>   .wave_instr_pc(wave_instr_pc),
>   .wave_instr_valid(wave_instr_valid),
>   .wave_instr(wave_instr),
>   .wave_wfid(wave_wfid),
>   .wave_vgpr_base(wave_vgpr_base),
>   .wave_sgpr_base(wave_sgpr_base),
>   .wave_lds_base(wave_lds_base),
>   .flopped_instr_pc(flopped_instr_pc),
>   .flopped_instr_valid(flopped_instr_valid),
>   .flopped_instr(flopped_instr),
>   .flopped_wfid(flopped_wfid),
>   .flopped_vgpr_base(flopped_vgpr_base),
>   .flopped_sgpr_base(flopped_sgpr_base),
>   .flopped_lds_base(flopped_lds_base),
>   .clk(clk),
>   .rst(rst)
> );
> 
> assign long_instr_or_literal_required = collate_required | ((~collate_done) & (s1_literal_req|s2_literal_req|s3_literal_req|s4_literal_req));
> 
> instr_collate collater(
>   .in_wfid(flopped_wfid),
>   .in_instr(flopped_instr),
>   .in_valid(flopped_instr_valid),
>   .in_pc(flopped_instr_pc),
>   .out_instr(collated_instr),
>   .out_valid(issue_valid),
>   .out_pc(issue_instr_pc),
>   .in_long(long_instr_or_literal_required),
>   .out_long(collate_done),
>   .clk(clk),
>   .rst(rst)
> );
> 
> decode_core core(
>   .collated_instr(collated_instr),
>   .collate_done(collate_done),
>   .collate_required(collate_required),
>   .fu(raw_fu),
>   .opcode(issue_opcode),
>   .imm_value0(issue_imm_value0),
>   .imm_value1(imm1_frominstr_fromliteral),
>   .s1_field(s1_field),
>   .s2_field(s2_field),
>   .s3_field(s3_field),
>   .s4_field(s4_field),
>   .dest1_field(dest1_field),
>   .dest2_field(dest2_field)
> );
> 
> flag_generator flaggen(
>   .opcode(issue_opcode),
>   .fu(raw_fu),
>   .wf_halt(issue_wf_halt),
>   .wf_barrier(issue_barrier),
>   .wf_branch(issue_branch),
>   .wf_waitcnt(issue_waitcnt),
>   .scc_write(implicit_scc_write),
>   .scc_read(implicit_scc_read),
>   .vcc_write(implicit_vcc_write),
>   .vcc_read(implicit_vcc_read),
>   .exec_write(implicit_exec_write),
>   .exec_read(implicit_exec_read),
>   .M0_write(implicit_M0_write),
>   .M0_read(implicit_M0_read),
>   .s1_width(s1_width),
>   .s2_width(s2_width),
>   .s3_width(s3_width),
>   .s4_width(s4_width),
>   .dest1_width(dest1_width),
>   .dest2_width(dest2_width),
>   .fp_instr(fp_instr),
>   .copy_d1_to_s4(copy_d1_to_s4),
>   .copy_d1_to_s1(copy_d1_to_s1),
>   .d1_vdst_to_sdst(d1_vdst_to_sdst)
> );
> reg_field_encoder s1_encoder (
>   .in(s1_field_converted),
>   .sgpr_base(flopped_sgpr_base),
>   .vgpr_base(flopped_vgpr_base),
>   .out(encoded_s1_reg),
>   .literal_required(s1_literal_req),
>   .explicit_vcc(s1_explicit_vcc),
>   .explicit_exec(s1_explicit_exec),
>   .explicit_scc(s1_explicit_scc),
>   .explicit_M0(s1_explicit_M0),
>   .fp_constant(s1_fp_constant)
> );
> reg_field_encoder s2_encoder (
>   .in(s2_field),
>   .sgpr_base(flopped_sgpr_base),
>   .vgpr_base(flopped_vgpr_base),
>   .out(encoded_s2_reg),
>   .literal_required(s2_literal_req),
>   .explicit_vcc(s2_explicit_vcc),
>   .explicit_exec(s2_explicit_exec),
>   .explicit_scc(s2_explicit_scc),
>   .explicit_M0(s2_explicit_M0),
>   .fp_constant(s2_fp_constant)
> );
> reg_field_encoder s3_encoder (
>   .in(s3_field),
>   .sgpr_base(flopped_sgpr_base),
>   .vgpr_base(flopped_vgpr_base),
>   .out(encoded_s3_reg),
>   .literal_required(s3_literal_req),
>   .explicit_vcc(s3_explicit_vcc),
>   .explicit_exec(s3_explicit_exec),
>   .explicit_scc(s3_explicit_scc),
>   .explicit_M0(s3_explicit_M0),
>   .fp_constant(s3_fp_constant)
> );
> reg_field_encoder s4_encoder (
>   .in(s4_field_converted),
>   .sgpr_base(flopped_sgpr_base),
>   .vgpr_base(flopped_vgpr_base),
>   .out(encoded_s4_reg),
>   .literal_required(s4_literal_req),
>   .explicit_vcc(s4_explicit_vcc),
>   .explicit_exec(s4_explicit_exec),
>   .explicit_scc(s4_explicit_scc),
>   .explicit_M0(s4_explicit_M0),
>   .fp_constant(s4_fp_constant)
> );
> reg_field_encoder dest1_encoder (
>   .in(dest1_field_converted),
>   .sgpr_base(flopped_sgpr_base),
>   .vgpr_base(flopped_vgpr_base),
>   .out(encoded_dest1_reg),
>   .literal_required(dest1_literal_req),
>   .explicit_vcc(dest1_explicit_vcc),
>   .explicit_exec(dest1_explicit_exec),
>   .explicit_scc(dest1_explicit_scc),
>   .explicit_M0(dest1_explicit_M0),
>   .fp_constant(dest1_fp_constant)
> );
> reg_field_encoder dest2_encoder (
>   .in(dest2_field),
>   .sgpr_base(flopped_sgpr_base),
>   .vgpr_base(flopped_vgpr_base),
>   .out(encoded_dest2_reg),
>   .literal_required(dest2_literal_req),
>   .explicit_vcc(dest2_explicit_vcc),
>   .explicit_exec(dest2_explicit_exec),
>   .explicit_scc(dest2_explicit_scc),
>   .explicit_M0(dest2_explicit_M0),
>   .fp_constant(dest2_fp_constant)
> );
> 
> assign issue_vcc_wr = implicit_vcc_write | dest1_explicit_vcc | dest2_explicit_vcc;
> assign issue_vcc_rd = implicit_vcc_read | s1_explicit_vcc | s2_explicit_vcc | s3_explicit_vcc | s4_explicit_vcc;
> assign issue_scc_wr = implicit_scc_write | dest1_explicit_scc | dest2_explicit_scc;
> assign issue_scc_rd = implicit_scc_read | s1_explicit_scc | s2_explicit_scc | s3_explicit_scc | s4_explicit_scc;
> assign issue_exec_wr = implicit_exec_write | dest1_explicit_exec | dest2_explicit_exec;
> assign issue_exec_rd = implicit_exec_read | s1_explicit_exec | s2_explicit_exec | s3_explicit_exec | s4_explicit_exec;
> assign issue_m0_wr = implicit_M0_write | dest1_explicit_M0 | dest2_explicit_M0;
> assign issue_m0_rd = implicit_M0_read | s1_explicit_M0 | s2_explicit_M0 | s3_explicit_M0 | s4_explicit_M0;
> 
> assign dest1_field_converted = d1_vdst_to_sdst ? {dest1_field[9],2'b0,dest1_field[6:0]} : dest1_field;
> assign s4_field_converted = copy_d1_to_s4 ? dest1_field : s4_field;
> assign s1_field_converted = copy_d1_to_s1 ? dest1_field : s1_field;
> assign issue_fu = fp_instr ? 2'b0 : raw_fu;
> 
> assign width_qualified_s1_valid = (s1_width == `DECODE_BIT0) ? 1'b0 : encoded_s1_reg[11];
> assign width_qualified_s2_valid = (s2_width == `DECODE_BIT0) ? 1'b0 : encoded_s2_reg[11];
> assign width_qualified_s3_valid = (s3_width == `DECODE_BIT0) ? 1'b0 : encoded_s3_reg[11];
> assign width_qualified_s4_valid = (s4_width == `DECODE_BIT0) ? 1'b0 : encoded_s4_reg[11];
> assign width_qualified_dest1_valid = (dest1_width == `DECODE_BIT0) ? 1'b0 : encoded_dest1_reg[11];
> assign width_qualified_dest2_valid = (dest2_width == `DECODE_BIT0) ? 1'b0 : encoded_dest2_reg[11];
> 
> assign issue_source_reg1 = {s1_width[1:0],width_qualified_s1_valid,encoded_s1_reg[10:0]};
> assign issue_source_reg2 = {s2_width[0],width_qualified_s2_valid,encoded_s2_reg[10:0]};
> assign issue_source_reg3 = {s3_width[0],width_qualified_s3_valid,encoded_s3_reg[10:0]};
> assign issue_source_reg4 = {s4_width[1:0],width_qualified_s4_valid,encoded_s4_reg[10:0]};
> assign issue_dest_reg1 = {dest1_width[1:0],width_qualified_dest1_valid,encoded_dest1_reg[10:0]};
> assign issue_dest_reg2 = {dest2_width[0],width_qualified_dest2_valid,encoded_dest2_reg[10:0]};
> 
> //wire [2:0] qualified_width_s1;
> //wire [2:0] qualified_width_s2;
> //wire [2:0] qualified_width_s3;
> //wire [2:0] qualified_width_s4;
> //wire [2:0] qualified_width_dest1;
> //wire [2:0] qualified_width_dest2;
> //assign qualified_width_s1 = width_qualified_s1_valid ? s1_width : 3'b000;
> //assign qualified_width_s2 = width_qualified_s2_valid ? s2_width : 3'b000;
> //assign qualified_width_s3 = width_qualified_s3_valid ? s3_width : 3'b000;
> //assign qualified_width_s4 = width_qualified_s4_valid ? s4_width : 3'b000;
> //assign qualified_width_dest1 = width_qualified_dest1_valid ? dest1_width : 3'b000;
> //assign qualified_width_dest2 = width_qualified_dest2_valid ? dest2_width : 3'b000;
> //assign issue_source_reg1 = {qualified_width_s1[1:0],width_qualified_s1_valid,encoded_s1_reg[10:0]};
> //assign issue_source_reg2 = {qualified_width_s2[0],width_qualified_s2_valid,encoded_s2_reg[10:0]};
> //assign issue_source_reg3 = {qualified_width_s3[0],width_qualified_s3_valid,encoded_s3_reg[10:0]};
> //assign issue_source_reg4 = {qualified_width_s4[1:0],width_qualified_s4_valid,encoded_s4_reg[10:0]};
> //assign issue_dest_reg1 = {qualified_width_dest1[1:0],width_qualified_dest1_valid,encoded_dest1_reg[10:0]};
> //assign issue_dest_reg2 = {qualified_width_dest2[0],width_qualified_dest2_valid,encoded_dest2_reg[10:0]};
> 
> assign wave_ins_half_wfid = flopped_wfid;
> assign wave_ins_half_rqd = long_instr_or_literal_required & flopped_instr_valid;
> 
> assign tracemon_collinstr =  collated_instr;
> assign tracemon_colldone = collate_done;
> 
> always @(s1_fp_constant or s2_fp_constant or s3_fp_constant or s4_fp_constant or imm1_frominstr_fromliteral)
> begin
>   casex({s1_fp_constant,s2_fp_constant,s3_fp_constant,s4_fp_constant})
>     4'b0000:
>       begin
>         issue_imm_value1 <= imm1_frominstr_fromliteral;
>       end
>     4'b0001:
>       begin
>         issue_imm_value1 <= s4_fp_constant[31:0];
>       end
>     4'b0010:
>       begin
>         issue_imm_value1 <= s3_fp_constant[31:0];
>       end
>     4'b0100:
>       begin
>         issue_imm_value1 <= s2_fp_constant[31:0];
>       end
>     4'b1000:
>       begin
>         issue_imm_value1 <= s1_fp_constant[31:0];
>       end
>     default:
>       begin
>         issue_imm_value1 <= {32{1'bx}};
>       end
>   endcase
> end
diff -r ./decode/flag_generator.v ../../verilog/rtl/decode/flag_generator.v
1,10c1,26
< module flag_generator(/*AUTOARG*/
<    // Outputs
<    wf_halt, wf_barrier, wf_branch, wf_waitcnt, wf_idemp_barrier,
<    scc_write, scc_read, vcc_write, vcc_read, exec_write, exec_read,
<    M0_write, M0_read, s1_width, s2_width, s3_width, s4_width,
<    dest1_width, dest2_width, fp_instr, copy_d1_to_s4, copy_d1_to_s1,
<    d1_vdst_to_sdst,
<    // Inputs
<    opcode, fu
<    );
---
> module flag_generator(
>  opcode,
>  fu,
>  wf_halt,
>  wf_barrier,
>  wf_branch,
>  wf_waitcnt,
>  scc_write,
>  scc_read,
>  vcc_write,
>  vcc_read,
>  exec_write,
>  exec_read,
>  M0_write,
>  M0_read,
>  s1_width,
>  s2_width,
>  s3_width,
>  s4_width,
>  dest1_width,
>  dest2_width,
>  fp_instr,
>  copy_d1_to_s4,
>  copy_d1_to_s1,
>  d1_vdst_to_sdst
> );
19d34
< output wf_idemp_barrier;
38,40c53
<  
<       
< reg wf_idemp_barrier;
---
> 
75,78c88,89
< always @(instruction_id)begin
<    
<    wf_idemp_barrier <= 1'b0;
<    
---
> always @(instruction_id)
> begin
368,394d378
<     //SOPP: S_IDEMP_BARRIER
<     {2'b10,8'd1,24'h16}:
<       begin
< 	 wf_idemp_barrier <= 1'b1;
<         wf_halt <= 1'b0;
<         wf_barrier <= 1'b0;
<         wf_branch <= 1'b0;
<         wf_waitcnt <= 1'b1;
<         scc_write <= 1'b0;
<         scc_read <= 1'b0;
<         vcc_write <= 1'b0;
<         vcc_read <= 1'b0;
<         exec_write <= 1'b0;
<         exec_read <= 1'b0;
<         M0_write <= 1'b0;
<         M0_read <= 1'b0;
<         s1_width <= `DECODE_BIT0;
<         s2_width <= `DECODE_BIT0;
<         s3_width <= `DECODE_BIT0;
<         s4_width <= `DECODE_BIT0;
<         dest1_width <= `DECODE_BIT0;
<         dest2_width <= `DECODE_BIT0;
<         fp_instr <= 1'b0;
<         copy_d1_to_s4 <= 1'b0;
<         copy_d1_to_s1 <= 1'b0;
<         d1_vdst_to_sdst <= 1'b0;
<       end
diff -r ./decode/instr_collate.v ../../verilog/rtl/decode/instr_collate.v
1,79c1,55
< module instr_collate 
<   (/*AUTOARG*/
<    // Outputs
<    out_instr, out_valid, out_pc, out_long,
<    // Inputs
<    in_wfid, in_instr, in_valid, in_pc, flush_valid, flush_wfid,
<    in_long, clk, rst
<    );
< 
<    input [5:0] in_wfid;
<    input [31:0] in_instr;
<    input 	in_valid;
<    input [31:0] in_pc;
< 
<    input 	flush_valid;
<    input[5:0] 	flush_wfid;
< 	
<    
<    output [63:0] out_instr;
<    output 	 out_valid;
<    output [31:0] out_pc;
< 
<    input 	 in_long;
<    output 	 out_long;
< 
<    input 	 clk;
<    input 	 rst;
< 
<    wire [`WF_PER_CU-1:0] valid_reg_in, valid_reg_out;
<    
<    wire [`WF_PER_CU-1:0] decoded_in_wfid, decoded_in_long, decoded_flush_valid;
<    
<    wire [31:0] 	 stored_instr;
<    wire [31:0] 	 stored_pc;
<    
<    reg_40xX_1r_1w #(64) reg_instr_pc (
< 				      .rd_addr(in_wfid),
< 				      .rd_data({stored_instr,stored_pc}),
< 				      .wr_en(in_long&in_valid),
< 				      .wr_addr(in_wfid),
< 				      .wr_data({in_instr,in_pc}),
< 				      .clk(clk),
< 				      .rst(rst)
< 				      );
< 
<    // Valid state reg
<    decoder_6b_40b_en in_wfid_decoder(
<     .addr_in(in_wfid),
<     .en(1'b1),
<     .out(decoded_in_wfid));
< 
<    decoder_6b_40b_en in_long_decoder(
<     .addr_in(in_wfid),
<     .en(in_long),
<     .out(decoded_in_long));
< 
<    decoder_6b_40b_en flush_valid_decoder(
<     .addr_in(flush_wfid),
<     .en(flush_valid),
<     .out(decoded_flush_valid));
< 
<    assign valid_reg_in = ( (valid_reg_out & ~decoded_in_wfid) | decoded_in_long ) &  
< 		  ~decoded_flush_valid;
<    
<    dff reg_valid[`WF_PER_CU-1:0]
<      (.q(valid_reg_out),
<       .d(valid_reg_in),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    mux_40xX_to_1xX valid_read_mux 
<      (.out(out_long), 
<       .in(valid_reg_out), 
<       .select(in_wfid));
<    
<    assign out_instr = out_long ? {in_instr,stored_instr} : {32'b0,in_instr};
<    assign out_pc = out_long ? stored_pc : in_pc;
<    assign out_valid = in_valid & (~in_long);
---
> module instr_collate (
>   in_wfid,
>   in_instr,
>   in_valid,
>   in_pc,
>   out_instr,
>   out_valid,
>   out_pc,
>   in_long,
>   out_long,
>   clk,
>   rst
> );
> 
> input [5:0] in_wfid;
> input [31:0] in_instr;
> input in_valid;
> input [31:0] in_pc;
> 
> output [63:0] out_instr;
> output out_valid;
> output [31:0] out_pc;
> 
> input in_long;
> output out_long;
> 
> input clk;
> input rst;
> 
> wire [31:0] stored_instr;
> wire [31:0] stored_pc;
> 
> reg_40xX_1r_1w #(64) reg_instr_pc (
>  .rd_addr(in_wfid),
>  .rd_data({stored_instr,stored_pc}),
>  .wr_en(in_long&in_valid),
>  .wr_addr(in_wfid),
>  .wr_data({in_instr,in_pc}),
>  .clk(clk),
>  .rst(rst)
> );
> 
> reg_40xX_1r_1w #(1) reg_valid (
>  .rd_addr(in_wfid),
>  .rd_data(out_long),
>  .wr_en(in_valid),
>  .wr_addr(in_wfid),
>  .wr_data(in_long),
>  .clk(clk),
>  .rst(rst)
> );
> 
> assign out_instr = out_long ? {in_instr,stored_instr} : {32'b0,in_instr};
> assign out_pc = out_long ? stored_pc : in_pc;
> assign out_valid = in_valid & (~in_long);
diff -r ./decode/PS_flops_wavepool_decode.v ../../verilog/rtl/decode/PS_flops_wavepool_decode.v
1,11c1,18
< module PS_flops_wavepool_decode 
<   (/*AUTOARG*/
<    // Outputs
<    flopped_instr_pc, flopped_instr_valid, flopped_instr, flopped_wfid,
<    flopped_vgpr_base, flopped_sgpr_base, flopped_lds_base,
<    flopped_issue_recover_en, flopped_issue_recover_wfid,
<    // Inputs
<    clk, rst, wave_instr_pc, wave_instr_valid, wave_instr, wave_wfid,
<    wave_vgpr_base, wave_sgpr_base, wave_lds_base, issue_recover_en,
<    issue_recover_wfid
<    );
---
> module PS_flops_wavepool_decode (
>  wave_instr_pc,
>  wave_instr_valid,
>  wave_instr,
>  wave_wfid,
>  wave_vgpr_base,
>  wave_sgpr_base,
>  wave_lds_base,
>  flopped_instr_pc,
>  flopped_instr_valid,
>  flopped_instr,
>  flopped_wfid,
>  flopped_vgpr_base,
>  flopped_sgpr_base,
>  flopped_lds_base,
>  clk,
>  rst
> );
13,14c20,21
<    input clk;
<    input rst;
---
> input clk;
> input rst;
16,33c23,45
<    input [31:0] wave_instr_pc;
<    input 	wave_instr_valid;
<    input [31:0] wave_instr;
<    input [5:0] 	wave_wfid;
<    input [9:0] 	wave_vgpr_base;
<    input [8:0] 	wave_sgpr_base;
<    input [15:0] wave_lds_base;
<    input 	issue_recover_en;
<    input [5:0] 	issue_recover_wfid;
<    output [31:0] flopped_instr_pc;
<    output 	 flopped_instr_valid;
<    output [31:0] flopped_instr;
<    output [5:0]  flopped_wfid;
<    output [9:0]  flopped_vgpr_base;
<    output [8:0]  flopped_sgpr_base;
<    output [15:0] flopped_lds_base;
<    output 	 flopped_issue_recover_en;
<    output [5:0]  flopped_issue_recover_wfid;
---
> input [31:0] wave_instr_pc;
> input wave_instr_valid;
> input [31:0] wave_instr;
> input [5:0] wave_wfid;
> input [9:0] wave_vgpr_base;
> input [8:0] wave_sgpr_base;
> input [15:0] wave_lds_base;
> 
> output [31:0] flopped_instr_pc;
> output flopped_instr_valid;
> output [31:0] flopped_instr;
> output [5:0] flopped_wfid;
> output [9:0] flopped_vgpr_base;
> output [8:0] flopped_sgpr_base;
> output [15:0] flopped_lds_base;
> 
> dff flop_instr_pc [31:0] (.q(flopped_instr_pc), .d(wave_instr_pc), .clk(clk), .rst(rst));
> dff flop_instr_valid (.q(flopped_instr_valid), .d(wave_instr_valid), .clk(clk), .rst(rst));
> dff flop_instr [31:0] (.q(flopped_instr), .d(wave_instr), .clk(clk), .rst(rst));
> dff flop_wfid [5:0] (.q(flopped_wfid), .d(wave_wfid), .clk(clk), .rst(rst));
> dff flop_vgpr_base [9:0] (.q(flopped_vgpr_base), .d(wave_vgpr_base), .clk(clk), .rst(rst));
> dff flop_sgpr_base [8:0] (.q(flopped_sgpr_base), .d(wave_sgpr_base), .clk(clk), .rst(rst));
> dff flop_lds_base [15:0] (.q(flopped_lds_base), .d(wave_lds_base), .clk(clk), .rst(rst));
35,44d46
<    dff flop_instr_pc [31:0] (.q(flopped_instr_pc), .d(wave_instr_pc), .clk(clk), .rst(rst));
<    dff flop_instr_valid (.q(flopped_instr_valid), .d(wave_instr_valid), .clk(clk), .rst(rst));
<    dff flop_instr [31:0] (.q(flopped_instr), .d(wave_instr), .clk(clk), .rst(rst));
<    dff flop_wfid [5:0] (.q(flopped_wfid), .d(wave_wfid), .clk(clk), .rst(rst));
<    dff flop_vgpr_base [9:0] (.q(flopped_vgpr_base), .d(wave_vgpr_base), .clk(clk), .rst(rst));
<    dff flop_sgpr_base [8:0] (.q(flopped_sgpr_base), .d(wave_sgpr_base), .clk(clk), .rst(rst));
<    dff flop_lds_base [15:0] (.q(flopped_lds_base), .d(wave_lds_base), .clk(clk), .rst(rst));
<    dff flop_recover_en(.q(flopped_issue_recover_en), .d(issue_recover_en), .clk(clk), .rst(rst));
<    dff flop_recover_wfid[5:0](.q(flopped_issue_recover_wfid), .d(issue_recover_wfid), .clk(clk), .rst(rst));
<    
Only in ../../verilog/rtl/exec: build
Only in ../../verilog/rtl/fetch: build
diff -r ./fetch/fetch.interface ../../verilog/rtl/fetch/fetch.interface
19,21d18
<       issue_recover_pc,
<       issue_recover_en,
<       issue_recover_wfid,
51c48
<          salu_branch_taken, issue_recover_en;
---
>          salu_branch_taken;
54c51
<          salu_branch_wfid, issue_recover_wfid;
---
>          salu_branch_wfid;
57c54
< input[14:0] dispatch2cu_wf_tag_dispatch;
---
> input[10:0] dispatch2cu_wf_tag_dispatch;
59c56
< input[31:0] dispatch2cu_start_pc_dispatch, salu_branch_pc_value, issue_recover_pc;
---
> input[31:0] dispatch2cu_start_pc_dispatch, salu_branch_pc_value;
69c66,67
< output[14:0] cu2dispatch_wf_tag_done, tracemon_wf_tag_dispatch;
---
> output[10:0] cu2dispatch_wf_tag_done;
> output[14:0] tracemon_wf_tag_dispatch;
diff -r ./fetch/fetch.v ../../verilog/rtl/fetch/fetch.v
1,97c1,120
<  module fetch
<    (/*AUTOARG*/
<     // Outputs
<     cu2dispatch_wf_done, buff_rd_en, wave_reserve_valid,
<     wave_basereg_wr, exec_init_wf_en, tracemon_dispatch,
<     issue_wg_wf_count, wave_reserve_slotid, wave_basereg_wfid,
<     exec_init_wf_id, issue_wg_wgid, tracemon_new_wfid, wave_sgpr_base,
<     wave_vgpr_base, cu2dispatch_wf_tag_done, tracemon_wf_tag_dispatch,
<     wave_lds_base, buff_addr, buff_tag, exec_init_value,
<     // Inputs
<     clk, rst, dispatch2cu_wf_dispatch, buff_ack, issue_wf_done_en,
<     salu_branch_en, salu_branch_taken, issue_recover_en,
<     dispatch2cu_wg_wf_count, dispatch2cu_wf_size_dispatch,
<     issue_wf_done_wf_id, issue_wg_wfid, salu_branch_wfid,
<     issue_recover_wfid, dispatch2cu_sgpr_base_dispatch,
<     dispatch2cu_vgpr_base_dispatch, dispatch2cu_wf_tag_dispatch,
<     dispatch2cu_lds_base_dispatch, dispatch2cu_start_pc_dispatch,
<     salu_branch_pc_value, issue_recover_pc, wave_stop_fetch
<     );
< 
<  input clk;
< 
<  input rst;
< 
<  input dispatch2cu_wf_dispatch, buff_ack, issue_wf_done_en, salu_branch_en,
< 	  salu_branch_taken, issue_recover_en;
<  input[3:0] dispatch2cu_wg_wf_count;
<  input[5:0] dispatch2cu_wf_size_dispatch, issue_wf_done_wf_id, issue_wg_wfid,
< 	  salu_branch_wfid, issue_recover_wfid;
<  input[8:0] dispatch2cu_sgpr_base_dispatch;
<  input[9:0] dispatch2cu_vgpr_base_dispatch;
<  input[14:0] dispatch2cu_wf_tag_dispatch;
<  input[15:0] dispatch2cu_lds_base_dispatch;
<  input[31:0] dispatch2cu_start_pc_dispatch, salu_branch_pc_value, issue_recover_pc;
<  input[39:0] wave_stop_fetch;
< 
<  output cu2dispatch_wf_done, buff_rd_en, wave_reserve_valid, wave_basereg_wr,
< 	  exec_init_wf_en, tracemon_dispatch;
<  output[3:0] issue_wg_wf_count;
<  output[5:0] wave_reserve_slotid, wave_basereg_wfid, exec_init_wf_id,
< 	  issue_wg_wgid, tracemon_new_wfid;
<  output[8:0] wave_sgpr_base;
<  output[9:0] wave_vgpr_base;
<  output[14:0] cu2dispatch_wf_tag_done, tracemon_wf_tag_dispatch;
<  output[15:0] wave_lds_base;
<  output[31:0] buff_addr;
<  output[38:0] buff_tag;
<  output[63:0] exec_init_value;
< 
<  ///////////////////////////////
<  //Your code goes here - beware: script does not recognize changes
<  // into files. It ovewrites everithing without mercy. Save your work before running the script
<  ///////////////////////////////
< 
<  wire fetch_instr_en;
<  wire [39:0] vacant_next;
<  wire wf_dispatch;
<  wire wr;
<  wire [3:0]  wg_wf_count;
<  wire [14:0] wf_tag_dispatch;
<  wire fetch_valid;
<  wire [31:0] start_pc_dispatch;
<  wire [5:0] wf_size_dispatch;
<  wire [39:0] vacant;
<  wire vacant_reg_wr;
<  wire [5:0] buff_tag_sch;
<  wire [32:0] buff_addr_init;
<  wire [5:0] new_wfid;
< 
<  wire branch_wr, pcblk_wr;
<  wire [31:0] pcblk_pc;
<  wire [5:0] pcblk_wfid;
< 
<  assign buff_rd_en = fetch_instr_en;
<  assign wave_basereg_wfid = new_wfid;
<  assign exec_init_wf_en = wr;
<  assign exec_init_wf_id = wave_basereg_wfid;
<  assign buff_tag = {buff_addr_init[32], buff_tag_sch, buff_addr_init[31:0]};
<  assign wave_basereg_wr = wr;
<  assign cu2dispatch_wf_done = issue_wf_done_en;
<  assign wave_reserve_slotid = buff_tag_sch;
<  assign vacant_reg_wr = (wr | issue_wf_done_en);
<  assign buff_addr = buff_addr_init[31:0];
< 
<  assign branch_wr = salu_branch_en & salu_branch_taken;
<  assign pcblk_pc = branch_wr ? salu_branch_pc_value : start_pc_dispatch;
<  assign pcblk_wfid = branch_wr ? salu_branch_wfid : new_wfid;
<  assign pcblk_wr = branch_wr | wr;
< 
<  // tracemon signals
<  assign tracemon_dispatch = wf_dispatch;
<  assign tracemon_wf_tag_dispatch = wf_tag_dispatch;
<  assign tracemon_new_wfid = new_wfid;
< 
<  regfile #(93) dispatch_info_latch (
<        { dispatch2cu_wf_dispatch, dispatch2cu_wf_tag_dispatch,
< 	 dispatch2cu_start_pc_dispatch, dispatch2cu_vgpr_base_dispatch,
---
> module fetch(
>       dispatch2cu_wf_dispatch,
>       dispatch2cu_wf_tag_dispatch,
>       dispatch2cu_start_pc_dispatch,
>       dispatch2cu_vgpr_base_dispatch,
>       dispatch2cu_sgpr_base_dispatch,
>       dispatch2cu_lds_base_dispatch,
>       dispatch2cu_wf_size_dispatch,
>       dispatch2cu_wg_wf_count,
>       buff_ack,
>       wave_stop_fetch,
>       issue_wf_done_en,
>       issue_wf_done_wf_id,
>       issue_wg_wfid,
>       salu_branch_wfid,
>       salu_branch_en,
>       salu_branch_taken,
>       salu_branch_pc_value,
>       cu2dispatch_wf_tag_done,
>       cu2dispatch_wf_done,
>       buff_addr,
>       buff_tag,
>       buff_rd_en,
>       wave_reserve_slotid,
>       wave_reserve_valid,
>       wave_basereg_wr,
>       wave_basereg_wfid,
>       wave_vgpr_base,
>       wave_sgpr_base,
>       wave_lds_base,
>       exec_init_wf_en,
>       exec_init_wf_id,
>       exec_init_value,
>       issue_wg_wgid,
>       issue_wg_wf_count,
>       tracemon_dispatch,
>       tracemon_wf_tag_dispatch,
>       tracemon_new_wfid,
>       clk,
>       rst
>  );
> 
> input clk;
> 
> input rst;
> 
> input dispatch2cu_wf_dispatch, buff_ack, issue_wf_done_en, salu_branch_en,
>          salu_branch_taken;
> input[3:0] dispatch2cu_wg_wf_count;
> input[5:0] dispatch2cu_wf_size_dispatch, issue_wf_done_wf_id, issue_wg_wfid,
>          salu_branch_wfid;
> input[8:0] dispatch2cu_sgpr_base_dispatch;
> input[9:0] dispatch2cu_vgpr_base_dispatch;
> input[14:0] dispatch2cu_wf_tag_dispatch;
> input[15:0] dispatch2cu_lds_base_dispatch;
> input[31:0] dispatch2cu_start_pc_dispatch, salu_branch_pc_value;
> input[39:0] wave_stop_fetch;
> 
> output cu2dispatch_wf_done, buff_rd_en, wave_reserve_valid, wave_basereg_wr,
>          exec_init_wf_en, tracemon_dispatch;
> output[3:0] issue_wg_wf_count;
> output[5:0] wave_reserve_slotid, wave_basereg_wfid, exec_init_wf_id,
>          issue_wg_wgid, tracemon_new_wfid;
> output[8:0] wave_sgpr_base;
> output[9:0] wave_vgpr_base;
> output[14:0] cu2dispatch_wf_tag_done;
> output[14:0] tracemon_wf_tag_dispatch;
> output[15:0] wave_lds_base;
> output[31:0] buff_addr;
> output[38:0] buff_tag;
> output[63:0] exec_init_value;
> 
> ///////////////////////////////
> //Your code goes here - beware: script does not recognize changes
> // into files. It ovewrites everithing without mercy. Save your work before running the script
> ///////////////////////////////
> 
> wire fetch_instr_en;
> wire [39:0] vacant_next;
> wire wf_dispatch;
> wire wr;
> wire [3:0]  wg_wf_count;
> wire [14:0] wf_tag_dispatch;
> wire fetch_valid;
> wire [31:0] start_pc_dispatch;
> wire [5:0] wf_size_dispatch;
> wire [39:0] vacant;
> wire vacant_reg_wr;
> wire [5:0] buff_tag_sch;
> wire [32:0] buff_addr_init;
> wire [5:0] new_wfid;
> 
> wire branch_wr, pcblk_wr;
> wire [31:0] pcblk_pc;
> wire [5:0] pcblk_wfid;
> 
> assign buff_rd_en = fetch_instr_en;
> assign wave_basereg_wfid = new_wfid;
> assign exec_init_wf_en = wr;
> assign exec_init_wf_id = wave_basereg_wfid;
> assign buff_tag = {buff_addr_init[32], buff_tag_sch, buff_addr_init[31:0]};
> assign wave_basereg_wr = wr;
> assign cu2dispatch_wf_done = issue_wf_done_en;
> assign wave_reserve_slotid = buff_tag_sch;
> assign vacant_reg_wr = (wr | issue_wf_done_en);
> assign buff_addr = buff_addr_init[31:0];
> 
> assign branch_wr = salu_branch_en & salu_branch_taken;
> assign pcblk_pc = branch_wr ? salu_branch_pc_value : start_pc_dispatch;
> assign pcblk_wfid = branch_wr ? salu_branch_wfid : new_wfid;
> assign pcblk_wr = branch_wr | wr;
> 
> // tracemon signals
> assign tracemon_dispatch = wf_dispatch;
> assign tracemon_wf_tag_dispatch = wf_tag_dispatch;
> assign tracemon_new_wfid = new_wfid;
> 
> regfile #(93) dispatch_info_latch (
>       { dispatch2cu_wf_dispatch, dispatch2cu_wf_tag_dispatch,
>         dispatch2cu_start_pc_dispatch, dispatch2cu_vgpr_base_dispatch,
136,151c159,163
<    pc_block pcb1
<      (/*AUTOINST*/
<       // Outputs
<       .pc_read2ibuff			(buff_addr_init),
<       // Inputs
<       .new_pc_init			(pcblk_pc),
<       .wf_id				(pcblk_wfid),
<       .recover_wr_wfid			(issue_recover_wfid),
<       .recover_wr_pc			(issue_recover_pc),
<       .wr				(pcblk_wr),
<       .recover_wr			(issue_recover_en),
<       .clk				(clk),
<       .rst				(rst),
<       .rd_en				(fetch_instr_en),
<       .wf_id_rd				(buff_tag_sch));
<    
---
> pc_block pcb1 (
>       pcblk_pc, pcblk_wfid, pcblk_wr,
>       fetch_instr_en, buff_tag_sch,
>       buff_addr_init, clk, rst
> );
diff -r ./fetch/pc_block.v ../../verilog/rtl/fetch/pc_block.v
1,67c1,64
< module pc_block 
<   (/*AUTOARG*/
<    // Outputs
<    pc_read2ibuff,
<    // Inputs
<    new_pc_init, wf_id, recover_wr_wfid, recover_wr_pc, wr, recover_wr,
<    clk, rst, rd_en, wf_id_rd
<    );
< 
<    parameter BITWIDTH = 32;
< 
<    input [31:0] new_pc_init;
<    input [5:0] 	wf_id;
<    input [5:0] 	recover_wr_wfid;
<    input [31:0] recover_wr_pc;
<    
<    input 	wr;
<    input 	recover_wr;
<    
<    input 	clk, rst;
<    input 	rd_en;
<    input [5:0] 	wf_id_rd;
< 
<    output [32:0] pc_read2ibuff;
< 
<    wire 	 write;
<    wire [31:0] 	 pc_read;
<    wire [32:0] 	 data0, data_flop0;
<    wire [32:0] 	 data1, data_flop1;
<    wire [32:0] 	 data2, data_flop2;
<    wire [32:0] 	 data3, data_flop3;
<    wire [32:0] 	 data4, data_flop4;
<    wire [32:0] 	 data5, data_flop5;
<    wire [32:0] 	 data6, data_flop6;
<    wire [32:0] 	 data7, data_flop7;
<    wire [32:0] 	 data8, data_flop8;
<    wire [32:0] 	 data9, data_flop9;
<    wire [32:0] 	 data10, data_flop10;
<    wire [32:0] 	 data11, data_flop11;
<    wire [32:0] 	 data12, data_flop12;
<    wire [32:0] 	 data13, data_flop13;
<    wire [32:0] 	 data14, data_flop14;
<    wire [32:0] 	 data15, data_flop15;
<    wire [32:0] 	 data16, data_flop16;
<    wire [32:0] 	 data17, data_flop17;
<    wire [32:0] 	 data18, data_flop18;
<    wire [32:0] 	 data19, data_flop19;
<    wire [32:0] 	 data20, data_flop20;
<    wire [32:0] 	 data21, data_flop21;
<    wire [32:0] 	 data22, data_flop22;
<    wire [32:0] 	 data23, data_flop23;
<    wire [32:0] 	 data24, data_flop24;
<    wire [32:0] 	 data25, data_flop25;
<    wire [32:0] 	 data26, data_flop26;
<    wire [32:0] 	 data27, data_flop27;
<    wire [32:0] 	 data28, data_flop28;
<    wire [32:0] 	 data29, data_flop29;
<    wire [32:0] 	 data30, data_flop30;
<    wire [32:0] 	 data31, data_flop31;
<    wire [32:0] 	 data32, data_flop32;
<    wire [32:0] 	 data33, data_flop33;
<    wire [32:0] 	 data34, data_flop34;
<    wire [32:0] 	 data35, data_flop35;
<    wire [32:0] 	 data36, data_flop36;
<    wire [32:0] 	 data37, data_flop37;
<    wire [32:0] 	 data38, data_flop38;
<    wire [32:0] 	 data39, data_flop39;
---
> module pc_block (
> 	new_pc_init, 
> 	wf_id, 
> 	wr, 
> 	rd_en, 
> 	wf_id_rd, 
> 	pc_read2ibuff, 
> 	clk, 
> 	rst
> );
> 
> parameter BITWIDTH = 32;
> 
> input [31:0] new_pc_init;
> input [5:0] wf_id;
> input wr;
> input clk, rst;
> input rd_en;
> input [5:0] wf_id_rd;
> 
> output [32:0]pc_read2ibuff;
> 
> wire write;
> wire [31:0] pc_read;
> wire [32:0] data0, data_flop0;
> wire [32:0] data1, data_flop1;
> wire [32:0] data2, data_flop2;
> wire [32:0] data3, data_flop3;
> wire [32:0] data4, data_flop4;
> wire [32:0] data5, data_flop5;
> wire [32:0] data6, data_flop6;
> wire [32:0] data7, data_flop7;
> wire [32:0] data8, data_flop8;
> wire [32:0] data9, data_flop9;
> wire [32:0] data10, data_flop10;
> wire [32:0] data11, data_flop11;
> wire [32:0] data12, data_flop12;
> wire [32:0] data13, data_flop13;
> wire [32:0] data14, data_flop14;
> wire [32:0] data15, data_flop15;
> wire [32:0] data16, data_flop16;
> wire [32:0] data17, data_flop17;
> wire [32:0] data18, data_flop18;
> wire [32:0] data19, data_flop19;
> wire [32:0] data20, data_flop20;
> wire [32:0] data21, data_flop21;
> wire [32:0] data22, data_flop22;
> wire [32:0] data23, data_flop23;
> wire [32:0] data24, data_flop24;
> wire [32:0] data25, data_flop25;
> wire [32:0] data26, data_flop26;
> wire [32:0] data27, data_flop27;
> wire [32:0] data28, data_flop28;
> wire [32:0] data29, data_flop29;
> wire [32:0] data30, data_flop30;
> wire [32:0] data31, data_flop31;
> wire [32:0] data32, data_flop32;
> wire [32:0] data33, data_flop33;
> wire [32:0] data34, data_flop34;
> wire [32:0] data35, data_flop35;
> wire [32:0] data36, data_flop36;
> wire [32:0] data37, data_flop37;
> wire [32:0] data38, data_flop38;
> wire [32:0] data39, data_flop39;
71,111c68,108
<    regfile #(33) rfile0 (data0, write, data_flop0, clk, rst);
<    regfile #(33) rfile1 (data1, write, data_flop1, clk, rst);
<    regfile #(33) rfile2 (data2, write, data_flop2, clk, rst);
<    regfile #(33) rfile3 (data3, write, data_flop3, clk, rst);
<    regfile #(33) rfile4 (data4, write, data_flop4, clk, rst);
<    regfile #(33) rfile5 (data5, write, data_flop5, clk, rst);
<    regfile #(33) rfile6 (data6, write, data_flop6, clk, rst);
<    regfile #(33) rfile7 (data7, write, data_flop7, clk, rst);
<    regfile #(33) rfile8 (data8, write, data_flop8, clk, rst);
<    regfile #(33) rfile9 (data9, write, data_flop9, clk, rst);
<    regfile #(33) rfile10 (data10, write, data_flop10, clk, rst);
<    regfile #(33) rfile11 (data11, write, data_flop11, clk, rst);
<    regfile #(33) rfile12 (data12, write, data_flop12, clk, rst);
<    regfile #(33) rfile13 (data13, write, data_flop13, clk, rst);
<    regfile #(33) rfile14 (data14, write, data_flop14, clk, rst);
<    regfile #(33) rfile15 (data15, write, data_flop15, clk, rst);
<    regfile #(33) rfile16 (data16, write, data_flop16, clk, rst);
<    regfile #(33) rfile17 (data17, write, data_flop17, clk, rst);
<    regfile #(33) rfile18 (data18, write, data_flop18, clk, rst);
<    regfile #(33) rfile19 (data19, write, data_flop19, clk, rst);
<    regfile #(33) rfile20 (data20, write, data_flop20, clk, rst);
<    regfile #(33) rfile21 (data21, write, data_flop21, clk, rst);
<    regfile #(33) rfile22 (data22, write, data_flop22, clk, rst);
<    regfile #(33) rfile23 (data23, write, data_flop23, clk, rst);
<    regfile #(33) rfile24 (data24, write, data_flop24, clk, rst);
<    regfile #(33) rfile25 (data25, write, data_flop25, clk, rst);
<    regfile #(33) rfile26 (data26, write, data_flop26, clk, rst);
<    regfile #(33) rfile27 (data27, write, data_flop27, clk, rst);
<    regfile #(33) rfile28 (data28, write, data_flop28, clk, rst);
<    regfile #(33) rfile29 (data29, write, data_flop29, clk, rst);
<    regfile #(33) rfile30 (data30, write, data_flop30, clk, rst);
<    regfile #(33) rfile31 (data31, write, data_flop31, clk, rst);
<    regfile #(33) rfile32 (data32, write, data_flop32, clk, rst);
<    regfile #(33) rfile33 (data33, write, data_flop33, clk, rst);
<    regfile #(33) rfile34 (data34, write, data_flop34, clk, rst);
<    regfile #(33) rfile35 (data35, write, data_flop35, clk, rst);
<    regfile #(33) rfile36 (data36, write, data_flop36, clk, rst);
<    regfile #(33) rfile37 (data37, write, data_flop37, clk, rst);
<    regfile #(33) rfile38 (data38, write, data_flop38, clk, rst);
<    regfile #(33) rfile39 (data39, write, data_flop39, clk, rst);
<    
---
>      regfile #(33) rfile0 (data0, write, data_flop0, clk, rst);
> 	 regfile #(33) rfile1 (data1, write, data_flop1, clk, rst);
> 	 regfile #(33) rfile2 (data2, write, data_flop2, clk, rst);
> 	 regfile #(33) rfile3 (data3, write, data_flop3, clk, rst);
> 	 regfile #(33) rfile4 (data4, write, data_flop4, clk, rst);
> 	 regfile #(33) rfile5 (data5, write, data_flop5, clk, rst);
> 	 regfile #(33) rfile6 (data6, write, data_flop6, clk, rst);
> 	 regfile #(33) rfile7 (data7, write, data_flop7, clk, rst);
> 	 regfile #(33) rfile8 (data8, write, data_flop8, clk, rst);
> 	 regfile #(33) rfile9 (data9, write, data_flop9, clk, rst);
> 	 regfile #(33) rfile10 (data10, write, data_flop10, clk, rst);
> 	 regfile #(33) rfile11 (data11, write, data_flop11, clk, rst);
> 	 regfile #(33) rfile12 (data12, write, data_flop12, clk, rst);
> 	 regfile #(33) rfile13 (data13, write, data_flop13, clk, rst);
> 	 regfile #(33) rfile14 (data14, write, data_flop14, clk, rst);
> 	 regfile #(33) rfile15 (data15, write, data_flop15, clk, rst);
> 	 regfile #(33) rfile16 (data16, write, data_flop16, clk, rst);
> 	 regfile #(33) rfile17 (data17, write, data_flop17, clk, rst);
> 	 regfile #(33) rfile18 (data18, write, data_flop18, clk, rst);
> 	 regfile #(33) rfile19 (data19, write, data_flop19, clk, rst);
> 	 regfile #(33) rfile20 (data20, write, data_flop20, clk, rst);
> 	 regfile #(33) rfile21 (data21, write, data_flop21, clk, rst);
> 	 regfile #(33) rfile22 (data22, write, data_flop22, clk, rst);
> 	 regfile #(33) rfile23 (data23, write, data_flop23, clk, rst);
> 	 regfile #(33) rfile24 (data24, write, data_flop24, clk, rst);
> 	 regfile #(33) rfile25 (data25, write, data_flop25, clk, rst);
> 	 regfile #(33) rfile26 (data26, write, data_flop26, clk, rst);
> 	 regfile #(33) rfile27 (data27, write, data_flop27, clk, rst);
> 	 regfile #(33) rfile28 (data28, write, data_flop28, clk, rst);
> 	 regfile #(33) rfile29 (data29, write, data_flop29, clk, rst);
> 	 regfile #(33) rfile30 (data30, write, data_flop30, clk, rst);
> 	 regfile #(33) rfile31 (data31, write, data_flop31, clk, rst);
> 	 regfile #(33) rfile32 (data32, write, data_flop32, clk, rst);
> 	 regfile #(33) rfile33 (data33, write, data_flop33, clk, rst);
> 	 regfile #(33) rfile34 (data34, write, data_flop34, clk, rst);
> 	 regfile #(33) rfile35 (data35, write, data_flop35, clk, rst);
> 	 regfile #(33) rfile36 (data36, write, data_flop36, clk, rst);
> 	 regfile #(33) rfile37 (data37, write, data_flop37, clk, rst);
> 	 regfile #(33) rfile38 (data38, write, data_flop38, clk, rst);
> 	 regfile #(33) rfile39 (data39, write, data_flop39, clk, rst);
> 	 
114,153c111,151
< 			  (wf_id_rd==6'd1)?data_flop1:
< 			  (wf_id_rd==6'd2)?data_flop2:
< 			  (wf_id_rd==6'd3)?data_flop3:
< 			  (wf_id_rd==6'd4)?data_flop4:
< 			  (wf_id_rd==6'd5)?data_flop5:
< 			  (wf_id_rd==6'd6)?data_flop6:
< 			  (wf_id_rd==6'd7)?data_flop7:
< 			  (wf_id_rd==6'd8)?data_flop8:
< 			  (wf_id_rd==6'd9)?data_flop9:
< 			  (wf_id_rd==6'd10)?data_flop10:
< 			  (wf_id_rd==6'd11)?data_flop11:
< 			  (wf_id_rd==6'd12)?data_flop12:
< 			  (wf_id_rd==6'd13)?data_flop13:
< 			  (wf_id_rd==6'd14)?data_flop14:
< 			  (wf_id_rd==6'd15)?data_flop15:
< 			  (wf_id_rd==6'd16)?data_flop16:
< 			  (wf_id_rd==6'd17)?data_flop17:
< 			  (wf_id_rd==6'd18)?data_flop18:
< 			  (wf_id_rd==6'd19)?data_flop19:
< 			  (wf_id_rd==6'd20)?data_flop20:
< 			  (wf_id_rd==6'd21)?data_flop21:
< 			  (wf_id_rd==6'd22)?data_flop22:
< 			  (wf_id_rd==6'd23)?data_flop23:
< 			  (wf_id_rd==6'd24)?data_flop24:
< 			  (wf_id_rd==6'd25)?data_flop25:
< 			  (wf_id_rd==6'd26)?data_flop26:
< 			  (wf_id_rd==6'd27)?data_flop27:
< 			  (wf_id_rd==6'd28)?data_flop28:
< 			  (wf_id_rd==6'd29)?data_flop29:
< 			  (wf_id_rd==6'd30)?data_flop30:
< 			  (wf_id_rd==6'd31)?data_flop31:
< 			  (wf_id_rd==6'd32)?data_flop32:
< 			  (wf_id_rd==6'd33)?data_flop33:
< 			  (wf_id_rd==6'd34)?data_flop34:
< 			  (wf_id_rd==6'd35)?data_flop35:
< 			  (wf_id_rd==6'd36)?data_flop36:
< 			  (wf_id_rd==6'd37)?data_flop37:
< 			  (wf_id_rd==6'd38)?data_flop38:
< 			  (wf_id_rd==6'd39)?data_flop39:
< 			  33'd0;
---
>                    (wf_id_rd==6'd1)?data_flop1:
> 				   (wf_id_rd==6'd2)?data_flop2:
> 				   (wf_id_rd==6'd3)?data_flop3:
> 				   (wf_id_rd==6'd4)?data_flop4:
> 				   (wf_id_rd==6'd5)?data_flop5:
> 				   (wf_id_rd==6'd6)?data_flop6:
> 				   (wf_id_rd==6'd7)?data_flop7:
> 				   (wf_id_rd==6'd8)?data_flop8:
> 				   (wf_id_rd==6'd9)?data_flop9:
> 				   (wf_id_rd==6'd10)?data_flop10:
> 				   (wf_id_rd==6'd11)?data_flop11:
> 				   (wf_id_rd==6'd12)?data_flop12:
> 				   (wf_id_rd==6'd13)?data_flop13:
> 				   (wf_id_rd==6'd14)?data_flop14:
> 				   (wf_id_rd==6'd15)?data_flop15:
> 				   (wf_id_rd==6'd16)?data_flop16:
> 				   (wf_id_rd==6'd17)?data_flop17:
> 				   (wf_id_rd==6'd18)?data_flop18:
> 				   (wf_id_rd==6'd19)?data_flop19:
> 				   (wf_id_rd==6'd20)?data_flop20:
> 				   (wf_id_rd==6'd21)?data_flop21:
> 				   (wf_id_rd==6'd22)?data_flop22:
> 				   (wf_id_rd==6'd23)?data_flop23:
> 				   (wf_id_rd==6'd24)?data_flop24:
> 				   (wf_id_rd==6'd25)?data_flop25:
> 				   (wf_id_rd==6'd26)?data_flop26:
> 				   (wf_id_rd==6'd27)?data_flop27:
> 				   (wf_id_rd==6'd28)?data_flop28:
> 				   (wf_id_rd==6'd29)?data_flop29:
> 				   (wf_id_rd==6'd30)?data_flop30:
> 				   (wf_id_rd==6'd31)?data_flop31:
> 				   (wf_id_rd==6'd32)?data_flop32:
> 				   (wf_id_rd==6'd33)?data_flop33:
> 				   (wf_id_rd==6'd34)?data_flop34:
> 				   (wf_id_rd==6'd35)?data_flop35:
> 				   (wf_id_rd==6'd36)?data_flop36:
> 				   (wf_id_rd==6'd37)?data_flop37:
> 				   (wf_id_rd==6'd38)?data_flop38:
> 				   (wf_id_rd==6'd39)?data_flop39:
>                     33'd0;
>   
155,236c153,192
< 
<    assign data0= (recover_wr & (recover_wr_wfid==6'd0))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd0))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd0))?{1'b0,pc_read}:data_flop0; 
<    //   assign data0=(wr & (wf_id==6'd0))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd0))?{1'b0,pc_read}:data_flop0;
<    assign data1=(recover_wr & (recover_wr_wfid==6'd1))? recover_wr_pc : 
< 		(wr & (wf_id==6'd1))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd1))?{1'b0,pc_read}:data_flop1;
<    assign data2=(recover_wr & (recover_wr_wfid==6'd2))? recover_wr_pc : 
< 		(wr & (wf_id==6'd2))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd2))?{1'b0,pc_read}:data_flop2;
<    assign data3=(recover_wr & (recover_wr_wfid==6'd3))? recover_wr_pc : 
< 		(wr & (wf_id==6'd3))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd3))?{1'b0,pc_read}:data_flop3;
<    assign data4=(recover_wr & (recover_wr_wfid==6'd4))? recover_wr_pc : 
< 		(wr & (wf_id==6'd4))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd4))?{1'b0,pc_read}:data_flop4;
<    assign data5=(recover_wr & (recover_wr_wfid==6'd5))? recover_wr_pc : 
< 		(wr & (wf_id==6'd5))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd5))?{1'b0,pc_read}:data_flop5;
<    assign data6=(recover_wr & (recover_wr_wfid==6'd6))? recover_wr_pc : 
< 		(wr & (wf_id==6'd6))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd6))?{1'b0,pc_read}:data_flop6;
<    assign data7=(recover_wr & (recover_wr_wfid==6'd7))? recover_wr_pc : 
< 		(wr & (wf_id==6'd7))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd7))?{1'b0,pc_read}:data_flop7;
<    assign data8=(recover_wr & (recover_wr_wfid==6'd8))? recover_wr_pc : 
< 		(wr & (wf_id==6'd8))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd8))?{1'b0,pc_read}:data_flop8;
<    assign data9=(recover_wr & (recover_wr_wfid==6'd9))? recover_wr_pc : 
< 		(wr & (wf_id==6'd9))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd9))?{1'b0,pc_read}:data_flop9;
<    assign data10=(recover_wr & (recover_wr_wfid==6'd10))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd10))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd10))?{1'b0,pc_read}:data_flop10;
<    assign data11=(recover_wr & (recover_wr_wfid==6'd11))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd11))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd11))?{1'b0,pc_read}:data_flop11;
<    assign data12=(recover_wr & (recover_wr_wfid==6'd12))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd12))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd12))?{1'b0,pc_read}:data_flop12;
<    assign data13=(recover_wr & (recover_wr_wfid==6'd13))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd13))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd13))?{1'b0,pc_read}:data_flop13;
<    assign data14=(recover_wr & (recover_wr_wfid==6'd14))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd14))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd14))?{1'b0,pc_read}:data_flop14;
<    assign data15=(recover_wr & (recover_wr_wfid==6'd15))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd15))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd15))?{1'b0,pc_read}:data_flop15;
<    assign data16=(recover_wr & (recover_wr_wfid==6'd16))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd16))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd16))?{1'b0,pc_read}:data_flop16;
<    assign data17=(recover_wr & (recover_wr_wfid==6'd17))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd17))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd17))?{1'b0,pc_read}:data_flop17;
<    assign data18=(recover_wr & (recover_wr_wfid==6'd18))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd18))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd18))?{1'b0,pc_read}:data_flop18;
<    assign data19=(recover_wr & (recover_wr_wfid==6'd19))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd19))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd19))?{1'b0,pc_read}:data_flop19;
<    assign data20=(recover_wr & (recover_wr_wfid==6'd20))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd20))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd20))?{1'b0,pc_read}:data_flop20;
<    assign data21=(recover_wr & (recover_wr_wfid==6'd21))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd21))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd21))?{1'b0,pc_read}:data_flop21;
<    assign data22=(recover_wr & (recover_wr_wfid==6'd22))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd22))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd22))?{1'b0,pc_read}:data_flop22;
<    assign data23=(recover_wr & (recover_wr_wfid==6'd23))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd23))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd23))?{1'b0,pc_read}:data_flop23;
<    assign data24=(recover_wr & (recover_wr_wfid==6'd24))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd24))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd24))?{1'b0,pc_read}:data_flop24;
<    assign data25=(recover_wr & (recover_wr_wfid==6'd25))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd25))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd25))?{1'b0,pc_read}:data_flop25;
<    assign data26=(recover_wr & (recover_wr_wfid==6'd26))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd26))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd26))?{1'b0,pc_read}:data_flop26;
<    assign data27=(recover_wr & (recover_wr_wfid==6'd27))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd27))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd27))?{1'b0,pc_read}:data_flop27;
<    assign data28=(recover_wr & (recover_wr_wfid==6'd28))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd28))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd28))?{1'b0,pc_read}:data_flop28;
<    assign data29=(recover_wr & (recover_wr_wfid==6'd29))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd29))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd29))?{1'b0,pc_read}:data_flop29;
<    assign data30=(recover_wr & (recover_wr_wfid==6'd30))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd30))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd30))?{1'b0,pc_read}:data_flop30;
<    assign data31=(recover_wr & (recover_wr_wfid==6'd31))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd31))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd31))?{1'b0,pc_read}:data_flop31;
<    assign data32=(recover_wr & (recover_wr_wfid==6'd32))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd32))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd32))?{1'b0,pc_read}:data_flop32;
<    assign data33=(recover_wr & (recover_wr_wfid==6'd33))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd33))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd33))?{1'b0,pc_read}:data_flop33;
<    assign data34=(recover_wr & (recover_wr_wfid==6'd34))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd34))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd34))?{1'b0,pc_read}:data_flop34;
<    assign data35=(recover_wr & (recover_wr_wfid==6'd35))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd35))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd35))?{1'b0,pc_read}:data_flop35;
<    assign data36=(recover_wr & (recover_wr_wfid==6'd36))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd36))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd36))?{1'b0,pc_read}:data_flop36;
<    assign data37=(recover_wr & (recover_wr_wfid==6'd37))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd37))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd37))?{1'b0,pc_read}:data_flop37;
<    assign data38=(recover_wr & (recover_wr_wfid==6'd38))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd38))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd38))?{1'b0,pc_read}:data_flop38;
<    assign data39=(recover_wr & (recover_wr_wfid==6'd39))? recover_wr_pc : 
< 		 (wr & (wf_id==6'd39))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd39))?{1'b0,pc_read}:data_flop39;
---
>    assign data0=(wr & (wf_id==6'd0))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd0))?{1'b0,pc_read}:data_flop0;
>    assign data1=(wr & (wf_id==6'd1))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd1))?{1'b0,pc_read}:data_flop1;
>    assign data2=(wr & (wf_id==6'd2))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd2))?{1'b0,pc_read}:data_flop2;
>    assign data3=(wr & (wf_id==6'd3))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd3))?{1'b0,pc_read}:data_flop3;
>    assign data4=(wr & (wf_id==6'd4))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd4))?{1'b0,pc_read}:data_flop4;
>    assign data5=(wr & (wf_id==6'd5))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd5))?{1'b0,pc_read}:data_flop5;
>    assign data6=(wr & (wf_id==6'd6))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd6))?{1'b0,pc_read}:data_flop6;
>    assign data7=(wr & (wf_id==6'd7))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd7))?{1'b0,pc_read}:data_flop7;
>    assign data8=(wr & (wf_id==6'd8))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd8))?{1'b0,pc_read}:data_flop8;
>    assign data9=(wr & (wf_id==6'd9))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd9))?{1'b0,pc_read}:data_flop9;
>    assign data10=(wr & (wf_id==6'd10))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd10))?{1'b0,pc_read}:data_flop10;
>    assign data11=(wr & (wf_id==6'd11))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd11))?{1'b0,pc_read}:data_flop11;
>    assign data12=(wr & (wf_id==6'd12))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd12))?{1'b0,pc_read}:data_flop12;
>    assign data13=(wr & (wf_id==6'd13))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd13))?{1'b0,pc_read}:data_flop13;
>    assign data14=(wr & (wf_id==6'd14))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd14))?{1'b0,pc_read}:data_flop14;
>    assign data15=(wr & (wf_id==6'd15))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd15))?{1'b0,pc_read}:data_flop15;
>    assign data16=(wr & (wf_id==6'd16))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd16))?{1'b0,pc_read}:data_flop16;
>    assign data17=(wr & (wf_id==6'd17))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd17))?{1'b0,pc_read}:data_flop17;
>    assign data18=(wr & (wf_id==6'd18))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd18))?{1'b0,pc_read}:data_flop18;
>    assign data19=(wr & (wf_id==6'd19))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd19))?{1'b0,pc_read}:data_flop19;
>    assign data20=(wr & (wf_id==6'd20))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd20))?{1'b0,pc_read}:data_flop20;
>    assign data21=(wr & (wf_id==6'd21))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd21))?{1'b0,pc_read}:data_flop21;
>    assign data22=(wr & (wf_id==6'd22))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd22))?{1'b0,pc_read}:data_flop22;
>    assign data23=(wr & (wf_id==6'd23))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd23))?{1'b0,pc_read}:data_flop23;
>    assign data24=(wr & (wf_id==6'd24))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd24))?{1'b0,pc_read}:data_flop24;
>    assign data25=(wr & (wf_id==6'd25))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd25))?{1'b0,pc_read}:data_flop25;
>    assign data26=(wr & (wf_id==6'd26))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd26))?{1'b0,pc_read}:data_flop26;
>    assign data27=(wr & (wf_id==6'd27))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd27))?{1'b0,pc_read}:data_flop27;
>    assign data28=(wr & (wf_id==6'd28))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd28))?{1'b0,pc_read}:data_flop28;
>    assign data29=(wr & (wf_id==6'd29))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd29))?{1'b0,pc_read}:data_flop29;
>    assign data30=(wr & (wf_id==6'd30))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd30))?{1'b0,pc_read}:data_flop30;
>    assign data31=(wr & (wf_id==6'd31))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd31))?{1'b0,pc_read}:data_flop31;
>    assign data32=(wr & (wf_id==6'd32))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd32))?{1'b0,pc_read}:data_flop32;
>    assign data33=(wr & (wf_id==6'd33))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd33))?{1'b0,pc_read}:data_flop33;
>    assign data34=(wr & (wf_id==6'd34))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd34))?{1'b0,pc_read}:data_flop34;
>    assign data35=(wr & (wf_id==6'd35))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd35))?{1'b0,pc_read}:data_flop35;
>    assign data36=(wr & (wf_id==6'd36))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd36))?{1'b0,pc_read}:data_flop36;
>    assign data37=(wr & (wf_id==6'd37))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd37))?{1'b0,pc_read}:data_flop37;
>    assign data38=(wr & (wf_id==6'd38))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd38))?{1'b0,pc_read}:data_flop38;
>    assign data39=(wr & (wf_id==6'd39))? {1'b1,new_pc_init} :(rd_en & (wf_id_rd==6'd39))?{1'b0,pc_read}:data_flop39;
Only in ../../verilog/rtl/instr_buffer: build
diff -r ./issue/alu_issue_logic.v ../../verilog/rtl/issue/alu_issue_logic.v
4,7c4,7
<    issued_fu_valid, simd0_alu_select, simd1_alu_select,
<    simd2_alu_select, simd3_alu_select, simf0_alu_select,
<    simf1_alu_select, simf2_alu_select, simf3_alu_select,
<    lsu_lsu_select, salu_alu_select, issued_wfid,
---
>    c_issued_valid, c_simd0_alu_select, c_simd1_alu_select,
>    c_simd2_alu_select, c_simd3_alu_select, c_simf0_alu_select,
>    c_simf1_alu_select, c_simf2_alu_select, c_simf3_alu_select,
>    c_lsu_lsu_select, c_salu_alu_select, c_issued_wfid,
9,13c9,14
<    clk, rst, lsu_ready, salu_alu_ready, simf3_alu_ready,
<    simf2_alu_ready, simf1_alu_ready, simf0_alu_ready, simd3_alu_ready,
<    simd2_alu_ready, simd1_alu_ready, simd0_alu_ready, lsu_wf_valid,
<    simd_wf_valid, simf_wf_valid, salu_wf_valid, lsu_wf_chosen,
<    simd_wf_choosen, simf_wf_choosen, salu_wf_choosen
---
>    clk, rst, f_lsu_ready, f_salu_alu_ready, f_simf3_alu_ready,
>    f_simf2_alu_ready, f_simf1_alu_ready, f_simf0_alu_ready,
>    f_simd3_alu_ready, f_simd2_alu_ready, f_simd1_alu_ready,
>    f_simd0_alu_ready, lsu_wf_valid, simd_wf_valid, simf_wf_valid,
>    salu_wf_valid, lsu_wf_chosen, simd_wf_choosen, simf_wf_choosen,
>    salu_wf_choosen
18,22c19,23
<    input 		  lsu_ready, salu_alu_ready,
< 			  simf3_alu_ready,simf2_alu_ready,
< 			  simf1_alu_ready,simf0_alu_ready,
< 			  simd3_alu_ready,simd2_alu_ready,
< 			  simd1_alu_ready,simd0_alu_ready;
---
>    input 		  f_lsu_ready, f_salu_alu_ready,
> 			  f_simf3_alu_ready,f_simf2_alu_ready,
> 			  f_simf1_alu_ready,f_simf0_alu_ready,
> 			  f_simd3_alu_ready,f_simd2_alu_ready,
> 			  f_simd1_alu_ready,f_simd0_alu_ready;
28,33c29,34
<    output 		     issued_fu_valid;
<    output 		     simd0_alu_select, simd1_alu_select, 
< 			     simd2_alu_select, simd3_alu_select, 
< 			     simf0_alu_select, simf1_alu_select, 
< 			     simf2_alu_select, simf3_alu_select, 
< 			     lsu_lsu_select, salu_alu_select;
---
>    output 		     c_issued_valid;
>    output 		     c_simd0_alu_select, c_simd1_alu_select, 
> 			     c_simd2_alu_select, c_simd3_alu_select, 
> 			     c_simf0_alu_select, c_simf1_alu_select, 
> 			     c_simf2_alu_select, c_simf3_alu_select, 
> 			     c_lsu_lsu_select, c_salu_alu_select;
35c36
<    output [`WF_ID_LENGTH-1:0] issued_wfid;
---
>    output [`WF_ID_LENGTH-1:0] c_issued_wfid;
37c38
<    reg [`WF_ID_LENGTH-1:0] issued_wfid;
---
>    reg [`WF_ID_LENGTH-1:0] c_issued_wfid;
45c46
< 			  .wr_en(issued_fu_valid), .clk(clk), .rst(rst));
---
> 			  .wr_en(c_issued_valid), .clk(clk), .rst(rst));
48,53c49,54
<    reg 			     issued_fu_valid;
<    reg 			     simd0_alu_select, simd1_alu_select, 
< 			     simd2_alu_select, simd3_alu_select, 
< 			     simf0_alu_select, simf1_alu_select, 
< 			     simf2_alu_select, simf3_alu_select, 
< 			     lsu_lsu_select, salu_alu_select;
---
>    reg 			     c_issued_valid;
>    reg 			     c_simd0_alu_select, c_simd1_alu_select, 
> 			     c_simd2_alu_select, c_simd3_alu_select, 
> 			     c_simf0_alu_select, c_simf1_alu_select, 
> 			     c_simf2_alu_select, c_simf3_alu_select, 
> 			     c_lsu_lsu_select, c_salu_alu_select;
58,63c59,64
<    always @(last_fu_selected or lsu_ready
< 	    or lsu_wf_chosen or lsu_wf_valid or salu_alu_ready
< 	    or salu_wf_choosen or salu_wf_valid or simd0_alu_ready
< 	    or simd1_alu_ready or simd2_alu_ready or simd3_alu_ready
< 	    or simd_wf_choosen or simd_wf_valid or simf0_alu_ready
< 	    or simf1_alu_ready or simf2_alu_ready or simf3_alu_ready
---
>    always @(last_fu_selected or f_lsu_ready
> 	    or lsu_wf_chosen or lsu_wf_valid or f_salu_alu_ready
> 	    or salu_wf_choosen or salu_wf_valid or f_simd0_alu_ready
> 	    or f_simd1_alu_ready or f_simd2_alu_ready or f_simd3_alu_ready
> 	    or simd_wf_choosen or simd_wf_valid or f_simf0_alu_ready
> 	    or f_simf1_alu_ready or f_simf2_alu_ready or f_simf3_alu_ready
69,74c70,75
<       fu_ready_arry <= { (simd0_alu_ready | simd1_alu_ready | simd2_alu_ready | 
< 			 simd3_alu_ready) & simd_wf_valid,
< 			(simf0_alu_ready | simf1_alu_ready | simf2_alu_ready | 
< 			 simf3_alu_ready) & simf_wf_valid,
< 			lsu_ready & lsu_wf_valid,
< 			salu_alu_ready & salu_wf_valid };
---
>       fu_ready_arry <= { (f_simd0_alu_ready | f_simd1_alu_ready | f_simd2_alu_ready | 
> 			 f_simd3_alu_ready) & simd_wf_valid,
> 			(f_simf0_alu_ready | f_simf1_alu_ready | f_simf2_alu_ready | 
> 			 f_simf3_alu_ready) & simf_wf_valid,
> 			f_lsu_ready & lsu_wf_valid,
> 			f_salu_alu_ready & salu_wf_valid };
121c122
<       casex( { simd0_alu_ready,simd1_alu_ready,simd2_alu_ready,simd3_alu_ready} )
---
>       casex( { f_simd0_alu_ready,f_simd1_alu_ready,f_simd2_alu_ready,f_simd3_alu_ready} )
123,126c124,127
< 	   simd0_alu_select <= fu_selected_arry[3];
< 	   simd1_alu_select <= 1'b0;
< 	   simd2_alu_select <= 1'b0;
< 	   simd3_alu_select <= 1'b0;
---
> 	   c_simd0_alu_select <= fu_selected_arry[3];
> 	   c_simd1_alu_select <= 1'b0;
> 	   c_simd2_alu_select <= 1'b0;
> 	   c_simd3_alu_select <= 1'b0;
130,133c131,134
< 	   simd0_alu_select <= 1'b0;
< 	   simd1_alu_select <= fu_selected_arry[3];
< 	   simd2_alu_select <= 1'b0;
< 	   simd3_alu_select <= 1'b0;
---
> 	   c_simd0_alu_select <= 1'b0;
> 	   c_simd1_alu_select <= fu_selected_arry[3];
> 	   c_simd2_alu_select <= 1'b0;
> 	   c_simd3_alu_select <= 1'b0;
137,140c138,141
< 	   simd0_alu_select <= 1'b0;
< 	   simd1_alu_select <= 1'b0;
< 	   simd2_alu_select <= fu_selected_arry[3];
< 	   simd3_alu_select <= 1'b0;
---
> 	   c_simd0_alu_select <= 1'b0;
> 	   c_simd1_alu_select <= 1'b0;
> 	   c_simd2_alu_select <= fu_selected_arry[3];
> 	   c_simd3_alu_select <= 1'b0;
144,147c145,148
< 	   simd0_alu_select <= 1'b0;
< 	   simd1_alu_select <= 1'b0;
< 	   simd2_alu_select <= 1'b0;
< 	   simd3_alu_select <= fu_selected_arry[3];
---
> 	   c_simd0_alu_select <= 1'b0;
> 	   c_simd1_alu_select <= 1'b0;
> 	   c_simd2_alu_select <= 1'b0;
> 	   c_simd3_alu_select <= fu_selected_arry[3];
151,154c152,155
< 	   simd0_alu_select <= 1'b0;
< 	   simd1_alu_select <= 1'b0;
< 	   simd2_alu_select <= 1'b0;
< 	   simd3_alu_select <= 1'b0;
---
> 	   c_simd0_alu_select <= 1'b0;
> 	   c_simd1_alu_select <= 1'b0;
> 	   c_simd2_alu_select <= 1'b0;
> 	   c_simd3_alu_select <= 1'b0;
158c159
<       casex( { simf0_alu_ready,simf1_alu_ready,simf2_alu_ready,simf3_alu_ready} )
---
>       casex( { f_simf0_alu_ready,f_simf1_alu_ready,f_simf2_alu_ready,f_simf3_alu_ready} )
160,163c161,164
< 	   simf0_alu_select <= fu_selected_arry[2];
< 	   simf1_alu_select <= 1'b0;
< 	   simf2_alu_select <= 1'b0;
< 	   simf3_alu_select <= 1'b0;
---
> 	   c_simf0_alu_select <= fu_selected_arry[2];
> 	   c_simf1_alu_select <= 1'b0;
> 	   c_simf2_alu_select <= 1'b0;
> 	   c_simf3_alu_select <= 1'b0;
167,170c168,171
< 	   simf0_alu_select <= 1'b0;
< 	   simf1_alu_select <= fu_selected_arry[2];
< 	   simf2_alu_select <= 1'b0;
< 	   simf3_alu_select <= 1'b0;
---
> 	   c_simf0_alu_select <= 1'b0;
> 	   c_simf1_alu_select <= fu_selected_arry[2];
> 	   c_simf2_alu_select <= 1'b0;
> 	   c_simf3_alu_select <= 1'b0;
174,177c175,178
< 	   simf0_alu_select <= 1'b0;
< 	   simf1_alu_select <= 1'b0;
< 	   simf2_alu_select <= fu_selected_arry[2];
< 	   simf3_alu_select <= 1'b0;
---
> 	   c_simf0_alu_select <= 1'b0;
> 	   c_simf1_alu_select <= 1'b0;
> 	   c_simf2_alu_select <= fu_selected_arry[2];
> 	   c_simf3_alu_select <= 1'b0;
181,184c182,185
< 	   simf0_alu_select <= 1'b0;
< 	   simf1_alu_select <= 1'b0;
< 	   simf2_alu_select <= 1'b0;
< 	   simf3_alu_select <= fu_selected_arry[2];
---
> 	   c_simf0_alu_select <= 1'b0;
> 	   c_simf1_alu_select <= 1'b0;
> 	   c_simf2_alu_select <= 1'b0;
> 	   c_simf3_alu_select <= fu_selected_arry[2];
188,191c189,192
< 	   simf0_alu_select <= 1'b0;
< 	   simf1_alu_select <= 1'b0;
< 	   simf2_alu_select <= 1'b0;
< 	   simf3_alu_select <= 1'b0;
---
> 	   c_simf0_alu_select <= 1'b0;
> 	   c_simf1_alu_select <= 1'b0;
> 	   c_simf2_alu_select <= 1'b0;
> 	   c_simf3_alu_select <= 1'b0;
195,196c196,197
<       lsu_lsu_select <= fu_selected_arry[1];
<       salu_alu_select <= fu_selected_arry[0];
---
>       c_lsu_lsu_select <= fu_selected_arry[1];
>       c_salu_alu_select <= fu_selected_arry[0];
200,203c201,205
< 	4'b1000 : issued_wfid <= simd_wf_choosen;
< 	4'b0100 : issued_wfid <= simf_wf_choosen;
< 	4'b0010 : issued_wfid <= lsu_wf_chosen;
< 	4'b0001 : issued_wfid <= salu_wf_choosen;
---
> 	4'b1000 : c_issued_wfid <= simd_wf_choosen;
> 	4'b0100 : c_issued_wfid <= simf_wf_choosen;
> 	4'b0010 : c_issued_wfid <= lsu_wf_chosen;
> 	4'b0001 : c_issued_wfid <= salu_wf_choosen;
> 	default : c_issued_wfid <= {`WF_ID_LENGTH{1'bx}};
206c208
<       issued_fu_valid <= |fu_selected_arry;
---
>       c_issued_valid <= |fu_selected_arry;
Only in ../../verilog/rtl/issue: build
diff -r ./issue/finished_wf.v ../../verilog/rtl/issue/finished_wf.v
5c5
<    max_instr_inflight_array, no_instr_inflight_array,
---
>    max_instr_inflight_array,
8,10c8,10
<    f_vgpr_alu_wr_done_wfid, alu_wfid, f_salu_branch_wfid,
<    f_decode_valid, f_decode_wf_halt, f_vgpr_alu_wr_done,
<    f_sgpr_alu_wr_done, alu_valid, f_salu_branch_en, mem_wait_arry
---
>    f_vgpr_alu_wr_done_wfid, alu_wfid, f_salu_branch_wfid, f_decode_valid,
>    f_decode_wf_halt, f_vgpr_alu_wr_done, f_sgpr_alu_wr_done, alu_valid,
>    f_salu_branch_en, mem_wait_arry
23c23
<    output [`WF_PER_CU-1:0]    max_instr_inflight_array, no_instr_inflight_array;
---
>    output [`WF_PER_CU-1:0]    max_instr_inflight_array;
29,30c29
< 			      decoded_wf_done;
<    
---
> 			      decoded_wf_done, decoded_no_inflight_instr;
124c123
<       .no_inflight_instr_flag(no_instr_inflight_array),
---
>       .no_inflight_instr_flag(decoded_no_inflight_instr),
130c129
<    assign done_wf_array = halted_reg_out & no_instr_inflight_array & ~mem_wait_arry;
---
>    assign done_wf_array = halted_reg_out & decoded_no_inflight_instr & ~mem_wait_arry;
Only in ./issue: idemp_wait.v
diff -r ./issue/instr_info_table.v ../../verilog/rtl/issue/instr_info_table.v
6c6
<    sgpr_lsu_rd_data, issue_alu_rd_data, issue_lsu_rd_data,
---
>    sgpr_lsu_rd_data, issued_rd_data,
10,11c10
<    f_sgpr_alu_wr_done_wfid, f_sgpr_lsu_instr_done_wfid, alu_wfid,
<    lsu_wfid
---
>    f_sgpr_alu_wr_done_wfid, f_sgpr_lsu_instr_done_wfid, issued_wfid
22c21
< 				       alu_wfid, lsu_wfid;
---
> 				       issued_wfid;
25c24
< 					issue_alu_rd_data, issue_lsu_rd_data;
---
> 					issued_rd_data;
59,60d57
<    mux_40xPARAMb_to_1xPARAMb #(`ISSUE_INSTR_INFO_LENGTH) mux_rd4 
<      (.out(issue_alu_rd_data), .in(reg_out), .select(alu_wfid));
62c59
<      (.out(issue_lsu_rd_data), .in(reg_out), .select(lsu_wfid));
---
>      (.out(issued_rd_data), .in(reg_out), .select(issued_wfid));
diff -r ./issue/instruction_arbiter.v ../../verilog/rtl/issue/instruction_arbiter.v
7c7,8
<    salu_alu_select, lsu_wfid, alu_wfid, alu_valid, lsu_valid,
---
>    salu_alu_select, lsu_wfid, alu_wfid, issued_wfid, alu_valid,
>    lsu_valid, issued_valid,
30,31c31,34
<    output [`WF_ID_LENGTH-1:0] lsu_wfid, alu_wfid;
<    output 		      alu_valid, lsu_valid;
---
>    output [`WF_ID_LENGTH-1:0] lsu_wfid, alu_wfid, issued_wfid;
>    output 		      alu_valid, lsu_valid, issued_valid;
> 
>    wire [`WF_PER_CU-1:0]      c_issued_arry, issued_arry, inegible_wf_arry;
33,35c36,37
<    wire 		      lsu_wf_valid, salu_wf_valid, simd_wf_valid, simf_wf_valid;
<    wire [`WF_ID_LENGTH-1:0]   lsu_wf_chosen, salu_wf_choosen, simd_wf_choosen, simf_wf_choosen,
< 			      issued_wfid;
---
>    wire [`WF_PER_CU-1:0]      f_salu_ready_to_issue, f_simd_ready_to_issue,
> 			      f_simf_ready_to_issue, f_lsu_ready_to_issue;
36a39,51
>    wire 		      f_simd0_alu_ready, f_simd1_alu_ready, 
> 			      f_simd2_alu_ready, f_simd3_alu_ready, 
> 			      f_simf0_alu_ready, f_simf1_alu_ready, 
> 			      f_simf2_alu_ready, f_simf3_alu_ready, 
> 			      f_salu_alu_ready, f_lsu_ready;
> 
>    wire 		      c_simd0_alu_select, c_simd1_alu_select, 
> 			      c_simd2_alu_select, c_simd3_alu_select, 
> 			      c_simf0_alu_select, c_simf1_alu_select, 
> 			      c_simf2_alu_select, c_simf3_alu_select, 
> 			      c_lsu_lsu_select, c_salu_alu_select;
>    wire 		      c_issued_valid;
> 
38c53,109
<    wire 		      issued_fu_valid;
---
>    wire [`WF_ID_LENGTH-1:0]   c_issued_wfid;   
> 
>    decoder_6b_40b_en c_issued_decoder
>      (.addr_in(c_issued_wfid),
>       .en(c_issued_valid),
>       .out(c_issued_arry)
>       );
> 
>    decoder_6b_40b_en issued_decoder
>      (.addr_in(issued_wfid),
>       .en(issued_valid),
>       .out(issued_arry)
>       );
> 
>    // Hack: make sure the wf that are being chosen right now and the one
>    // that was chosen last cycle are not issued.
>    assign inegible_wf_arry = c_issued_arry | issued_arry;
>    
>    
>    dff input_flops[(40*4 + 10)-1:0]
>      (.d({salu_ready_to_issue & ~inegible_wf_arry, simd_ready_to_issue & ~inegible_wf_arry,
> 	  simf_ready_to_issue & ~inegible_wf_arry, lsu_ready_to_issue & ~inegible_wf_arry,
> 	  simd0_alu_ready, simd1_alu_ready, 
> 	  simd2_alu_ready, simd3_alu_ready, 
> 	  simf0_alu_ready, simf1_alu_ready, 
> 	  simf2_alu_ready, simf3_alu_ready, 
> 	  salu_alu_ready, lsu_ready}),
>       .q({f_salu_ready_to_issue, f_simd_ready_to_issue,
> 	  f_simf_ready_to_issue, f_lsu_ready_to_issue,
> 	  f_simd0_alu_ready, f_simd1_alu_ready, 
> 	  f_simd2_alu_ready, f_simd3_alu_ready, 
> 	  f_simf0_alu_ready, f_simf1_alu_ready, 
> 	  f_simf2_alu_ready, f_simf3_alu_ready, 
> 	  f_salu_alu_ready, f_lsu_ready}),
>       .clk(clk),
>       .rst(rst));
> 
>    dff output_flops[(6*1 + 11)-1:0]
>      (.d({c_simd0_alu_select, c_simd1_alu_select, 
> 	  c_simd2_alu_select, c_simd3_alu_select, 
> 	  c_simf0_alu_select, c_simf1_alu_select, 
> 	  c_simf2_alu_select, c_simf3_alu_select, 
> 	  c_lsu_lsu_select, c_salu_alu_select,
> 	  c_issued_wfid,
> 	  c_issued_valid}),
>       .q({simd0_alu_select, simd1_alu_select, 
> 	  simd2_alu_select, simd3_alu_select, 
> 	  simf0_alu_select, simf1_alu_select, 
> 	  simf2_alu_select, simf3_alu_select, 
> 	  lsu_lsu_select, salu_alu_select,
> 	  issued_wfid,
> 	  issued_valid}),
>       .clk(clk),
>       .rst(rst));
> 
>    wire 		      lsu_wf_valid, salu_wf_valid, simd_wf_valid, simf_wf_valid;
>    wire [`WF_ID_LENGTH-1:0]   lsu_wf_chosen, salu_wf_choosen, simd_wf_choosen, simf_wf_choosen;
45c116
<       .input_arry(lsu_ready_to_issue),
---
>       .input_arry(f_lsu_ready_to_issue),
47,48c118,119
<       .issued_en(issued_fu_valid),
<       .issued_wf_id(lsu_wfid),
---
>       .issued_en(c_issued_valid),
>       .issued_wf_id(c_issued_wfid),
58,60c129,131
<       .input_arry(salu_ready_to_issue),
<       .issued_en(issued_fu_valid),
<       .issued_wf_id(alu_wfid),
---
>       .input_arry(f_salu_ready_to_issue),
>       .issued_en(c_issued_valid),
>       .issued_wf_id(c_issued_wfid),
71c142
<       .input_arry(simd_ready_to_issue),
---
>       .input_arry(f_simd_ready_to_issue),
73,74c144,145
<       .issued_en(issued_fu_valid),
<       .issued_wf_id(alu_wfid),
---
>       .issued_en(c_issued_valid),
>       .issued_wf_id(c_issued_wfid),
85c156
<       .input_arry(simf_ready_to_issue),
---
>       .input_arry(f_simf_ready_to_issue),
87,88c158,159
<       .issued_en(issued_fu_valid),
<       .issued_wf_id(alu_wfid),
---
>       .issued_en(c_issued_valid),
>       .issued_wf_id(c_issued_wfid),
97,108c168,179
<       .issued_fu_valid			(issued_fu_valid),
<       .simd0_alu_select			(simd0_alu_select),
<       .simd1_alu_select			(simd1_alu_select),
<       .simd2_alu_select			(simd2_alu_select),
<       .simd3_alu_select			(simd3_alu_select),
<       .simf0_alu_select			(simf0_alu_select),
<       .simf1_alu_select			(simf1_alu_select),
<       .simf2_alu_select			(simf2_alu_select),
<       .simf3_alu_select			(simf3_alu_select),
<       .lsu_lsu_select			(lsu_lsu_select),
<       .salu_alu_select			(salu_alu_select),
<       .issued_wfid			(issued_wfid[`WF_ID_LENGTH-1:0]),
---
>       .c_issued_valid			(c_issued_valid),
>       .c_simd0_alu_select		(c_simd0_alu_select),
>       .c_simd1_alu_select		(c_simd1_alu_select),
>       .c_simd2_alu_select		(c_simd2_alu_select),
>       .c_simd3_alu_select		(c_simd3_alu_select),
>       .c_simf0_alu_select		(c_simf0_alu_select),
>       .c_simf1_alu_select		(c_simf1_alu_select),
>       .c_simf2_alu_select		(c_simf2_alu_select),
>       .c_simf3_alu_select		(c_simf3_alu_select),
>       .c_lsu_lsu_select			(c_lsu_lsu_select),
>       .c_salu_alu_select		(c_salu_alu_select),
>       .c_issued_wfid			(c_issued_wfid[`WF_ID_LENGTH-1:0]),
112,121c183,192
<       .lsu_ready			(lsu_ready),
<       .salu_alu_ready			(salu_alu_ready),
<       .simf3_alu_ready			(simf3_alu_ready),
<       .simf2_alu_ready			(simf2_alu_ready),
<       .simf1_alu_ready			(simf1_alu_ready),
<       .simf0_alu_ready			(simf0_alu_ready),
<       .simd3_alu_ready			(simd3_alu_ready),
<       .simd2_alu_ready			(simd2_alu_ready),
<       .simd1_alu_ready			(simd1_alu_ready),
<       .simd0_alu_ready			(simd0_alu_ready),
---
>       .f_lsu_ready			(f_lsu_ready),
>       .f_salu_alu_ready			(f_salu_alu_ready),
>       .f_simf3_alu_ready		(f_simf3_alu_ready),
>       .f_simf2_alu_ready		(f_simf2_alu_ready),
>       .f_simf1_alu_ready		(f_simf1_alu_ready),
>       .f_simf0_alu_ready		(f_simf0_alu_ready),
>       .f_simd3_alu_ready		(f_simd3_alu_ready),
>       .f_simd2_alu_ready		(f_simd2_alu_ready),
>       .f_simd1_alu_ready		(f_simd1_alu_ready),
>       .f_simd0_alu_ready		(f_simd0_alu_ready),
134,135c205,206
< 		      simd3_alu_select | simf0_alu_select | simf1_alu_select | 
< 		      simf2_alu_select | simf3_alu_select | salu_alu_select;
---
> 			simd3_alu_select | simf0_alu_select | simf1_alu_select | 
> 			simf2_alu_select | simf3_alu_select | salu_alu_select;
140d210
< 
diff -r ./issue/issue_flow_control.v ../../verilog/rtl/issue/issue_flow_control.v
7c7
<    idemp_wait_arry, tracemon_barrier_retire_wf_bitmap, f_decode_wfid,
---
>    tracemon_barrier_retire_wf_bitmap, f_decode_wfid,
14c14
<    input [`WF_PER_CU-1:0] valid_entry_out, idemp_wait_arry;
---
>    input [`WF_PER_CU-1:0] valid_entry_out;
25,26c25
<    wire [`WF_PER_CU-1:0]     flopped_idemp_wait_arry;
<    
---
> 			     
70,77d68
<    dff idemp_wait_flop[`WF_PER_CU-1:0]
<      (
<       .q(flopped_idemp_wait_arry),
<       .d(idemp_wait_arry),
<       .clk(clk),
<       .rst(rst)
<       );
< 
87d77
< 	  ( (idemp_wait_arry ^ flopped_idemp_wait_arry) & flopped_idemp_wait_arry ) |
diff -r ./issue/issue.interface ../../verilog/rtl/issue/issue.interface
68,70d67
<       mem2cu_page_fault_en,
<       mem2cu_page_fault_tag,
<       decode_idemp_barrier,
112,114d108
<       fetch_recover_pc,
<       fetchwavedecode_recover_en,
<       fetchwavedecode_recover_wfid,
131c125
<          salu_branch_taken, mem2cu_page_fault_en, decode_idemp_barrier;
---
>          salu_branch_taken;
137d130
< input[6:0] mem2cu_page_fault_tag;
148c141
<          tracemon_waitcnt_retire_en, fetchwavedecode_recover_en;
---
>          tracemon_waitcnt_retire_en;
150c143
<          tracemon_waitcnt_retire_wfid, fetchwavedecode_recover_wfid;
---
>          tracemon_waitcnt_retire_wfid;
156,157c149
<          alu_instr_pc, lsu_instr_pc, tracemon_barrier_retire_pc, tracemon_waitcnt_retire_pc,
<          fetch_recover_pc;
---
>          alu_instr_pc, lsu_instr_pc, tracemon_barrier_retire_pc, tracemon_waitcnt_retire_pc;
diff -r ./issue/issue.v ../../verilog/rtl/issue/issue.v
8,17c8,16
<    tracemon_waitcnt_retire_en, fetchwavedecode_recover_en, lsu_wfid,
<    alu_wfid, fetchwave_wf_done_wf_id, fetch_wg_wfid,
<    tracemon_waitcnt_retire_wfid, fetchwavedecode_recover_wfid,
<    lsu_source_reg1, lsu_source_reg2, lsu_source_reg3, lsu_dest_reg,
<    lsu_mem_sgpr, alu_source_reg1, alu_source_reg2, alu_source_reg3,
<    alu_dest_reg1, alu_dest_reg2, lsu_imm_value0, lsu_lds_base,
<    alu_imm_value0, lsu_imm_value1, lsu_opcode, alu_imm_value1,
<    alu_opcode, alu_instr_pc, lsu_instr_pc, tracemon_barrier_retire_pc,
<    tracemon_waitcnt_retire_pc, fetch_recover_pc, wave_valid_entries,
<    tracemon_barrier_retire_wf_bitmap,
---
>    tracemon_waitcnt_retire_en, lsu_wfid, alu_wfid,
>    fetchwave_wf_done_wf_id, fetch_wg_wfid,
>    tracemon_waitcnt_retire_wfid, lsu_source_reg1, lsu_source_reg2,
>    lsu_source_reg3, lsu_dest_reg, lsu_mem_sgpr, alu_source_reg1,
>    alu_source_reg2, alu_source_reg3, alu_dest_reg1, alu_dest_reg2,
>    lsu_imm_value0, alu_imm_value0, lsu_lds_base, lsu_imm_value1,
>    lsu_opcode, alu_imm_value1, alu_opcode, alu_instr_pc, lsu_instr_pc,
>    tracemon_waitcnt_retire_pc, tracemon_barrier_retire_pc,
>    wave_valid_entries, tracemon_barrier_retire_wf_bitmap,
22c21
<    decode_waitcnt, decode_valid, vgpr_alu_wr_done,
---
>    decode_valid, decode_waitcnt, vgpr_alu_wr_done,
29,35c28,33
<    salu_branch_en, salu_branch_taken, mem2cu_page_fault_en,
<    decode_idemp_barrier, decode_fu, sgpr_alu_dest_reg_valid,
<    vgpr_lsu_dest_reg_valid, sgpr_lsu_dest_reg_valid,
<    fetch_wg_wf_count, decode_wfid, vgpr_alu_wr_done_wfid,
<    vgpr_lsu_wr_done_wfid, sgpr_alu_wr_done_wfid,
<    sgpr_lsu_instr_done_wfid, exec_salu_wr_wfid, exec_valu_wr_vcc_wfid,
<    fetch_wg_wgid, salu_branch_wfid, mem2cu_page_fault_tag,
---
>    salu_branch_en, salu_branch_taken, decode_fu,
>    sgpr_alu_dest_reg_valid, vgpr_lsu_dest_reg_valid,
>    sgpr_lsu_dest_reg_valid, fetch_wg_wf_count, decode_wfid,
>    vgpr_alu_wr_done_wfid, vgpr_lsu_wr_done_wfid,
>    sgpr_alu_wr_done_wfid, sgpr_lsu_instr_done_wfid, exec_salu_wr_wfid,
>    exec_valu_wr_vcc_wfid, fetch_wg_wgid, salu_branch_wfid,
50c48,49
<          decode_wf_halt, decode_waitcnt, decode_valid, vgpr_alu_wr_done, vgpr_alu_dest_reg_valid,
---
>          decode_wf_halt, decode_valid, decode_waitcnt, 
> 	 vgpr_alu_wr_done, vgpr_alu_dest_reg_valid,
52,56c51,55
<          simd0_alu_ready, simd1_alu_ready, simd2_alu_ready, simd3_alu_ready,
<          simf0_alu_ready, simf1_alu_ready, simf2_alu_ready, simf3_alu_ready,
<          salu_alu_ready, lsu_ready, exec_salu_wr_vcc_en, exec_salu_wr_exec_en,
<          exec_salu_wr_scc_en, exec_salu_wr_m0_en, exec_valu_wr_vcc_en, salu_branch_en,
<          salu_branch_taken, mem2cu_page_fault_en, decode_idemp_barrier;
---
> 	 simd0_alu_ready, simd1_alu_ready, simd2_alu_ready, simd3_alu_ready, 
> 	 simf0_alu_ready, simf1_alu_ready, simf2_alu_ready, simf3_alu_ready, 
> 	 salu_alu_ready, lsu_ready,
> 	 exec_salu_wr_vcc_en, exec_salu_wr_exec_en, exec_salu_wr_scc_en, exec_salu_wr_m0_en,
>          exec_valu_wr_vcc_en, salu_branch_en, salu_branch_taken;
62d60
<    input [6:0] mem2cu_page_fault_tag;
73c71
< 		tracemon_waitcnt_retire_en, fetchwavedecode_recover_en;
---
> 		tracemon_waitcnt_retire_en;
75c73
< 		tracemon_waitcnt_retire_wfid, fetchwavedecode_recover_wfid;
---
> 		tracemon_waitcnt_retire_wfid;
79c77
<    output [15:0] lsu_imm_value0, lsu_lds_base, alu_imm_value0;
---
>    output [15:0] lsu_imm_value0, alu_imm_value0, lsu_lds_base;
81,82c79,82
< 		 alu_instr_pc, lsu_instr_pc, tracemon_barrier_retire_pc, tracemon_waitcnt_retire_pc,
< 		 fetch_recover_pc;
---
> 		 alu_instr_pc, lsu_instr_pc, tracemon_waitcnt_retire_pc, tracemon_barrier_retire_pc;
>    output [39:0] wave_valid_entries;
> 
>    output [39:0] tracemon_barrier_retire_wf_bitmap;
84,91d83
<    output [39:0] wave_valid_entries, tracemon_barrier_retire_wf_bitmap;
< /** new signals: to be flopped
<  input:
<  decode_idemp_barrier, mem2cu_page_fault_en,
<  mem2cu_page_fault_tag
<  outputs:
<  fetchwavedecode_recover_en, fetchwavedecode_recover_wfid, fetch_recover_pc
<  **/
102,103c94
< 		 f_exec_valu_wr_vcc_en, f_salu_branch_en, f_salu_branch_taken,
< 		 f_decode_idemp_barrier, f_mem2cu_page_fault_en; //28
---
> 		 f_exec_valu_wr_vcc_en, f_salu_branch_en, f_salu_branch_taken; //26
105c96
<    wire [1:0] 	 f_decode_fu, f_sgpr_alu_dest_reg_valid; // 2
---
>    wire [1:0] 	 f_decode_fu, f_sgpr_alu_dest_reg_valid; //2
110,112d100
< 
<    wire [6:0] 	 f_mem2cu_page_fault_tag; // 1
<    
125c113,115
<    
---
>    wire 	 issued_valid;
>    wire [`WF_ID_LENGTH-1:0] issued_wfid;
>  
133,134c123
< 			    barrier_wait_arry, max_instr_inflight_array, 
< 			    idemp_wait_arry, no_instr_inflight_array;
---
> 			    barrier_wait_arry, max_instr_inflight_array;
138c127
<    dff input_flops[28 + 2*2 + 4*2 + 6*8 + 7*1 + 9*3 + 10*2 + 13*3 + 14*3 + 16*2 + 32*3 - 1 : 0]
---
>    dff input_flops[26 + 2*2 + 4*2 + 6*8 + 9*3 + 10*2 + 13*3 + 14*3 + 16*2 + 32*3 - 1 : 0]
155,157c144
< 	  vgpr_lsu_dest_reg_valid, vgpr_lsu_wr_done, vgpr_lsu_wr_done_wfid,
< 	  decode_idemp_barrier, mem2cu_page_fault_en, mem2cu_page_fault_tag
< 	  }
---
> 	  vgpr_lsu_dest_reg_valid, vgpr_lsu_wr_done, vgpr_lsu_wr_done_wfid}
177,179c164
< 	  f_vgpr_lsu_wr_done_wfid, f_decode_idemp_barrier, f_mem2cu_page_fault_en, 
< 	  f_mem2cu_page_fault_tag
< 	  }
---
> 	  f_vgpr_lsu_wr_done_wfid}
202,203c187
<       .lsu_valid			(lsu_valid),
<       .alu_valid			(alu_valid),
---
>       .issued_valid			(issued_valid),
205d188
<       .f_decode_idemp_barrier		(f_decode_idemp_barrier),
207,208c190
<       .lsu_wfid				(lsu_wfid[`WF_ID_LENGTH-1:0]),
<       .alu_wfid				(alu_wfid[`WF_ID_LENGTH-1:0]),
---
>       .issued_wfid			(issued_wfid[`WF_ID_LENGTH-1:0]),
235d216
<       .idemp_wait_arry			(idemp_wait_arry[`WF_PER_CU-1:0]),
294,295c275
<       .lsu_wfid				(lsu_wfid[`WF_ID_LENGTH-1:0]),
<       .alu_wfid				(alu_wfid[`WF_ID_LENGTH-1:0]),
---
>       .issued_wfid			(issued_wfid[`WF_ID_LENGTH-1:0]),
319c299,300
<       .lsu_valid			(lsu_valid));
---
>       .lsu_valid			(lsu_valid),
>       .issued_valid			(issued_valid));
324,325c305
< 				~pending_branches_arry & ~barrier_wait_arry &
< 				~idemp_wait_arry;
---
> 				~pending_branches_arry & ~barrier_wait_arry;
330,331c310
< 				~pending_branches_arry & ~barrier_wait_arry  &
< 				~idemp_wait_arry;
---
> 				~pending_branches_arry & ~barrier_wait_arry;
336,337c315
<    				~pending_branches_arry & ~barrier_wait_arry  &
< 				~idemp_wait_arry;
---
>    				~pending_branches_arry & ~barrier_wait_arry;
343,344c321
< 			       ~pending_branches_arry & ~barrier_wait_arry  &
< 			       ~idemp_wait_arry;
---
> 			       ~pending_branches_arry & ~barrier_wait_arry;
361a339
>       .issued_wfid			(issued_wfid[`WF_ID_LENGTH-1:0]),
363a342
>       .issued_valid			(issued_valid),
426,443d404
< 
<    idemp_wait idemp_wait
<      (/*AUTOINST*/
<       // Outputs
<       .fetchwavedecode_recover_en	(fetchwavedecode_recover_en),
<       .fetchwavedecode_recover_wfid	(fetchwavedecode_recover_wfid[`WF_ID_LENGTH-1:0]),
<       .fetch_recover_pc			(fetch_recover_pc[31:0]),
<       .idemp_wait_arry			(idemp_wait_arry[`WF_PER_CU-1:0]),
<       // Inputs
<       .clk				(clk),
<       .rst				(rst),
<       .f_decode_valid			(f_decode_valid),
<       .f_decode_idemp_barrier		(f_decode_idemp_barrier),
<       .f_mem2cu_page_fault_en		(f_mem2cu_page_fault_en),
<       .f_mem2cu_page_fault_tag		(f_mem2cu_page_fault_tag[6:0]),
<       .no_instr_inflight_array		(no_instr_inflight_array[`WF_PER_CU-1:0]),
<       .f_decode_wfid			(f_decode_wfid[`WF_ID_LENGTH-1:0]),
<       .f_decode_instr_pc		(f_decode_instr_pc[31:0]));
451d411
<       .no_instr_inflight_array		(no_instr_inflight_array[`WF_PER_CU-1:0]),
diff -r ./issue/scoreboard.v ../../verilog/rtl/issue/scoreboard.v
11,19c11,21
<    clk, rst, f_decode_source_reg2, f_decode_source_reg3, f_decode_dest_reg2,
<    f_decode_source_reg1, f_decode_source_reg4, f_decode_dest_reg1,
<    f_decode_imm_value0, f_decode_lds_base, f_decode_instr_pc, f_decode_opcode,
<    f_decode_imm_value1, f_decode_vcc_wr, f_decode_vcc_rd, f_decode_scc_wr,
<    f_decode_scc_rd, f_decode_exec_rd, f_decode_exec_wr, f_decode_m0_rd,
<    f_decode_m0_wr, f_decode_branch, f_decode_valid, lsu_wfid, alu_wfid,
<    f_decode_wfid, f_vgpr_alu_wr_done_wfid, f_vgpr_lsu_wr_done_wfid,
<    f_sgpr_alu_wr_done_wfid, f_sgpr_lsu_instr_done_wfid, f_exec_salu_wr_wfid,
<    f_exec_valu_wr_vcc_wfid, f_exec_salu_wr_vcc_en, f_exec_salu_wr_exec_en,
---
>    clk, rst, f_decode_source_reg2, f_decode_source_reg3,
>    f_decode_dest_reg2, f_decode_source_reg1, f_decode_source_reg4,
>    f_decode_dest_reg1, f_decode_imm_value0, f_decode_lds_base,
>    f_decode_instr_pc, f_decode_opcode, f_decode_imm_value1,
>    f_decode_vcc_wr, f_decode_vcc_rd, f_decode_scc_wr, f_decode_scc_rd,
>    f_decode_exec_rd, f_decode_exec_wr, f_decode_m0_rd, f_decode_m0_wr,
>    f_decode_branch, f_decode_valid, issued_wfid, f_decode_wfid,
>    f_vgpr_alu_wr_done_wfid, f_vgpr_lsu_wr_done_wfid,
>    f_sgpr_alu_wr_done_wfid, f_sgpr_lsu_instr_done_wfid,
>    f_exec_salu_wr_wfid, f_exec_valu_wr_vcc_wfid,
>    f_exec_salu_wr_vcc_en, f_exec_salu_wr_exec_en,
26c28
<    lsu_valid
---
>    lsu_valid, issued_valid
41c43
<    input [`WF_ID_LENGTH-1:0] 	    lsu_wfid, alu_wfid;	    
---
>    input [`WF_ID_LENGTH-1:0] 	    issued_wfid;	    
59c61
<    input 			     alu_valid, lsu_valid;
---
>    input 			    alu_valid, lsu_valid, issued_valid;
75c77
<    wire [`ISSUE_INSTR_INFO_LENGTH-1:0] issue_alu_rd_data, issue_lsu_rd_data;
---
>    wire [`ISSUE_INSTR_INFO_LENGTH-1:0] issued_rd_data;
107,108d108
< 
< 
116,117c116
<       .issue_alu_rd_data		(issue_alu_rd_data[`ISSUE_INSTR_INFO_LENGTH-1:0]),
<       .issue_lsu_rd_data		(issue_lsu_rd_data[`ISSUE_INSTR_INFO_LENGTH-1:0]),
---
>       .issued_rd_data			(issued_rd_data[`ISSUE_INSTR_INFO_LENGTH-1:0]),
127,129c126,127
<       .f_sgpr_lsu_instr_done_wfid		(f_sgpr_lsu_instr_done_wfid[`WF_ID_LENGTH-1:0]),
<       .alu_wfid				(alu_wfid[`WF_ID_LENGTH-1:0]),
<       .lsu_wfid				(lsu_wfid[`WF_ID_LENGTH-1:0]));
---
>       .f_sgpr_lsu_instr_done_wfid	(f_sgpr_lsu_instr_done_wfid[`WF_ID_LENGTH-1:0]),
>       .issued_wfid			(issued_wfid[`WF_ID_LENGTH-1:0]));
141,172c139,170
<    assign lsu_lds_base = issue_lsu_rd_data[`ISSUE_LDS_BASE_H:`ISSUE_LDS_BASE_L];
<    assign lsu_opcode = issue_lsu_rd_data[`ISSUE_OP_H:`ISSUE_OP_L];
<    assign lsu_instr_pc  = issue_lsu_rd_data[`ISSUE_PC_H:`ISSUE_PC_L];
<    assign lsu_imm_value0  = issue_lsu_rd_data[`ISSUE_IM0_H:`ISSUE_IM0_L];
<    assign lsu_imm_value1  = issue_lsu_rd_data[`ISSUE_IM1_H:`ISSUE_IM1_L];
<    assign lsu_source_reg1  = issue_lsu_rd_data[`ISSUE_SRC1_H-2:`ISSUE_SRC1_L];
<    assign lsu_source_reg2  = issue_lsu_rd_data[`ISSUE_SRC2_H-1:`ISSUE_SRC2_L];
<    assign lsu_source_reg3  = issue_lsu_rd_data[`ISSUE_SRC3_H-1:`ISSUE_SRC3_L];
<    assign lsu_dest_reg_size = issue_lsu_rd_data[`ISSUE_DST1_H:`ISSUE_DST1_H-1];
<    assign lsu_dest_reg  = issue_lsu_rd_data[`ISSUE_DST1_H-2:`ISSUE_DST1_L];
<    assign lsu_mem_sgpr  = issue_lsu_rd_data[`ISSUE_SRC4_H-2:`ISSUE_SRC4_L];
<    assign issue_lsu_vcc_wr = issue_lsu_rd_data[`ISSUE_VCC_WR];
<    assign issue_lsu_scc_wr = issue_lsu_rd_data[`ISSUE_SCC_WR];
<    assign issue_lsu_m0_wr = issue_lsu_rd_data[`ISSUE_M0_WR];
<    assign issue_lsu_exec_wr = issue_lsu_rd_data[`ISSUE_EXEC_WR];
<    
<    assign alu_opcode  = issue_alu_rd_data[`ISSUE_OP_H:`ISSUE_OP_L];
<    assign alu_instr_pc  = issue_alu_rd_data[`ISSUE_PC_H:`ISSUE_PC_L];
<    assign alu_imm_value0  = issue_alu_rd_data[`ISSUE_IM0_H:`ISSUE_IM0_L];
<    assign alu_imm_value1  = issue_alu_rd_data[`ISSUE_IM1_H:`ISSUE_IM1_L];
<    assign alu_source_reg1  = issue_alu_rd_data[`ISSUE_SRC1_H-2:`ISSUE_SRC1_L];
<    assign alu_source_reg2  = issue_alu_rd_data[`ISSUE_SRC2_H-1:`ISSUE_SRC2_L];
<    assign alu_source_reg3  = issue_alu_rd_data[`ISSUE_SRC3_H-1:`ISSUE_SRC3_L];
<    assign alu_dest_reg1_size = issue_alu_rd_data[`ISSUE_DST1_H-1];
<    assign alu_dest_reg1  = issue_alu_rd_data[`ISSUE_DST1_H-2:`ISSUE_DST1_L];
<    assign alu_dest_reg2_size = issue_alu_rd_data[`ISSUE_DST2_H];
<    assign alu_dest_reg2  = issue_alu_rd_data[`ISSUE_DST2_H-1:`ISSUE_DST2_L];
<    assign issue_alu_vcc_wr = issue_alu_rd_data[`ISSUE_VCC_WR];
<    assign issue_alu_scc_wr = issue_alu_rd_data[`ISSUE_SCC_WR];
<    assign issue_alu_m0_wr = issue_alu_rd_data[`ISSUE_M0_WR];
<    assign issue_alu_exec_wr = issue_alu_rd_data[`ISSUE_EXEC_WR];
<    assign alu_branch = issue_alu_rd_data[`ISSUE_BRANCH];
---
>    assign lsu_lds_base = issued_rd_data[`ISSUE_LDS_BASE_H:`ISSUE_LDS_BASE_L];
>    assign lsu_opcode = issued_rd_data[`ISSUE_OP_H:`ISSUE_OP_L];
>    assign lsu_instr_pc  = issued_rd_data[`ISSUE_PC_H:`ISSUE_PC_L];
>    assign lsu_imm_value0  = issued_rd_data[`ISSUE_IM0_H:`ISSUE_IM0_L];
>    assign lsu_imm_value1  = issued_rd_data[`ISSUE_IM1_H:`ISSUE_IM1_L];
>    assign lsu_source_reg1  = issued_rd_data[`ISSUE_SRC1_H-2:`ISSUE_SRC1_L];
>    assign lsu_source_reg2  = issued_rd_data[`ISSUE_SRC2_H-1:`ISSUE_SRC2_L];
>    assign lsu_source_reg3  = issued_rd_data[`ISSUE_SRC3_H-1:`ISSUE_SRC3_L];
>    assign lsu_dest_reg_size = issued_rd_data[`ISSUE_DST1_H:`ISSUE_DST1_H-1];
>    assign lsu_dest_reg  = issued_rd_data[`ISSUE_DST1_H-2:`ISSUE_DST1_L];
>    assign lsu_mem_sgpr  = issued_rd_data[`ISSUE_SRC4_H-2:`ISSUE_SRC4_L];
>    assign issue_lsu_vcc_wr = issued_rd_data[`ISSUE_VCC_WR];
>    assign issue_lsu_scc_wr = issued_rd_data[`ISSUE_SCC_WR];
>    assign issue_lsu_m0_wr = issued_rd_data[`ISSUE_M0_WR];
>    assign issue_lsu_exec_wr = issued_rd_data[`ISSUE_EXEC_WR];
>    
>    assign alu_opcode  = issued_rd_data[`ISSUE_OP_H:`ISSUE_OP_L];
>    assign alu_instr_pc  = issued_rd_data[`ISSUE_PC_H:`ISSUE_PC_L];
>    assign alu_imm_value0  = issued_rd_data[`ISSUE_IM0_H:`ISSUE_IM0_L];
>    assign alu_imm_value1  = issued_rd_data[`ISSUE_IM1_H:`ISSUE_IM1_L];
>    assign alu_source_reg1  = issued_rd_data[`ISSUE_SRC1_H-2:`ISSUE_SRC1_L];
>    assign alu_source_reg2  = issued_rd_data[`ISSUE_SRC2_H-1:`ISSUE_SRC2_L];
>    assign alu_source_reg3  = issued_rd_data[`ISSUE_SRC3_H-1:`ISSUE_SRC3_L];
>    assign alu_dest_reg1_size = issued_rd_data[`ISSUE_DST1_H-1];
>    assign alu_dest_reg1  = issued_rd_data[`ISSUE_DST1_H-2:`ISSUE_DST1_L];
>    assign alu_dest_reg2_size = issued_rd_data[`ISSUE_DST2_H];
>    assign alu_dest_reg2  = issued_rd_data[`ISSUE_DST2_H-1:`ISSUE_DST2_L];
>    assign issue_alu_vcc_wr = issued_rd_data[`ISSUE_VCC_WR];
>    assign issue_alu_scc_wr = issued_rd_data[`ISSUE_SCC_WR];
>    assign issue_alu_m0_wr = issued_rd_data[`ISSUE_M0_WR];
>    assign issue_alu_exec_wr = issued_rd_data[`ISSUE_EXEC_WR];
>    assign alu_branch = issued_rd_data[`ISSUE_BRANCH];
191,192c189,190
<       .f_decode_dest_reg2			(f_decode_dest_reg2[`OPERAND_LENGTH_2WORD-1:0]),
<       .f_decode_dest_reg1			(f_decode_dest_reg1[`OPERAND_LENGTH_4WORD-1:0]),
---
>       .f_decode_dest_reg2		(f_decode_dest_reg2[`OPERAND_LENGTH_2WORD-1:0]),
>       .f_decode_dest_reg1		(f_decode_dest_reg1[`OPERAND_LENGTH_4WORD-1:0]),
203,204c201,202
<       .f_vgpr_lsu_dest_reg_valid		(f_vgpr_lsu_dest_reg_valid[3:0]),
<       .f_vgpr_alu_dest_reg_valid		(f_vgpr_alu_dest_reg_valid),
---
>       .f_vgpr_lsu_dest_reg_valid	(f_vgpr_lsu_dest_reg_valid[3:0]),
>       .f_vgpr_alu_dest_reg_valid	(f_vgpr_alu_dest_reg_valid),
208,210c206,208
<       .f_sgpr_lsu_dest_reg_valid		(f_sgpr_lsu_dest_reg_valid[3:0]),
<       .f_sgpr_alu_dest_reg_valid		(f_sgpr_alu_dest_reg_valid[1:0]),
<       .f_sgpr_valu_dest_reg_valid		(f_sgpr_valu_dest_reg_valid));
---
>       .f_sgpr_lsu_dest_reg_valid	(f_sgpr_lsu_dest_reg_valid[3:0]),
>       .f_sgpr_alu_dest_reg_valid	(f_sgpr_alu_dest_reg_valid[1:0]),
>       .f_sgpr_valu_dest_reg_valid	(f_sgpr_valu_dest_reg_valid));
310c308
<       .f_sgpr_lsu_instr_done_wfid		(f_sgpr_lsu_instr_done_wfid[`WF_ID_LENGTH-1:0]),
---
>       .f_sgpr_lsu_instr_done_wfid	(f_sgpr_lsu_instr_done_wfid[`WF_ID_LENGTH-1:0]),
330,331c328
<       .lsu_wfid				(lsu_wfid[`WF_ID_LENGTH-1:0]),
<       .alu_wfid				(alu_wfid[`WF_ID_LENGTH-1:0]),
---
>       .issued_wfid			(issued_wfid[`WF_ID_LENGTH-1:0]),
345a343
>       .alu_valid			(alu_valid),
346a345
>       .issued_valid			(issued_valid),
351d349
<       .alu_valid			(alu_valid),
diff -r ./issue/spr_dependency_table.v ../../verilog/rtl/issue/spr_dependency_table.v
6,13c6,15
<    f_decode_wfid, f_exec_salu_wr_wfid, f_exec_valu_wr_vcc_wfid, lsu_wfid,
<    alu_wfid, f_decode_valid, f_decode_vcc_wr, f_decode_vcc_rd,
<    f_decode_scc_wr, f_decode_scc_rd, f_decode_exec_rd, f_decode_exec_wr,
<    f_decode_m0_rd, f_decode_m0_wr, f_exec_salu_wr_vcc_en,
<    f_exec_salu_wr_exec_en, f_exec_salu_wr_scc_en, f_exec_salu_wr_m0_en,
<    f_exec_valu_wr_vcc_en, lsu_valid, issue_lsu_vcc_wr, issue_lsu_scc_wr,
<    issue_lsu_exec_wr, issue_lsu_m0_wr, alu_valid, issue_alu_vcc_wr,
<    issue_alu_scc_wr, issue_alu_exec_wr, issue_alu_m0_wr, clk, rst
---
>    f_decode_wfid, f_exec_salu_wr_wfid, f_exec_valu_wr_vcc_wfid,
>    issued_wfid, f_decode_valid, f_decode_vcc_wr, f_decode_vcc_rd,
>    f_decode_scc_wr, f_decode_scc_rd, f_decode_exec_rd,
>    f_decode_exec_wr, f_decode_m0_rd, f_decode_m0_wr,
>    f_exec_salu_wr_vcc_en, f_exec_salu_wr_exec_en,
>    f_exec_salu_wr_scc_en, f_exec_salu_wr_m0_en, f_exec_valu_wr_vcc_en,
>    alu_valid, lsu_valid, issued_valid, issue_lsu_vcc_wr,
>    issue_lsu_scc_wr, issue_lsu_exec_wr, issue_lsu_m0_wr,
>    issue_alu_vcc_wr, issue_alu_scc_wr, issue_alu_exec_wr,
>    issue_alu_m0_wr, clk, rst
17c19
< 			   lsu_wfid, alu_wfid;
---
> 			   issued_wfid;
27c29,30
<    input 		   lsu_valid, issue_lsu_vcc_wr, issue_lsu_scc_wr, 
---
>    input 		   alu_valid, lsu_valid,
> 			   issued_valid, issue_lsu_vcc_wr, issue_lsu_scc_wr, 
29c32
< 			   alu_valid, issue_alu_vcc_wr, issue_alu_scc_wr, 
---
> 			   issue_alu_vcc_wr, issue_alu_scc_wr, 
61c64
<    wire [`WF_PER_CU-1:0] exec_issued_lsu_decoded, exec_issued_alu_decoded;
---
>    wire [`WF_PER_CU-1:0] exec_issued_decoded;
63c66
<    wire 		exec_issued_lsu_decoder_en, exec_issued_alu_decoder_en;
---
>    wire 		exec_issued_decoder_en;
84,87c87,90
<    decoder_6b_40b_en exec_issued_lsu_decoder(
< 					     .addr_in(lsu_wfid),
< 					     .en(exec_issued_lsu_decoder_en),
< 					     .out(exec_issued_lsu_decoded)
---
>    decoder_6b_40b_en exec_issued_decoder(
> 					     .addr_in(issued_wfid),
> 					     .en(exec_issued_decoder_en),
> 					     .out(exec_issued_decoded)
90,97c93,94
<    decoder_6b_40b_en exec_issued_alu_decoder(
< 					     .addr_in(alu_wfid),
< 					     .en(exec_issued_alu_decoder_en),
< 					     .out(exec_issued_alu_decoded)
< 					     );
< 
<    assign exec_issued_alu_decoder_en = issue_alu_exec_wr && alu_valid;
<    assign exec_issued_lsu_decoder_en = issue_lsu_exec_wr && lsu_valid;
---
>    assign exec_issued_decoder_en = (issue_alu_exec_wr && alu_valid) | 
> 				       (issue_lsu_exec_wr && lsu_valid);
100c97
< 				   (exec_issued_lsu_decoded | exec_issued_alu_decoded )  ) & ( ~exec_retired_salu_decoded );
---
> 				   (exec_issued_decoded)  ) & ( ~exec_retired_salu_decoded );
126c123
<    wire [`WF_PER_CU-1:0] m0_issued_lsu_decoded, m0_issued_alu_decoded;
---
>    wire [`WF_PER_CU-1:0] m0_issued_decoded;
128c125
<    wire 		m0_issued_lsu_decoder_en, m0_issued_alu_decoder_en;
---
>    wire 		m0_issued_decoder_en;
149,158c146,149
<    decoder_6b_40b_en m0_issued_lsu_decoder(
< 					     .addr_in(lsu_wfid),
< 					     .en(m0_issued_lsu_decoder_en),
< 					     .out(m0_issued_lsu_decoded)
< 					     );
< 
<    decoder_6b_40b_en m0_issued_alu_decoder(
< 					     .addr_in(alu_wfid),
< 					     .en(m0_issued_alu_decoder_en),
< 					     .out(m0_issued_alu_decoded)
---
>    decoder_6b_40b_en m0_issued_decoder(
> 					     .addr_in(issued_wfid),
> 					     .en(m0_issued_decoder_en),
> 					     .out(m0_issued_decoded)
161,162c152,153
<    assign m0_issued_alu_decoder_en = issue_alu_m0_wr && alu_valid;
<    assign m0_issued_lsu_decoder_en = issue_lsu_m0_wr && lsu_valid;
---
>    assign m0_issued_decoder_en = (issue_alu_m0_wr && alu_valid) |
> 				     (issue_lsu_m0_wr && lsu_valid);
165c156
< 				 (m0_issued_lsu_decoded | m0_issued_alu_decoded ) ) & ( ~m0_retired_salu_decoded );
---
> 				 (m0_issued_decoded) ) & ( ~m0_retired_salu_decoded );
191c182
<    wire [`WF_PER_CU-1:0] scc_issued_lsu_decoded, scc_issued_alu_decoded;
---
>    wire [`WF_PER_CU-1:0] scc_issued_decoded;
193c184
<    wire 		scc_issued_lsu_decoder_en, scc_issued_alu_decoder_en;
---
>    wire 		scc_issued_decoder_en;
214,217c205,208
<    decoder_6b_40b_en scc_issued_lsu_decoder(
< 					     .addr_in(lsu_wfid),
< 					     .en(scc_issued_lsu_decoder_en),
< 					     .out(scc_issued_lsu_decoded)
---
>    decoder_6b_40b_en scc_issued_decoder(
> 					     .addr_in(issued_wfid),
> 					     .en(scc_issued_decoder_en),
> 					     .out(scc_issued_decoded)
220,227c211,212
<    decoder_6b_40b_en scc_issued_alu_decoder(
< 					     .addr_in(alu_wfid),
< 					     .en(scc_issued_alu_decoder_en),
< 					     .out(scc_issued_alu_decoded)
< 					     );
< 
<    assign scc_issued_alu_decoder_en = issue_alu_scc_wr && alu_valid;
<    assign scc_issued_lsu_decoder_en = issue_lsu_scc_wr && lsu_valid;
---
>    assign scc_issued_decoder_en = (issue_alu_scc_wr && alu_valid) |
> 				      (issue_lsu_scc_wr && lsu_valid);
230c215
< 				  (scc_issued_lsu_decoded | scc_issued_alu_decoded ) ) & ( ~scc_retired_salu_decoded );
---
> 				  (scc_issued_decoded) ) & ( ~scc_retired_salu_decoded );
257c242
<    wire [`WF_PER_CU-1:0] vcc_issued_lsu_decoded, vcc_issued_alu_decoded;
---
>    wire [`WF_PER_CU-1:0] vcc_issued_decoded;
259c244
<    wire 		vcc_issued_lsu_decoder_en, vcc_issued_alu_decoder_en;
---
>    wire 		vcc_issued_decoder_en;
286,295c271,274
<    decoder_6b_40b_en vcc_issued_lsu_decoder(
< 					     .addr_in(lsu_wfid),
< 					     .en(vcc_issued_lsu_decoder_en),
< 					     .out(vcc_issued_lsu_decoded)
< 					     );
< 
<    decoder_6b_40b_en vcc_issued_alu_decoder(
< 					     .addr_in(alu_wfid),
< 					     .en(vcc_issued_alu_decoder_en),
< 					     .out(vcc_issued_alu_decoded)
---
>    decoder_6b_40b_en vcc_issued_decoder(
> 					.addr_in(issued_wfid),
> 					.en(vcc_issued_decoder_en),
> 					.out(vcc_issued_decoded)
298,299c277,278
<    assign vcc_issued_alu_decoder_en = issue_alu_vcc_wr && alu_valid;
<    assign vcc_issued_lsu_decoder_en = issue_lsu_vcc_wr && lsu_valid;
---
>    assign vcc_issued_decoder_en = (issue_alu_vcc_wr && alu_valid) |
> 				  (issue_lsu_vcc_wr && lsu_valid);
302c281
< 				  (vcc_issued_lsu_decoded | vcc_issued_alu_decoded ) ) & ( ~vcc_retired_salu_decoded & ~vcc_retired_valu_decoded );
---
> 				  (vcc_issued_decoded) ) & ( ~vcc_retired_salu_decoded & ~vcc_retired_valu_decoded );
diff -r ./issue/valid_entry.v ../../verilog/rtl/issue/valid_entry.v
7,9c7,8
<    f_salu_branch_en, f_salu_branch_taken, lsu_valid, alu_valid,
<    f_decode_waitcnt, f_decode_idemp_barrier, f_decode_wfid, lsu_wfid,
<    alu_wfid, f_salu_branch_wfid
---
>    f_salu_branch_en, f_salu_branch_taken, issued_valid,
>    f_decode_waitcnt, f_decode_wfid, issued_wfid, f_salu_branch_wfid
16,18c15,17
< 	 f_salu_branch_en, f_salu_branch_taken, lsu_valid, alu_valid,
< 	 f_decode_waitcnt, f_decode_idemp_barrier;
<    input [`WF_ID_LENGTH-1:0] f_decode_wfid, lsu_wfid, alu_wfid, 
---
> 	 f_salu_branch_en, f_salu_branch_taken, issued_valid,
> 	 f_decode_waitcnt;
>    input [`WF_ID_LENGTH-1:0] f_decode_wfid, issued_wfid, 
22,23c21,22
<    wire [`WF_PER_CU-1:0]     decoded_init_instr, decoded_lsu_issue, 
< 			     decoded_alu_issue, decoded_branch_taken,
---
>    wire [`WF_PER_CU-1:0]     decoded_init_instr, decoded_issued,
> 			     decoded_branch_taken,
28,29d26
<    assign decode_init_en = f_decode_valid & ~f_decode_wf_halt & ~f_decode_barrier & ~f_decode_waitcnt & ~f_decode_idemp_barrier;
< 
36,45c33,36
<    decoder_6b_40b_en lsu_issue_decoder(
< 				       .addr_in(lsu_wfid),
< 				       .out(decoded_lsu_issue),
< 				       .en(lsu_valid)
< 				       );
< 
<    decoder_6b_40b_en alu_issue_decoder(
< 				       .addr_in(alu_wfid),
< 				       .out(decoded_alu_issue),
< 				       .en(alu_valid)
---
>    decoder_6b_40b_en instr_issued_decoder(
> 				       .addr_in(issued_wfid),
> 				       .out(decoded_issued),
> 				       .en(issued_valid)
61a53
>    assign decode_init_en = f_decode_valid & ~f_decode_wf_halt & ~f_decode_barrier & ~f_decode_waitcnt;
64c56
< 			     ~(decoded_alu_issue | decoded_lsu_issue | decoded_branch_taken);
---
> 			     ~(decoded_issued | decoded_branch_taken);
Only in ../../verilog/rtl/lsu: build
diff -r ./lsu/lsu_rd_stage_router.v ../../verilog/rtl/lsu/lsu_rd_stage_router.v
114a115,121
>          default:
>             begin
>                out_vgpr_source1_addr <= 10'bx;
>                out_vgpr_source2_addr <= 10'bx;
>                out_sgpr_source1_addr <= 9'bx;
>                out_sgpr_source2_addr <= 9'bx;
>             end
Only in ../../verilog/rtl/memory: build
diff -r ./memory/memory.vp ../../verilog/rtl/memory/memory.vp
1,56c1,56
< module memory
<   (/*AUTOARG*/
<    // Outputs
<    ack, tracemon_store_en, output_tag, tracemon_addr, rd_data,
<    tracemon_store_data, mem2cu_page_fault_en, mem2cu_page_fault_tag,
<    // Inputs
<    clk, rst, gm_or_lds, rd_en, wr_en, input_tag, wr_mask, addresses,
<    wr_data
<    );
< 
<    parameter NUMOFCU = 1;
< 
<    input clk;
<    input rst;
< 
<    input [(NUMOFCU - 1):0] gm_or_lds;
<    input [(NUMOFCU*4 - 1):0] rd_en, wr_en;
<    input [(NUMOFCU*7 - 1):0] input_tag;
<    input [(NUMOFCU*64 - 1):0] wr_mask;
<    input [(NUMOFCU*2048 - 1):0] addresses;
<    input [(NUMOFCU*8192 - 1):0] wr_data;
< 
<    output [(NUMOFCU - 1):0] 	ack;
<    output [(NUMOFCU*4 - 1):0] 	tracemon_store_en;
<    output [(NUMOFCU*7 - 1):0] 	output_tag;
<    output [(NUMOFCU*2048 - 1):0] tracemon_addr;
<    output [(NUMOFCU*8192 - 1):0] rd_data, tracemon_store_data;
<    output [(NUMOFCU - 1):0] 	 mem2cu_page_fault_en;
<    output [(NUMOFCU*6 - 1):0] 	 mem2cu_page_fault_tag;
<    
< 	       
<    reg [(NUMOFCU - 1):0] 	 ack;
<    reg [(NUMOFCU*4 - 1):0] 	 tracemon_store_en, tracemon_store_en_buff;
<    reg [(NUMOFCU*7 - 1):0] 	 output_tag;
<    reg [(NUMOFCU*2048 - 1):0] 	 tracemon_addr, tracemon_addr_buff;
<    reg [(NUMOFCU*8192 - 1):0] 	 rd_data, tracemon_store_data, tracemon_store_data_buff;
<    reg [(NUMOFCU - 1):0] 	 mem2cu_page_fault_en;
<    reg [(NUMOFCU*7 - 1):0] 	 mem2cu_page_fault_tag;
< 
<    reg [7:0] 			 data_memory[50000:0];
<    reg [7:0] 			 lds_memory[(NUMOFCU*65536 -1):0];
< 
<    ///////////////////////////////
< 				 //Your code goes here - beware: script does not recognize changes
<    // into files. It ovewrites everithing without mercy. Save your work before running the script
<    ///////////////////////////////
< 
<    integer 			 i, j, k, m;
<    integer 			 locrd = 16; // num of loc to read
<    integer 			 addr_index, data_index;
< 
<    always @ (posedge clk) begin
<       mem2cu_page_fault_en = {(NUMOFCU){1'b0}};
<       mem2cu_page_fault_tag = {(NUMOFCU*7){1'b0}};
<    
<      if (~rst) begin
---
> module memory(
>       gm_or_lds,
>       rd_en,
>       wr_en,
>       addresses,
>       wr_data,
>       input_tag,
>       wr_mask,
>       rd_data,
>       output_tag,
>       ack,
>       tracemon_addr,
>       tracemon_store_data,
>       tracemon_store_en,
>       clk,
>       rst
>  );
> 
> parameter NUMOFCU = 1;
> 
> input clk;
> input rst;
> 
> input [(NUMOFCU - 1):0] gm_or_lds;
> input [(NUMOFCU*4 - 1):0] rd_en, wr_en;
> input [(NUMOFCU*7 - 1):0] input_tag;
> input [(NUMOFCU*64 - 1):0] wr_mask;
> input [(NUMOFCU*2048 - 1):0] addresses;
> input [(NUMOFCU*8192 - 1):0] wr_data;
> 
> output [(NUMOFCU - 1):0] ack;
> output [(NUMOFCU*4 - 1):0] tracemon_store_en;
> output [(NUMOFCU*7 - 1):0] output_tag;
> output [(NUMOFCU*2048 - 1):0] tracemon_addr;
> output [(NUMOFCU*8192 - 1):0] rd_data, tracemon_store_data;
> 
> reg [(NUMOFCU - 1):0] ack;
> reg [(NUMOFCU*4 - 1):0] tracemon_store_en, tracemon_store_en_buff;
> reg [(NUMOFCU*7 - 1):0] output_tag;
> reg [(NUMOFCU*2048 - 1):0] tracemon_addr, tracemon_addr_buff;
> reg [(NUMOFCU*8192 - 1):0] rd_data, tracemon_store_data, tracemon_store_data_buff;
> 
> reg[7:0] data_memory[50000:0];
> reg[7:0] lds_memory[(NUMOFCU*65536 -1):0];
> 
> ///////////////////////////////
> //Your code goes here - beware: script does not recognize changes
> // into files. It ovewrites everithing without mercy. Save your work before running the script
> ///////////////////////////////
> 
> integer i, j, k, m;
> integer locrd = 16; // num of loc to read
> integer addr_index, data_index;
> 
> always @ (posedge clk)
>     if (~rst) begin
62,66c62
< 	   // If reading from current CU
<            if (rd_en[(4*i+3)-:4]) begin
< 
<               for(k=0; k<64; k=k+1) begin
<                  addr_index = i*2048 + k*32 +31;
---
>             if (rd_en[(4*i+3)-:4]) begin
68,92c64,65
<                  for(j=0; j<locrd; j=j+1) begin
<                     data_index = i*8192 + k*locrd*8 + j*8 + 7; // 8 bits per location
<                     if(gm_or_lds[i])
<                       rd_data[data_index-:8] =
< 					      lds_memory[i*65536 + (addresses[addr_index-:32]) + j];
<                     else
<                       rd_data[data_index-:8] =
< 					      data_memory[(addresses[addr_index-:32]) + j];
<                  end
<               end
< 
< 	      // Randomly add exception here - at exception assert ack - read with dummy value
< 	      //if( $random%100 == 0 ) begin
< 		// mem2cu_page_fault_en[i] = 1;
< 		// mem2cu_page_fault_tag[i*7 + 6:i*7] = input_tag[[i*7 + 6:i*7]];
< 	      //end
<               output_tag[(i*7 + 6)-:7] = input_tag[(i*7 + 6)-:7];
<               tracemon_addr_buff[(i*2048 + 2047)-:2048] = addresses[(i*2048 + 2047)-:2048];
<               ack[i] = 1'b1;
<            end
< 
<            if (|wr_en[(i*4+3)-:4]) begin
<               for(k=0; k<64; k=k+1) begin
<                  if(wr_mask[i*64 + k]) begin
<                     addr_index = i*2048 + k*32 + 31;
---
>                 for(k=0; k<64; k=k+1) begin
>                     addr_index = i*2048 + k*32 +31;
95,104c68,74
<                        data_index = i*8192 + k*locrd*8 + j*8 + 7; // 8 bits per location
<                        m = int(j / 4);
<                        if (wr_en[4*i + m]) begin
<                           if(gm_or_lds[i])
<                             lds_memory[i*65536 + (addresses[addr_index-:32]) + j] =
< 										   wr_data[data_index-:8];
<                           else
<                             data_memory[(addresses[addr_index-:32]) + j] =
< 									  wr_data[data_index-:8];
<                        end
---
>                         data_index = i*8192 + k*locrd*8 + j*8 + 7; // 8 bits per location
>                         if(gm_or_lds[i])
>                             rd_data[data_index-:8] =
>                                 lds_memory[i*65536 + (addresses[addr_index-:32]) + j];
>                         else
>                             rd_data[data_index-:8] =
>                                 data_memory[(addresses[addr_index-:32]) + j];
106,107c76
<                  end
<               end
---
>                 end
109,114c78,108
<               output_tag[(i*7 + 6)-:7] = input_tag[(i*7 + 6)-:7];
<               tracemon_addr_buff[(i*2048 + 2047)-:2048] = addresses[(i*2048 + 2047)-:2048];
<               tracemon_store_en_buff[(i*4 + 3)-:4] = wr_en[(i*4 + 3)-:4];
<               tracemon_store_data_buff[(i*8192 + 8191)-:8192] = wr_data[(i*8192 + 8191)-:8192];
<               ack[i] = 1'b1;
<            end
---
>                 output_tag[(i*7 + 6)-:7] = input_tag[(i*7 + 6)-:7];
>                 tracemon_addr_buff[(i*2048 + 2047)-:2048] = addresses[(i*2048 + 2047)-:2048];
>                 ack[i] = 1'b1;
>             end
> 
>             if (|wr_en[(i*4+3)-:4]) begin
>                 for(k=0; k<64; k=k+1) begin
>                     if(wr_mask[i*64 + k]) begin
>                         addr_index = i*2048 + k*32 + 31;
> 
>                         for(j=0; j<locrd; j=j+1) begin
>                             data_index = i*8192 + k*locrd*8 + j*8 + 7; // 8 bits per location
>                             m = int(j / 4);
>                             if (wr_en[4*i + m]) begin
>                                 if(gm_or_lds[i])
>                                     lds_memory[i*65536 + (addresses[addr_index-:32]) + j] =
>                                         wr_data[data_index-:8];
>                                 else
>                                     data_memory[(addresses[addr_index-:32]) + j] =
>                                         wr_data[data_index-:8];
>                             end
>                         end
>                     end
>                 end
> 
>                 output_tag[(i*7 + 6)-:7] = input_tag[(i*7 + 6)-:7];
>                 tracemon_addr_buff[(i*2048 + 2047)-:2048] = addresses[(i*2048 + 2047)-:2048];
>                 tracemon_store_en_buff[(i*4 + 3)-:4] = wr_en[(i*4 + 3)-:4];
>                 tracemon_store_data_buff[(i*8192 + 8191)-:8192] = wr_data[(i*8192 + 8191)-:8192];
>                 ack[i] = 1'b1;
>             end
116,122c110,117
<      end
<    end
<    always @ (posedge clk)
<      for(i = 0; i < NUMOFCU; i++) begin
< 	if (rst | (~(|rd_en[(i*4+3)-:4]) & ~(|wr_en[(i*4+3)-:4]))) begin
< 	   output_tag[(i*7 + 6)-:7] = 7'bx;
< 	   ack[i] = 1'b0;
---
>     end
> 
> always @ (posedge clk)
> 	for(i = 0; i < NUMOFCU; i++) begin
> 		if (rst | (~(|rd_en[(i*4+3)-:4]) & ~(|wr_en[(i*4+3)-:4]))) begin
> 			output_tag[(i*7 + 6)-:7] = 7'bx;
> 			ack[i] = 1'b0;
> 		end
124d118
<      end
Only in ../../verilog/rtl/rfa: build
Only in ../../verilog/rtl/salu: build
diff -r ./salu/scalar_alu.v ../../verilog/rtl/salu/scalar_alu.v
43a44
>             out_hi = 32'bx;
55a57
>                 default : begin out_low = 32'bx; end
66c68,71
<                 24'h000003 : begin out_low = s1_low; end
---
>                 24'h000003 : begin
>                                out_low = s1_low;
>                                out_hi = 32'bx;
>                              end
70c75,78
<                 24'h000007 : begin out_low = ~s1_low; end
---
>                 24'h000007 : begin
>                                out_low = ~s1_low;
>                                out_hi = 32'bx;
>                              end
74c82,85
<                 default : begin out_low = 32'bx; end
---
>                 default : begin
>                                out_low = 32'bx;
>                                out_hi = 32'bx;
>                           end
84a96
>                     out_hi = 32'bx;
89a102
>                     out_hi = 32'bx;
94a108
>                     out_hi = 32'bx;
99a114
>                     out_hi = 32'bx;
105a121
>                     out_hi = 32'bx;
111a128
>                     out_hi = 32'bx;
117a135
>                     out_hi = 32'bx;
129a148
>                     out_hi = 32'bx;
141a161
>                     out_hi = 32'bx;
147a168
>                     out_hi = 32'bx;
153a175
>                     out_hi = 32'bx;
159a182
>                     out_hi = 32'bx;
164a188
>                     out_hi = 32'bx;
176c200,202
<                 24'h000000 : begin infogen = s1_low == s2_low; end
---
>                 24'h000000 : begin infogen = s1_low == s2_low;
>                                    out_hi = 32'bx;
>                              end
179a206
>                       begin
180a208,209
>                         out_hi = 32'bx;
>                       end
181a211
>                       begin
182a213,214
>                         out_hi = 32'bx;
>                       end
183a216
>                       begin
185c218,224
<                     else infogen = s1_low <= s2_low;
---
>                         out_hi = 32'bx;
>                       end
>                     else
>                       begin
>                         infogen = s1_low <= s2_low;
>                         out_hi = 32'bx;
>                       end
188c227,229
<                 24'h000009 : begin infogen = s1_low >= s2_low; end
---
>                 24'h000009 : begin infogen = s1_low >= s2_low;
>                                    out_hi = 32'bx;
>                              end
190c231,233
<                 24'h00000B : begin infogen = s1_low <= s2_low; end
---
>                 24'h00000B : begin infogen = s1_low <= s2_low;
>                                    out_hi = 32'bx;
>                              end
192c235,237
<                 default : begin infogen = 1'bx; end
---
>                 default : begin infogen = 1'bx;
>                                 out_hi = 32'bx;
>                           end
203a249
>                     out_hi = 32'bx;
208a255
>                     out_hi = 32'bx;
213a261
>                     out_hi = 32'bx;
219a268
>                     out_hi = 32'bx;
226a276
>             out_hi = 32'bx;
Only in ../../verilog/rtl/sgpr: build
Only in ../../verilog/rtl/simd: build
diff -r ./simd/simd_alu.v ../../verilog/rtl/simd/simd_alu.v
533,541c533,542
<    // Booth multiplier from openrisc
<    amultp2_32x32 amultp2_32x32
<      (
<       .X(mul_inp0_s),
<       .Y(mul_inp1_s),
<       .RST(rst),
<       .CLK(clk),
<       .P(mul_out_s)
<       );
---
>   // Booth multiplier from openrisc
>   // amultp2_32x32 amultp2_32x32
>   //   (
>   //    .X(mul_inp0_s),
>   //    .Y(mul_inp1_s),
>   //    .RST(rst),
>   //    .CLK(clk),
>   //    .P(mul_out_s)
>   //    );
>   assign mul_out_s = mul_inp0_s * mul_inp1_s;
Only in ../../verilog/rtl/simf: build
Only in ./: #test.txt#
Only in ./: test.txt
Only in ../../verilog/rtl/tracemon: build
Only in ../../verilog/rtl/vgpr: build
Only in ../../verilog/rtl/wavepool: build
diff -r ./wavepool/wavepool_controller.v ../../verilog/rtl/wavepool/wavepool_controller.v
1,10c1,23
< module wavepool_controller 
< (/*AUTOARG*/
<    // Outputs
<    q_wr, q_vtail_incr, q_reset, q_rd, valid_wf, decode_wfid,
<    decode_instr_valid,
<    // Inputs
<    buff_wfid, buff_first, buff_ack, reserve_slotid, reserve_valid,
<    halt_wfid, wf_halt, branch_wfid, branch_en, branch_taken,
<    recover_en, recover_wfid, feed_wfid, feed_valid, clk, rst
<    );
---
> module wavepool_controller (
>   buff_wfid,
>   buff_first,
>   buff_ack,
>   q_wr,
>   reserve_slotid,
>   reserve_valid,
>   q_vtail_incr,
>   halt_wfid,
>   wf_halt,
>   branch_wfid,
>   branch_en,
>   branch_taken,
>   q_reset,
>   feed_wfid,
>   feed_valid,
>   q_rd,
>   valid_wf,
>   decode_wfid,
>   decode_instr_valid,
>   clk,
>   rst
> );
26,30d38
< 
<    input recover_en;
<    input [5:0] recover_wfid;
<    
<   
51,52d58
<    wire [39:0] recover_temp_q_reset;
<    
67d72
< decoder_6_to_40 dec_q_reset_recover(.out(recover_temp_q_reset), .in(recover_wfid));
69c74
< assign q_reset = (halt_temp_q_reset & {40{wf_halt}}) | (branch_temp_q_reset & {40{branch_taken_en}}) | (recover_temp_q_reset & {40{recover_en}});
---
> assign q_reset = (halt_temp_q_reset & {40{wf_halt}}) | (branch_temp_q_reset & {40{branch_taken_en}});
diff -r ./wavepool/wavepool.interface ../../verilog/rtl/wavepool/wavepool.interface
20,21d19
<       issue_recover_en,
<       issue_recover_wfid,
39c37
<          salu_branch_en, salu_branch_taken, decode_ins_half_rqd, issue_recover_en;
---
>          salu_branch_en, salu_branch_taken, decode_ins_half_rqd;
41c39
<          salu_branch_wfid, decode_ins_half_wfid, issue_recover_wfid;
---
>          salu_branch_wfid, decode_ins_half_wfid;
diff -r ./wavepool/wavepool.vp ../../verilog/rtl/wavepool/wavepool.vp
1,163c1,152
< module wavepool
<   ( 
<     fetch_reserve_slotid,
<     fetch_reserve_valid,
<     fetch_basereg_wr,
<     fetch_basereg_wfid,
<     fetch_vgpr_base,
<     fetch_sgpr_base,
<     fetch_lds_base,
<     issue_valid_entries,
<     buff_tag,
<     buff_instr,
<     buff2fetchwave_ack,
<     issue_wf_done_en,
<     issue_wf_done_wf_id,
<     salu_branch_wfid,
<     salu_branch_en,
<     salu_branch_taken,
<     decode_ins_half_rqd,
<     decode_ins_half_wfid,
<     issue_recover_en,
<     issue_recover_wfid,
<     fetch_stop_fetch,
<     decode_instr_valid,
<     decode_instr,
<     decode_wfid,
<     decode_vgpr_base,
<     decode_sgpr_base,
<     decode_lds_base,
<     decode_instr_pc,
<     clk,
<     rst
<     );
< 
<    input clk;
< 
<    input rst;
< 
<    input fetch_reserve_valid, fetch_basereg_wr, buff2fetchwave_ack, issue_wf_done_en,
<          salu_branch_en, salu_branch_taken, decode_ins_half_rqd, issue_recover_en;
<    input [5:0] fetch_reserve_slotid, fetch_basereg_wfid, issue_wf_done_wf_id,
<                salu_branch_wfid, decode_ins_half_wfid, issue_recover_wfid;
<    input [8:0] fetch_sgpr_base;
<    input [9:0] fetch_vgpr_base;
<    input [15:0] fetch_lds_base;
<    input [31:0] buff_instr;
<    input [38:0] buff_tag;
<    input [39:0] issue_valid_entries;
< 
<    output 	decode_instr_valid;
<    output [5:0] decode_wfid;
<    output [8:0] decode_sgpr_base;
<    output [9:0] decode_vgpr_base;
<    output [15:0] decode_lds_base;
<    output [31:0] decode_instr, decode_instr_pc;
<    output [39:0] fetch_stop_fetch;
< 
<    ///////////////////////////////
<    //Your code goes here - beware: script does not recognize changes
<    // into files. It ovewrites everithing without mercy. 
<    // Save your work before running the script
<    ///////////////////////////////
< 
<    wire [5:0] 	 flopped_buff_wfid;
<    wire [63:0] 	 flopped_buff_instr_pc;
<    wire 	 flopped_buff_first;
<    wire 	 flopped_buff_ack;
< 
<    wire [5:0] 	 feed_wfid;
<    wire 	 feed_valid;
< 
<    wire [39:0] 	 valid_wf;
< 
<    wire [39:0] 	 q_wr;
<    wire [39:0] 	 q_vtail_incr;
<    wire [39:0] 	 q_reset;
<    wire [39:0] 	 q_rd;
<    wire [39:0] 	 q_empty;
< 
<    PS_flops_fetch_wavepool PS_flops
<      (
<       .buff_tag(buff_tag),
<       .buff_instr(buff_instr),
<       .buff_ack(buff2fetchwave_ack),
<       .flopped_buff_wfid(flopped_buff_wfid),
<       .flopped_buff_instr_pc(flopped_buff_instr_pc),
<       .flopped_buff_first(flopped_buff_first),
<       .flopped_buff_ack(flopped_buff_ack),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    wavepool_controller cntrl
<      (
<       .buff_wfid(flopped_buff_wfid),
<       .buff_first(flopped_buff_first),
<       .buff_ack(flopped_buff_ack),
<       .q_wr(q_wr),
<       .reserve_slotid(fetch_reserve_slotid),
<       .reserve_valid(fetch_reserve_valid),
<       .q_vtail_incr(q_vtail_incr),
<       .halt_wfid(issue_wf_done_wf_id),
<       .wf_halt(issue_wf_done_en),
<       .branch_wfid(salu_branch_wfid),
<       .branch_en(salu_branch_en),
<       .branch_taken(salu_branch_taken),
<       .recover_en(issue_recover_en),
<       .recover_wfid(issue_recover_wfid),
<       .q_reset(q_reset),
<       .feed_wfid(feed_wfid),
<       .feed_valid(feed_valid),
<       .q_rd(q_rd),
<       .valid_wf(valid_wf),
<       .decode_wfid(decode_wfid),
<       .decode_instr_valid(decode_instr_valid),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    scbd_feeder feeder
<      (
<       .valid_wf(valid_wf),
<       .ins_half_reqd(decode_ins_half_rqd),
<       .ins_half_wfid(decode_ins_half_wfid),
<       .issue_vacant(issue_valid_entries),
<       .q_empty(q_empty),
<       .q_reset(q_reset),
<       .feed_valid(feed_valid),
<       .feed_wfid(feed_wfid),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    wq_pool pool
<      (
<       .q_vtail_incr(q_vtail_incr),
<       .q_rd(q_rd),
<       .q_wr(q_wr),
<       .q_reset(q_reset),
<       .q_empty(q_empty),
<       .stop_fetch(fetch_stop_fetch),
<       .instr_pc_in(flopped_buff_instr_pc),
<       .instr_pc_out({decode_instr,decode_instr_pc}),
<       .wf_select(decode_wfid),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    reg_40x35b_1r_1w base_regs
<      (
<       .rd_addr(decode_wfid),
<       .rd_data({decode_vgpr_base,decode_sgpr_base,decode_lds_base}),
<       .wr_en(fetch_basereg_wr),
<       .wr_addr(fetch_basereg_wfid),
<       .wr_data({fetch_vgpr_base,fetch_sgpr_base,fetch_lds_base}),
<       .clk(clk),
<       .rst(rst)
<       );
< 
<    ///////////////////////////////
<    //Your code goes here - beware: script does not recognize changes
<    // into files. It ovewrites everithing without mercy. Save your work before running the script
<    ///////////////////////////////
---
> module wavepool( 
>       fetch_reserve_slotid,
>       fetch_reserve_valid,
>       fetch_basereg_wr,
>       fetch_basereg_wfid,
>       fetch_vgpr_base,
>       fetch_sgpr_base,
>       fetch_lds_base,
>       issue_valid_entries,
>       buff_tag,
>       buff_instr,
>       buff2fetchwave_ack,
>       issue_wf_done_en,
>       issue_wf_done_wf_id,
>       salu_branch_wfid,
>       salu_branch_en,
>       salu_branch_taken,
>       decode_ins_half_rqd,
>       decode_ins_half_wfid,
>       fetch_stop_fetch,
>       decode_instr_valid,
>       decode_instr,
>       decode_wfid,
>       decode_vgpr_base,
>       decode_sgpr_base,
>       decode_lds_base,
>       decode_instr_pc,
>       clk,
>       rst
>  );
> 
> input clk;
> 
> input rst;
> 
> input fetch_reserve_valid, fetch_basereg_wr, buff2fetchwave_ack, issue_wf_done_en,
>          salu_branch_en, salu_branch_taken, decode_ins_half_rqd;
> input[5:0] fetch_reserve_slotid, fetch_basereg_wfid, issue_wf_done_wf_id,
>          salu_branch_wfid, decode_ins_half_wfid;
> input[8:0] fetch_sgpr_base;
> input[9:0] fetch_vgpr_base;
> input[15:0] fetch_lds_base;
> input[31:0] buff_instr;
> input[38:0] buff_tag;
> input[39:0] issue_valid_entries;
> 
> output decode_instr_valid;
> output[5:0] decode_wfid;
> output[8:0] decode_sgpr_base;
> output[9:0] decode_vgpr_base;
> output[15:0] decode_lds_base;
> output[31:0] decode_instr, decode_instr_pc;
> output[39:0] fetch_stop_fetch;
> 
> ///////////////////////////////
> //Your code goes here - beware: script does not recognize changes
> // into files. It ovewrites everithing without mercy. Save your work before running the script
> ///////////////////////////////
> 
> wire [5:0] flopped_buff_wfid;
> wire [63:0] flopped_buff_instr_pc;
> wire flopped_buff_first;
> wire flopped_buff_ack;
> 
> wire [5:0] feed_wfid;
> wire feed_valid;
> 
> wire [39:0] valid_wf;
> 
> wire [39:0] q_wr;
> wire [39:0] q_vtail_incr;
> wire [39:0] q_reset;
> wire [39:0] q_rd;
> wire [39:0] q_empty;
> 
> PS_flops_fetch_wavepool PS_flops(
>   .buff_tag(buff_tag),
>   .buff_instr(buff_instr),
>   .buff_ack(buff2fetchwave_ack),
>   .flopped_buff_wfid(flopped_buff_wfid),
>   .flopped_buff_instr_pc(flopped_buff_instr_pc),
>   .flopped_buff_first(flopped_buff_first),
>   .flopped_buff_ack(flopped_buff_ack),
>   .clk(clk),
>   .rst(rst)
> );
> 
> wavepool_controller cntrl(
>   .buff_wfid(flopped_buff_wfid),
>   .buff_first(flopped_buff_first),
>   .buff_ack(flopped_buff_ack),
>   .q_wr(q_wr),
>   .reserve_slotid(fetch_reserve_slotid),
>   .reserve_valid(fetch_reserve_valid),
>   .q_vtail_incr(q_vtail_incr),
>   .halt_wfid(issue_wf_done_wf_id),
>   .wf_halt(issue_wf_done_en),
>   .branch_wfid(salu_branch_wfid),
>   .branch_en(salu_branch_en),
>   .branch_taken(salu_branch_taken),
>   .q_reset(q_reset),
>   .feed_wfid(feed_wfid),
>   .feed_valid(feed_valid),
>   .q_rd(q_rd),
>   .valid_wf(valid_wf),
>   .decode_wfid(decode_wfid),
>   .decode_instr_valid(decode_instr_valid),
>   .clk(clk),
>   .rst(rst)
> );
> 
> scbd_feeder feeder(
>   .valid_wf(valid_wf),
>   .ins_half_reqd(decode_ins_half_rqd),
>   .ins_half_wfid(decode_ins_half_wfid),
>   .issue_vacant(issue_valid_entries),
>   .q_empty(q_empty),
>   .q_reset(q_reset),
>   .feed_valid(feed_valid),
>   .feed_wfid(feed_wfid),
>   .clk(clk),
>   .rst(rst)
> );
> 
> wq_pool pool(
>   .q_vtail_incr(q_vtail_incr),
>   .q_rd(q_rd),
>   .q_wr(q_wr),
>   .q_reset(q_reset),
>   .q_empty(q_empty),
>   .stop_fetch(fetch_stop_fetch),
>   .instr_pc_in(flopped_buff_instr_pc),
>   .instr_pc_out({decode_instr,decode_instr_pc}),
>   .wf_select(decode_wfid),
>   .clk(clk),
>   .rst(rst)
> );
> 
> reg_40x35b_1r_1w base_regs(
>   .rd_addr(decode_wfid),
>   .rd_data({decode_vgpr_base,decode_sgpr_base,decode_lds_base}),
>   .wr_en(fetch_basereg_wr),
>   .wr_addr(fetch_basereg_wfid),
>   .wr_data({fetch_vgpr_base,fetch_sgpr_base,fetch_lds_base}),
>   .clk(clk),
>   .rst(rst)
> );
> 
> ///////////////////////////////
> //Your code goes here - beware: script does not recognize changes
> // into files. It ovewrites everithing without mercy. Save your work before running the script
> ///////////////////////////////
